# OttoAI Backend Environment Variables Template
# Copy this file to .env and fill in your actual values

# ============================================================================
# CORE INFRASTRUCTURE
# ============================================================================

# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/truview
# For production, use connection pooling parameters:
# postgresql://user:password@host:5432/db?pool_size=20&max_overflow=40

# Redis Configuration (required for rate limiting, pub/sub, caching)
REDIS_URL=redis://localhost:6379/0
# For production Redis (e.g., Upstash):
# UPSTASH_REDIS_URL=redis://:password@host:port

# Environment
ENVIRONMENT=development
# Options: development, staging, production

# ============================================================================
# AUTHENTICATION & AUTHORIZATION
# ============================================================================

# Clerk Authentication
CLERK_SECRET_KEY=your_clerk_secret_key
CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_API_URL=https://api.clerk.dev/v1
CLERK_ISSUER=https://your-app.clerk.accounts.dev
CLERK_FRONTEND_ORIGIN=https://your-app.clerk.accounts.dev
CLERK_WEBHOOK_SECRET=your_clerk_webhook_secret

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================

# Twilio Communications
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_FROM_NUMBER=+1234567890
TWILIO_CALLBACK_NUMBER=+1234567890
TWILIO_API_BASE_URL=https://api.twilio.com

# CallRail Integration
CALLRAIL_API_KEY=your_callrail_api_key
CALLRAIL_ACCOUNT_ID=your_callrail_account_id
CALLRAIL_BASE_URL=https://api.callrail.com/v3

# Bland.ai Integration
BLAND_API_KEY=your_bland_api_key

# Deepgram Speech-to-Text
DEEPGRAM_API_KEY=your_deepgram_api_key
DEEPGRAM_API_BASE_URL=https://api.deepgram.com

# OpenAI API (for transcript analysis)
OPENAI_API_KEY=your_openai_api_key

# ============================================================================
# UWC (AI/ML PARTNER) INTEGRATION
# ============================================================================

# UWC API Configuration
UWC_BASE_URL=
# Staging: https://uwc-staging.shunyalabs.ai
# Production: https://uwc-prod.shunyalabs.ai

UWC_API_KEY=
# Your UWC API key (provided by Shunya Labs)

UWC_HMAC_SECRET=
# HMAC secret for webhook signature verification

UWC_VERSION=v1
# API version to use

USE_UWC_STAGING=false
# Set to true to use staging environment

# UWC Feature Flags (gradual rollout)
ENABLE_UWC_RAG=false
# Enable Ask Otto / RAG queries

ENABLE_UWC_ASR=false
# Enable automatic speech recognition / transcription

ENABLE_UWC_TRAINING=false
# Enable personal clone training

ENABLE_UWC_FOLLOWUPS=false
# Enable AI follow-up draft generation

# ============================================================================
# FILE STORAGE (AWS S3)
# ============================================================================

# AWS S3 Configuration (REQUIRED for document uploads)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
S3_BUCKET=otto-documents-prod
# For staging: otto-documents-staging

# ============================================================================
# ERROR TRACKING & MONITORING
# ============================================================================

# Sentry Error Tracking (CRITICAL for production)
SENTRY_DSN=
# Get from: https://sentry.io/settings/your-org/projects/otto-backend/keys/
# Example: https://abc123@o123456.ingest.sentry.io/7654321

SENTRY_TRACES_SAMPLE_RATE=0.1
# Percentage of transactions to trace (0.1 = 10%)
# Higher in staging (0.5), lower in production (0.1)

# ============================================================================
# OBSERVABILITY
# ============================================================================

# Logging Configuration
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

OBS_REDACT_PII=true
# Redact PII from logs (phone numbers, emails)

# OpenTelemetry Tracing
OTEL_EXPORTER_OTLP_ENDPOINT=
# Optional: export traces to collector
# Example: http://localhost:4318

OTEL_SERVICE_NAME_API=otto-api
OTEL_SERVICE_NAME_WORKER=otto-worker

# ============================================================================
# BACKGROUND JOBS
# ============================================================================

# Celery Configuration
ENABLE_CELERY=false
# Enable Celery for background jobs (ASR processing, etc.)

ENABLE_CELERY_BEAT=false
# Enable Celery Beat for scheduled tasks

# ============================================================================
# SECURITY & RATE LIMITING
# ============================================================================

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000,exp://*
# Comma-separated list of allowed origins
# Production: https://app.otto.ai,https://receptionist.otto.ai

# Rate Limiting
RATE_LIMIT_USER=60/minute
# Per-user rate limit

RATE_LIMIT_TENANT=600/minute
# Per-tenant rate limit

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Idempotency Configuration
IDEMPOTENCY_TTL_DAYS=90
# How long to keep idempotency keys (for webhook deduplication)

# API URL (for webhooks callbacks)
API_URL=https://your-backend-url.fly.dev
# Used for generating webhook callback URLs

# Development/Testing
DEBUG_SQL=false
# Set to true to log all SQL queries (development only)

DEV_EMIT_KEY=
# Optional: development testing key

{"openapi":"3.1.0","info":{"title":"TrueView API","version":"0.1.0"},"paths":{"/health":{"get":{"summary":"Health Check","description":"Basic health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/detailed":{"get":{"summary":"Detailed Health Check","description":"Detailed health check with all dependencies","operationId":"detailed_health_check_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/ready":{"get":{"summary":"Readiness Check","description":"Kubernetes readiness probe","operationId":"readiness_check_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/live":{"get":{"summary":"Liveness Check","description":"Kubernetes liveness probe","operationId":"liveness_check_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/metrics":{"get":{"summary":"Metrics Endpoint","description":"Prometheus metrics endpoint.","operationId":"metrics_endpoint_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/ws/test-emit":{"get":{"summary":"Test Emit Event","description":"Test endpoint to emit events for WebSocket testing.\nRequires DEV_EMIT_KEY in production environments.","operationId":"test_emit_event_ws_test_emit_get","parameters":[{"name":"event","in":"query","required":true,"schema":{"type":"string","description":"Event name to emit","title":"Event"},"description":"Event name to emit"},{"name":"tenant_id","in":"query","required":true,"schema":{"type":"string","description":"Tenant ID","title":"Tenant Id"},"description":"Tenant ID"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"User ID","title":"User Id"},"description":"User ID"},{"name":"lead_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Lead ID","title":"Lead Id"},"description":"Lead ID"},{"name":"X-Dev-Key","in":"query","required":false,"schema":{"type":"string","description":"Development key","title":"X-Dev-Key"},"description":"Development key"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/add-company":{"post":{"tags":["webhooks"],"summary":"Add Company","operationId":"add_company_webhook_api_v1_add_company_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/api/v1/companies":{"get":{"tags":["webhooks"],"summary":"List Companies","operationId":"list_companies_webhook_api_v1_companies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/api/v1/dashboard/metrics":{"get":{"tags":["webhooks"],"summary":"Get Dashboard Metrics","operationId":"get_dashboard_metrics_webhook_api_v1_dashboard_metrics_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/dashboard/booking-rate":{"get":{"tags":["webhooks"],"summary":"Get Booking Rate","description":"Get time-series booking rate data for dashboard chart.\n\nReturns booking rate (percentage) per day for the specified date range.\nBooking rate = (booked appointments / qualified calls) * 100\n\nDefault: last 30 days, grouped by day.\nMulti-tenant: scoped by company_id from JWT tenant context.","operationId":"get_booking_rate_webhook_api_v1_dashboard_booking_rate_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago","title":"Start Date"},"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End date (ISO format YYYY-MM-DD), defaults to today","title":"End Date"},"description":"End date (ISO format YYYY-MM-DD), defaults to today"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_List_BookingRateDataPoint__"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/dashboard/top-objections":{"get":{"tags":["webhooks"],"summary":"Get Top Objections","description":"Get top objections with percentages for dashboard.\n\nReturns objections aggregated from CallAnalysis.objections JSON field.\nPercentage represents share of calls with that objection among all calls that had objections.\n\nDefault: last 30 days, top 5 objections.\nMulti-tenant: scoped by company_id from JWT tenant context.","operationId":"get_top_objections_webhook_api_v1_dashboard_top_objections_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago","title":"Start Date"},"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End date (ISO format YYYY-MM-DD), defaults to today","title":"End Date"},"description":"End date (ISO format YYYY-MM-DD), defaults to today"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"description":"Maximum number of objections to return","default":5,"title":"Limit"},"description":"Maximum number of objections to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_List_TopObjectionItem__"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/dashboard/calls":{"get":{"tags":["webhooks"],"summary":"Get Calls","operationId":"get_calls_webhook_api_v1_dashboard_calls_get","parameters":[{"name":"status","in":"query","required":true,"schema":{"type":"string","title":"Status"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of calls to return","default":100,"title":"Limit"},"description":"Maximum number of calls to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of calls to skip","default":0,"title":"Offset"},"description":"Number of calls to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/sales-managers":{"get":{"tags":["webhooks"],"summary":"Get Sales Managers","operationId":"get_sales_managers_webhook_api_v1_sales_managers_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"integer","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/sales-reps":{"get":{"tags":["webhooks"],"summary":"Get Sales Reps","operationId":"get_sales_reps_webhook_api_v1_sales_reps_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/api/v1/diagnostics":{"get":{"tags":["webhooks"],"summary":"Get Diagnostics","operationId":"get_diagnostics_webhook_api_v1_diagnostics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/make-homeowner-followup-call":{"post":{"tags":["webhooks"],"summary":"Make Homeowner Followup Call","operationId":"make_homeowner_followup_call_webhook_make_homeowner_followup_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/bland-callback":{"post":{"tags":["webhooks"],"summary":"Bland Callback","operationId":"bland_callback_webhook_bland_callback_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/pre-call":{"post":{"tags":["webhooks"],"summary":"Pre Call Webhook","operationId":"pre_call_webhook_webhook_pre_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/call-complete":{"post":{"tags":["webhooks"],"summary":"Call Complete Webhook","description":"Handle CallRail Post-Call webhook - can be JSON body or query params","operationId":"call_complete_webhook_webhook_call_complete_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/call-modified":{"post":{"tags":["webhooks"],"summary":"Call Modified Webhook","operationId":"call_modified_webhook_webhook_call_modified_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/call/{call_id}":{"get":{"tags":["webhooks"],"summary":"Get Call Details","operationId":"get_call_details_webhook_call__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Call","description":"Delete a specific call from the database","operationId":"delete_call_webhook_call__call_id__delete","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/unassigned-calls":{"get":{"tags":["webhooks"],"summary":"Get Unassigned Calls","operationId":"get_unassigned_calls_webhook_unassigned_calls_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/add-call":{"post":{"tags":["webhooks"],"summary":"Add Call","operationId":"add_call_webhook_add_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/update-call-status":{"post":{"tags":["webhooks"],"summary":"Update Call Status","description":"Update a call's status (bought/not bought) and automatically handle geofence removal","operationId":"update_call_status_webhook_update_call_status_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/company/":{"post":{"tags":["webhooks","Companies","Companies"],"summary":"Create a new company","description":"Creates a new company in both Otto's database and Clerk (authentication provider).\n    \n    **Process**:\n    1. Creates organization in Clerk with auto-generated slug\n    2. Uses Clerk org ID as company ID in Otto database\n    3. Validates that user is creating company for their own tenant\n    \n    **Required Role**: leadership (exec role only)\n    \n    **Security**: Prevents cross-tenant company creation - user can only create company for their own org_id\n    \n    **Auto-Generated**:\n    - company_id: Set to Clerk organization ID\n    - slug: Generated from company name (e.g., \"RoofCo LLC\" → \"roofco-llc\")\n    - created_at: Auto-set to current timestamp","operationId":"create_company_webhook_company__post","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","description":"Company name (e.g., 'RoofCo LLC')","title":"Name"},"description":"Company name (e.g., 'RoofCo LLC')"},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","description":"Primary company phone number (e.g., '+1-555-123-4567')","title":"Phone Number"},"description":"Primary company phone number (e.g., '+1-555-123-4567')"},{"name":"address","in":"query","required":false,"schema":{"type":"string","description":"Company address (optional)","title":"Address"},"description":"Company address (optional)"}],"responses":{"200":{"description":"Company created successfully","content":{"application/json":{"schema":{},"example":{"status":"success","company_id":"org_2a1b3c4d5e6f7g8h","clerk_org_id":"org_2a1b3c4d5e6f7g8h"}}}},"400":{"description":"Company already exists or invalid input","content":{"application/json":{"examples":{"duplicate":{"value":{"detail":"Company with this name already exists"}},"clerk_error":{"value":{"status":"error","message":"Failed to create Clerk organization","details":"Clerk API error: ..."}}}}}},"401":{"description":"Missing authentication or tenant context","content":{"application/json":{"example":{"detail":"Tenant context not found in request"}}}},"403":{"description":"Cross-tenant company creation attempt","content":{"application/json":{"example":{"detail":"Cannot create company for different tenant"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/get-user-company/{username}":{"get":{"tags":["webhooks","Companies"],"summary":"Get User Company","operationId":"get_user_company_webhook_company_get_user_company__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/{company_id}":{"get":{"tags":["webhooks","Companies","Companies"],"summary":"Get company details","description":"Retrieves complete details for a specific company.\n    \n    **Returns**:\n    - Company ID (same as Clerk org ID)\n    - Company name\n    - Phone number\n    - Address (if set)\n    - CallRail API key (if configured)\n    - CallRail account ID (if configured)\n    - Creation and update timestamps\n    \n    **Tenant Scoping**: Automatically filtered to user's company via middleware\n    \n    **Use Case**: Display company profile, settings page","operationId":"get_company_webhook_company__company_id__get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","description":"The unique company ID (Clerk org ID)","title":"Company Id"},"description":"The unique company ID (Clerk org ID)"}],"responses":{"200":{"description":"Company found and returned","content":{"application/json":{"schema":{},"example":{"id":"org_2a1b3c4d5e6f7g8h","name":"RoofCo LLC","phone_number":"+1-555-123-4567","address":"123 Main St, Phoenix, AZ 85001","callrail_api_key":"abc123...xyz","callrail_account_id":"ACC123456","created_at":"2025-01-15T10:30:00Z","updated_at":"2025-10-10T14:22:00Z"}}}},"404":{"description":"Company not found","content":{"application/json":{"example":{"detail":"Company not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["webhooks","Companies","Companies"],"summary":"Update company details","description":"Updates company information (name, phone, address).\n    \n    **Required Role**: leadership (exec only)\n    \n    **Security**: \n    - Validates user owns this company (tenant ownership check)\n    - Cannot modify other companies' data\n    \n    **Updatable Fields** (all optional):\n    - name: Company name\n    - phone_number: Primary phone\n    - address: Physical address\n    \n    **Note**: CallRail API key and account ID use separate endpoints for security\n    \n    **Use Case**: Company settings page, profile updates","operationId":"update_company_webhook_company__company_id__put","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","description":"The unique company ID to update","title":"Company Id"},"description":"The unique company ID to update"},{"name":"name","in":"query","required":false,"schema":{"type":"string","description":"Updated company name","title":"Name"},"description":"Updated company name"},{"name":"phone_number","in":"query","required":false,"schema":{"type":"string","description":"Updated phone number","title":"Phone Number"},"description":"Updated phone number"},{"name":"address","in":"query","required":false,"schema":{"type":"string","description":"Updated address","title":"Address"},"description":"Updated address"}],"responses":{"200":{"description":"Company updated successfully","content":{"application/json":{"schema":{},"example":{"status":"success","company_id":"org_2a1b3c4d5e6f7g8h"}}}},"403":{"description":"Access denied - user doesn't own this company","content":{"application/json":{"example":{"detail":"Access denied. You can only modify your own company."}}}},"404":{"description":"Company not found","content":{"application/json":{"example":{"detail":"Company not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Company","description":"Delete a specific company from the database","operationId":"delete_company_webhook_company__company_id__delete","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/{company_id}/sales-managers":{"get":{"tags":["webhooks","Companies"],"summary":"List Company Sales Managers","operationId":"list_company_sales_managers_webhook_company__company_id__sales_managers_get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/list-organizations":{"get":{"tags":["webhooks","Companies"],"summary":"List Organizations","description":"List all organizations in Clerk","operationId":"list_organizations_webhook_company_list_organizations_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/organizations/{org_id}/memberships":{"post":{"tags":["webhooks","Companies"],"summary":"Add User To Organization","description":"Add a user to a Clerk organization\n\nArgs:\n    org_id: The ID of the organization to add the user to (this is the Clerk org ID)\n    request: The request containing user_id and role in the body\n    \nReturns:\n    dict: Response containing success status and details","operationId":"add_user_to_organization_webhook_company_organizations__org_id__memberships_post","parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/set-callrail-api-key/{company_id}":{"post":{"tags":["webhooks","Companies","Companies","Integrations"],"summary":"Configure CallRail API key","description":"Sets the CallRail API key for call tracking integration.\n    \n    **Purpose**: Enables Otto to fetch call data from CallRail API\n    \n    **Required Role**: leadership (exec only)\n    \n    **Security**: \n    - API key stored securely in database\n    - Tenant ownership validated\n    - Cannot set key for other companies\n    \n    **How to Get CallRail API Key**:\n    1. Log into CallRail dashboard\n    2. Go to Settings → Integrations → API\n    3. Generate new API token\n    4. Copy and paste here\n    \n    **Use Case**: Initial setup, API key rotation","operationId":"set_callrail_api_key_webhook_company_set_callrail_api_key__company_id__post","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","description":"The unique company ID","title":"Company Id"},"description":"The unique company ID"},{"name":"api_key","in":"query","required":true,"schema":{"type":"string","description":"CallRail API token from CallRail dashboard","title":"Api Key"},"description":"CallRail API token from CallRail dashboard"}],"responses":{"200":{"description":"API key updated successfully","content":{"application/json":{"schema":{},"example":{"success":true,"message":"CallRail API key updated successfully"}}}},"403":{"description":"Access denied - user doesn't own this company","content":{"application/json":{"example":{"detail":"Access denied"}}}},"404":{"description":"Company not found","content":{"application/json":{"example":{"detail":"Company not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/set-callrail-account-id/{company_id}":{"post":{"tags":["webhooks","Companies"],"summary":"Set Callrail Account Id","description":"Manually set the CallRail account ID for a company.","operationId":"set_callrail_account_id_webhook_company_set_callrail_account_id__company_id__post","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"account_id","in":"query","required":true,"schema":{"type":"string","title":"Account Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/company/by-phone/{phone_number}":{"get":{"tags":["webhooks","Companies"],"summary":"Get Company By Phone","description":"Lookup a company by phone number and return its name.\n\nArgs:\n    phone_number: The phone number to search for\n    \nReturns:\n    Company name if found, 404 error if not found","operationId":"get_company_by_phone_webhook_company_by_phone__phone_number__get","parameters":[{"name":"phone_number","in":"path","required":true,"schema":{"type":"string","title":"Phone Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-manager/":{"post":{"tags":["webhooks","sales-manager"],"summary":"Create Sales Manager","operationId":"create_sales_manager_webhook_sales_manager__post","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}},{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","title":"Phone Number"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"password","in":"query","required":false,"schema":{"type":"string","title":"Password"}},{"name":"username","in":"query","required":false,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-manager/{manager_id}":{"get":{"tags":["webhooks","sales-manager"],"summary":"Get Sales Manager","operationId":"get_sales_manager_webhook_sales_manager__manager_id__get","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["webhooks","sales-manager"],"summary":"Update Sales Manager","operationId":"update_sales_manager_webhook_sales_manager__manager_id__put","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Sales Manager","description":"Delete a specific sales manager from the database","operationId":"delete_sales_manager_webhook_sales_manager__manager_id__delete","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-manager/{manager_id}/sales-reps":{"get":{"tags":["webhooks","sales-manager"],"summary":"List Manager Sales Reps","operationId":"list_manager_sales_reps_webhook_sales_manager__manager_id__sales_reps_get","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-rep":{"get":{"tags":["webhooks","sales-rep"],"summary":"Get Company Reps","description":"Get all sales representatives for the company that the authenticated user belongs to.\nRequires user to be authenticated.","operationId":"get_company_reps_webhook_sales_rep_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepsListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-rep/{rep_id}/appointments":{"get":{"tags":["webhooks","sales-rep"],"summary":"Get Rep Appointments","description":"Get all appointments for a specific sales rep.\nRequires the authenticated user to be in the same company as the rep.\nCan filter to show past, upcoming, or all appointments.","operationId":"get_rep_appointments_webhook_sales_rep__rep_id__appointments_get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}},{"name":"show_past","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Show Past"}},{"name":"show_all","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Show All"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepAppointmentsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-rep/":{"post":{"tags":["webhooks","sales-rep"],"summary":"Create Sales Rep","operationId":"create_sales_rep_webhook_sales_rep__post","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}},{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","title":"Phone Number"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"manager_id","in":"query","required":true,"schema":{"type":"string","title":"Manager Id"}},{"name":"password","in":"query","required":false,"schema":{"type":"string","title":"Password"}},{"name":"username","in":"query","required":false,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-rep/{rep_id}":{"get":{"tags":["webhooks","sales-rep"],"summary":"Get Sales Rep","operationId":"get_sales_rep_webhook_sales_rep__rep_id__get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["webhooks","sales-rep"],"summary":"Update Sales Rep","operationId":"update_sales_rep_webhook_sales_rep__rep_id__put","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"integer","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Sales Rep","description":"Delete a specific sales rep from the database","operationId":"delete_sales_rep_webhook_sales_rep__rep_id__delete","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"integer","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/sales-rep/assign-sales-rep":{"post":{"tags":["webhooks","sales-rep"],"summary":"Assign Sales Rep","operationId":"assign_sales_rep_webhook_sales_rep_assign_sales_rep_post","parameters":[{"name":"call_id","in":"query","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"new_sales_rep_id","in":"query","required":true,"schema":{"type":"string","title":"New Sales Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/user/":{"post":{"tags":["webhooks","user"],"summary":"Create User","description":"Create a new user (either manager or rep)","operationId":"create_user_webhook_user__post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/user/{user_id}":{"get":{"tags":["webhooks","user"],"summary":"Get User","description":"Get user details","operationId":"get_user_webhook_user__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["webhooks","user"],"summary":"Update User","description":"Update user details","operationId":"update_user_webhook_user__user_id__put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete User","description":"Delete a specific user from the database","operationId":"delete_user_webhook_user__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/user/by-username/{username}":{"get":{"tags":["webhooks","user"],"summary":"Get User By Username","description":"Get user by username","operationId":"get_user_by_username_webhook_user_by_username__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/user/clerk-webhook":{"post":{"tags":["webhooks","user"],"summary":"Handle Clerk Webhook","description":"Handle webhooks from Clerk","operationId":"handle_clerk_webhook_webhook_user_clerk_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/user/{user_id}/sync-to-clerk":{"post":{"tags":["webhooks","user"],"summary":"Sync User To Clerk","description":"Force sync a user from database to Clerk","operationId":"sync_user_to_clerk_webhook_user__user_id__sync_to_clerk_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/user/metadata/{user_id}":{"patch":{"tags":["webhooks","user"],"summary":"Update User Metadata","description":"Update a user's metadata in Clerk\n\nArgs:\n    user_id: The Clerk user ID\n    request: The request object containing the metadata to update\n    \nReturns:\n    The updated user data","operationId":"update_user_metadata_webhook_user_metadata__user_id__patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/user/company":{"get":{"tags":["webhooks","user"],"summary":"Get User Company","description":"Get the company for the current authenticated user","operationId":"get_user_company_webhook_user_company_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/purge-database":{"post":{"tags":["webhooks","database cleanup"],"summary":"Purge Database","description":"Delete all data from the database\n\nThis is a dangerous operation that will delete ALL data from the database.\nIt requires a secret code for protection.","operationId":"purge_database_webhook_purge_database_post","parameters":[{"name":"secret_code","in":"query","required":true,"schema":{"type":"string","title":"Secret Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/calls":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete All Calls","description":"Delete all calls from the database","operationId":"delete_all_calls_webhook_calls_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/scheduled-calls":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete All Scheduled Calls","description":"Delete all scheduled calls from the database","operationId":"delete_all_scheduled_calls_webhook_scheduled_calls_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/scheduled-call/{scheduled_call_id}":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Scheduled Call","description":"Delete a specific scheduled call from the database","operationId":"delete_scheduled_call_webhook_scheduled_call__scheduled_call_id__delete","parameters":[{"name":"scheduled_call_id","in":"path","required":true,"schema":{"type":"integer","title":"Scheduled Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/users":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete All Users","description":"Delete all users from the database","operationId":"delete_all_users_webhook_users_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/companies":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete All Companies","description":"Delete all companies from the database","operationId":"delete_all_companies_webhook_companies_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/sales-reps":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete All Sales Reps","description":"Delete all sales reps from the database","operationId":"delete_all_sales_reps_webhook_sales_reps_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/sales-managers":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete All Sales Managers","description":"Delete all sales managers from the database","operationId":"delete_all_sales_managers_webhook_sales_managers_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/webhook/purge-organizations":{"post":{"tags":["webhooks","database cleanup"],"summary":"Purge All Organizations","description":"Delete all organizations from Clerk\n\nThis is a dangerous operation that will delete ALL organizations in your Clerk instance.\nIt requires a secret code for protection.","operationId":"purge_all_organizations_webhook_purge_organizations_post","parameters":[{"name":"secret_code","in":"query","required":true,"schema":{"type":"string","title":"Secret Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/purge-users":{"post":{"tags":["webhooks","database cleanup"],"summary":"Purge All Users","description":"Delete all users from Clerk\n\nThis is a dangerous operation that will delete ALL users in your Clerk instance.\nIt requires a secret code for protection.","operationId":"purge_all_users_webhook_purge_users_post","parameters":[{"name":"secret_code","in":"query","required":true,"schema":{"type":"string","title":"Secret Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/transcript-analysis/{analysis_id}":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Transcript Analysis","description":"Delete a specific transcript analysis by its ID","operationId":"delete_transcript_analysis_webhook_transcript_analysis__analysis_id__delete","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"integer","title":"Analysis Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhook/transcript-analyses/call/{call_id}":{"delete":{"tags":["webhooks","database cleanup"],"summary":"Delete Call Transcript Analyses","description":"Delete all transcript analyses for a specific call","operationId":"delete_call_transcript_analyses_webhook_transcript_analyses_call__call_id__delete","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/uwc/asr/complete":{"post":{"tags":["uwc-webhooks"],"summary":"Asr Complete Webhook","description":"Webhook: UWC notifies Otto that ASR batch processing is complete.\n\nExpected payload (will be updated when UWC provides actual spec):\n{\n    \"job_id\": \"job_abc123\",\n    \"company_id\": \"tenant_123\",\n    \"call_id\": \"call_456\",\n    \"status\": \"completed\",\n    \"transcript\": [\n        {\"speaker\": \"CSR\", \"text\": \"Hello, this is RoofCo!\"},\n        {\"speaker\": \"Customer\", \"text\": \"Hi, I need a quote...\"}\n    ],\n    \"duration_sec\": 540,\n    \"confidence\": 0.94,\n    \"language\": \"en\"\n}\n\nOtto's job:\n1. Verify HMAC signature\n2. Store transcript in calls table\n3. Emit real-time event to WebSocket subscribers\n4. Return 200 OK (idempotent)","operationId":"asr_complete_webhook_webhooks_uwc_asr_complete_post","parameters":[{"name":"X-UWC-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Signature"}},{"name":"X-UWC-Timestamp","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Timestamp"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/uwc/rag/indexed":{"post":{"tags":["uwc-webhooks"],"summary":"Rag Indexed Webhook","description":"Webhook: UWC notifies Otto that document indexing is complete.\n\nExpected payload (will be updated when UWC provides actual spec):\n{\n    \"job_id\": \"doc_job_xyz789\",\n    \"company_id\": \"tenant_123\",\n    \"document_id\": \"doc_456\",\n    \"status\": \"completed\",\n    \"chunks_indexed\": 42,\n    \"vectors_created\": 42\n}\n\nOtto's job:\n1. Verify HMAC signature\n2. Update document status in database (when we have documents table)\n3. Emit real-time event\n4. Return 200 OK","operationId":"rag_indexed_webhook_webhooks_uwc_rag_indexed_post","parameters":[{"name":"X-UWC-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Signature"}},{"name":"X-UWC-Timestamp","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Timestamp"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/uwc/training/status":{"post":{"tags":["uwc-webhooks"],"summary":"Training Status Webhook","description":"Webhook: UWC notifies Otto about personal clone training status updates.\n\nExpected payload (will be updated when UWC provides actual spec):\n{\n    \"job_id\": \"train_def456\",\n    \"company_id\": \"tenant_123\",\n    \"rep_id\": \"rep_789\",\n    \"status\": \"completed\",\n    \"progress\": 100,\n    \"model_version\": \"v1.2.3\",\n    \"training_duration_min\": 45\n}\n\nOtto's job:\n1. Verify HMAC signature\n2. Update rep clone training status (when we have rep_profiles table)\n3. Emit real-time event to rep\n4. Return 200 OK","operationId":"training_status_webhook_webhooks_uwc_training_status_post","parameters":[{"name":"X-UWC-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Signature"}},{"name":"X-UWC-Timestamp","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Timestamp"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/uwc/analysis/complete":{"post":{"tags":["uwc-webhooks"],"summary":"Analysis Complete Webhook","description":"Webhook: UWC notifies Otto that ML analysis is complete.\n\nExpected payload (will be updated when UWC provides actual spec):\n{\n    \"job_id\": \"analysis_ghi789\",\n    \"company_id\": \"tenant_123\",\n    \"call_id\": \"call_456\",\n    \"status\": \"completed\",\n    \"analysis\": {\n        \"lead_classification\": \"qualified\",\n        \"objections\": [\"price\", \"timeline\"],\n        \"sop_stage\": \"present\",\n        \"rehash_score\": 7.5,\n        \"coaching_tips\": [...]\n    }\n}\n\nOtto's job:\n1. Verify HMAC signature\n2. Store analysis results in transcript_analyses table\n3. Emit real-time event with insights\n4. Return 200 OK","operationId":"analysis_complete_webhook_webhooks_uwc_analysis_complete_post","parameters":[{"name":"X-UWC-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Signature"}},{"name":"X-UWC-Timestamp","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Timestamp"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/webhooks/uwc/followup/draft":{"post":{"tags":["uwc-webhooks"],"summary":"Followup Draft Webhook","description":"Webhook: UWC notifies Otto that follow-up draft is ready.\n\nExpected payload (will be updated when UWC provides actual spec):\n{\n    \"job_id\": \"draft_jkl012\",\n    \"company_id\": \"tenant_123\",\n    \"rep_id\": \"rep_789\",\n    \"lead_id\": \"lead_345\",\n    \"status\": \"completed\",\n    \"draft\": {\n        \"message\": \"Hi Mrs. Patel, I understand budget is a concern...\",\n        \"tone\": \"empathetic\",\n        \"confidence\": 0.91,\n        \"channel\": \"sms\"\n    }\n}\n\nOtto's job:\n1. Verify HMAC signature\n2. Store draft in followup_drafts table (when it exists)\n3. Emit real-time event to rep\n4. Return 200 OK","operationId":"followup_draft_webhook_webhooks_uwc_followup_draft_post","parameters":[{"name":"X-UWC-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Signature"}},{"name":"X-UWC-Timestamp","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Uwc-Timestamp"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/shunya/webhook":{"post":{"tags":["shunya"],"summary":"Shunya Webhook","description":"Webhook endpoint for Shunya job completion notifications.\n\nSecurity:\n- Verifies HMAC-SHA256 signature before processing (X-Shunya-Signature)\n- Validates timestamp to prevent replay attacks (X-Shunya-Timestamp, epoch milliseconds)\n- Uses X-Shunya-Task-Id for idempotency tracking\n- Enforces tenant isolation\n\nHeaders:\n- X-Shunya-Signature: HMAC-SHA256 hex digest\n- X-Shunya-Timestamp: Epoch milliseconds (string)\n- X-Shunya-Task-Id: Task ID for idempotency (optional)\n\nPayload structure:\n{\n    \"shunya_job_id\": \"job_12345\",\n    \"status\": \"completed\" | \"failed\",\n    \"result\": {...},  # Optional, if status is \"completed\"\n    \"error\": {...},   # Optional, if status is \"failed\" (canonical error envelope)\n    \"company_id\": \"...\",  # Required for tenant verification\n}\n\nBehavior:\n1. Read raw request body\n2. Verify HMAC signature (if invalid -> 401)\n3. Parse JSON payload\n4. Extract company_id and verify tenant isolation\n5. Look up ShunyaJob by shunya_job_id (or use task_id for idempotency)\n6. Verify company_id matches job.company_id (if mismatch -> 403)\n7. Update job_status\n8. If completed: fetch final result, normalize, persist (idempotent)\n9. Emit events (idempotent)\n\nWebhook delivery guarantees:\n- At-least-once delivery (duplicates possible)\n- Idempotency handled via ShunyaJob + output hash","operationId":"shunya_webhook_api_v1_shunya_webhook_post","parameters":[{"name":"X-Shunya-Signature","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Shunya-Signature"}},{"name":"X-Shunya-Timestamp","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Shunya-Timestamp"}},{"name":"X-Shunya-Task-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Shunya-Task-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/query":{"post":{"tags":["rag","ask-otto"],"summary":"Query Ask Otto","description":"Ask Otto: Natural language Q&A over company data.\n\nScoping rules:\n- exec/manager: Company-wide data\n- csr: Company calls + leads (not rep appointments)\n- rep: Only their own data\n\nReturns answer with citations showing source documents/calls.","operationId":"query_ask_otto_api_v1_rag_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RAGQueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RAGQueryResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/queries":{"get":{"tags":["rag","ask-otto"],"summary":"Get Query History","description":"Get Ask Otto query history for analytics.\n\nOnly exec/manager can view query history.\nCan filter by specific user.","operationId":"get_query_history_api_v1_rag_queries_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Page Size"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_Dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/queries/{query_id}/feedback":{"post":{"tags":["rag","ask-otto"],"summary":"Submit Query Feedback","description":"Submit feedback on Ask Otto response quality.\nHelps improve AI over time.","operationId":"submit_query_feedback_api_v1_rag_queries__query_id__feedback_post","parameters":[{"name":"query_id","in":"path","required":true,"schema":{"type":"string","title":"Query Id"}},{"name":"rating","in":"query","required":true,"schema":{"type":"integer","maximum":5,"minimum":1,"title":"Rating"}},{"name":"feedback","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feedback"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/documents":{"get":{"tags":["rag","ask-otto"],"summary":"List Documents","description":"List uploaded documents for RAG.\nFilter by type and indexing status.","operationId":"list_documents_api_v1_rag_documents_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Page Size"}},{"name":"document_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Document Type"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_Dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/documents/{document_id}":{"get":{"tags":["rag","ask-otto"],"summary":"Get Document","description":"Get document details by ID.","operationId":"get_document_api_v1_rag_documents__document_id__get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["rag","ask-otto"],"summary":"Delete Document","description":"Delete document from RAG index (soft delete).\nAlso requests deletion from UWC vector store.","operationId":"delete_document_api_v1_rag_documents__document_id__delete","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/documents/upload":{"post":{"tags":["rag","ask-otto"],"summary":"Upload Document","description":"Upload document (SOP, script, etc.) for RAG indexing.\n\nFlow:\n1. Upload to S3\n2. Create database record\n3. Send to UWC for indexing\n4. Return document_id and job_id","operationId":"upload_document_api_v1_rag_documents_upload_post","parameters":[{"name":"document_type","in":"query","required":false,"schema":{"type":"string","default":"sop","title":"Document Type"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_api_v1_rag_documents_upload_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schemas__responses__APIResponse_DocumentUploadResponse___1"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/calls/{call_id}/analyze":{"post":{"tags":["analysis","coaching"],"summary":"Analyze Call","description":"Trigger AI analysis on a call recording.\n\nProcess:\n1. Verify call exists and user has access\n2. Send audio to UWC for ASR processing\n3. Return job_id for status tracking\n4. UWC will send webhook when complete\n\nReturns job_id immediately (async processing).","operationId":"analyze_call_api_v1_calls__call_id__analyze_post","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/AnalyzeCallRequest"},{"type":"null"}],"title":"Analyze Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_JobStatusResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/calls/{call_id}/analysis":{"get":{"tags":["analysis","coaching"],"summary":"Get Call Analysis","description":"Get AI analysis results for a call.\n\nReturns:\n- Transcript with speaker labels\n- Objections detected\n- Coaching recommendations\n- SOP stages completed/missed\n- Sentiment and rehash scores","operationId":"get_call_analysis_api_v1_calls__call_id__analysis_get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CallAnalysisResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/calls/analyze-batch":{"post":{"tags":["analysis","coaching"],"summary":"Analyze Batch","description":"Trigger analysis on multiple calls at once.\nUseful for batch processing during onboarding.\n\nLimits: 50 calls per request.","operationId":"analyze_batch_api_v1_calls_analyze_batch_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"integer"},"type":"array","title":"Call Ids"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_List_JobStatusResponse__"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/calls/analytics/objections":{"get":{"tags":["analysis","coaching"],"summary":"Get Objection Analytics","description":"Get objection analytics for dashboard.\n\nReturns:\n- Top objections across all calls\n- Percentage breakdown\n- Example quotes\n- Optional: by-rep breakdown","operationId":"get_objection_analytics_api_v1_calls_analytics_objections_get","parameters":[{"name":"date_range","in":"query","required":false,"schema":{"type":"string","default":"last_30_days","title":"Date Range"}},{"name":"rep_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_ObjectionAnalyticsResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/followups/draft":{"post":{"tags":["followups","ai-messaging"],"summary":"Generate Followup Draft","description":"Generate AI follow-up draft using personal clone or generic AI.\n\nFeatures:\n- Personal clone (rep's style) if available\n- Quiet hours enforcement (9PM-8AM local time)\n- Automatic scheduling if in quiet hours\n- Draft approval workflow (human-in-loop)","operationId":"generate_followup_draft_api_v1_followups_draft_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateDraftRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_DraftResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/followups/drafts":{"get":{"tags":["followups","ai-messaging"],"summary":"List Followup Drafts","description":"List follow-up drafts.\n\nReps see only their own drafts.\nManagers/execs see all drafts for their team.","operationId":"list_followup_drafts_api_v1_followups_drafts_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_Dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/followups/drafts/{draft_id}/approve":{"post":{"tags":["followups","ai-messaging"],"summary":"Approve Draft","description":"Approve follow-up draft (human-in-loop).\nOptionally modify before approving.","operationId":"approve_draft_api_v1_followups_drafts__draft_id__approve_post","parameters":[{"name":"draft_id","in":"path","required":true,"schema":{"type":"string","title":"Draft Id"}},{"name":"modified_text","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Modified Text"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/followups/drafts/{draft_id}/send":{"post":{"tags":["followups","ai-messaging"],"summary":"Send Draft","description":"Mark draft as sent (actual sending happens via Twilio/email service).\nUpdates draft status and tracks usage.","operationId":"send_draft_api_v1_followups_drafts__draft_id__send_post","parameters":[{"name":"draft_id","in":"path","required":true,"schema":{"type":"string","title":"Draft Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/clone/train":{"post":{"tags":["personal-clone","training"],"summary":"Train Personal Clone","description":"Submit personal clone training job.\n\nTakes reels/shorts/call recordings to learn rep's communication style.\nTraining takes 2-4 hours typically.\n\nProcess:\n1. Validate rep exists and user has access\n2. Validate training data\n3. Submit to UWC for training\n4. Track job status\n5. UWC sends webhook when complete","operationId":"train_personal_clone_api_v1_clone_train_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainCloneRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_JobStatusResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/clone/{rep_id}/status":{"get":{"tags":["personal-clone","training"],"summary":"Get Clone Status","description":"Get training status for rep's personal clone.\nReturns latest training job status.","operationId":"get_clone_status_api_v1_clone__rep_id__status_get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CloneStatusResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/clone/{rep_id}/history":{"get":{"tags":["personal-clone","training"],"summary":"Get Clone Training History","description":"Get training history for a rep (all past jobs).\nOnly accessible by exec/manager.","operationId":"get_clone_training_history_api_v1_clone__rep_id__history_get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_Dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/clone/{rep_id}/retry":{"post":{"tags":["personal-clone","training"],"summary":"Retry Failed Training","description":"Retry a failed training job.\nResubmits same training data to UWC.","operationId":"retry_failed_training_api_v1_clone__rep_id__retry_post","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}},{"name":"job_id","in":"query","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/gdpr/delete-user":{"post":{"tags":["gdpr","privacy","compliance"],"summary":"Delete User Data","description":"Delete all user data (GDPR Right to Erasure).\n\nWARNING: This is irreversible and deletes:\n- User account\n- All calls assigned to user\n- All transcripts and analyses\n- All RAG queries\n- All follow-up drafts\n- All personal clone jobs\n- All uploaded documents\n- All S3 files\n- Requests UWC deletion via their API\n\nOnly execs can perform this operation.\nRequires explicit confirmation.","operationId":"delete_user_data_api_v1_gdpr_delete_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataDeletionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_DataDeletionResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/gdpr/export-user-data":{"post":{"tags":["gdpr","privacy","compliance"],"summary":"Export User Data","description":"Export all user data (GDPR Right to Access).\n\nGenerates JSON export of all user data and uploads to S3.\nReturns presigned URL for download (expires in 24 hours).\n\nReps can export their own data.\nExecs can export any user's data.","operationId":"export_user_data_api_v1_gdpr_export_user_data_post","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/gdpr/tenant-data":{"delete":{"tags":["gdpr","privacy","compliance"],"summary":"Delete Tenant Data","description":"Delete ALL company data (company offboarding).\n\nWARNING: This is EXTREMELY destructive!\nRequires company name confirmation.\n\nDeletes:\n- All users\n- All calls\n- All analyses\n- All documents\n- All S3 files\n- Requests full UWC deletion\n\nOnly execs can perform this.","operationId":"delete_tenant_data_api_v1_gdpr_tenant_data_delete","parameters":[{"name":"confirm_company_name","in":"query","required":true,"schema":{"type":"string","title":"Confirm Company Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/":{"post":{"tags":["Companies","Companies"],"summary":"Create a new company","description":"Creates a new company in both Otto's database and Clerk (authentication provider).\n    \n    **Process**:\n    1. Creates organization in Clerk with auto-generated slug\n    2. Uses Clerk org ID as company ID in Otto database\n    3. Validates that user is creating company for their own tenant\n    \n    **Required Role**: leadership (exec role only)\n    \n    **Security**: Prevents cross-tenant company creation - user can only create company for their own org_id\n    \n    **Auto-Generated**:\n    - company_id: Set to Clerk organization ID\n    - slug: Generated from company name (e.g., \"RoofCo LLC\" → \"roofco-llc\")\n    - created_at: Auto-set to current timestamp","operationId":"create_company_company__post","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","description":"Company name (e.g., 'RoofCo LLC')","title":"Name"},"description":"Company name (e.g., 'RoofCo LLC')"},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","description":"Primary company phone number (e.g., '+1-555-123-4567')","title":"Phone Number"},"description":"Primary company phone number (e.g., '+1-555-123-4567')"},{"name":"address","in":"query","required":false,"schema":{"type":"string","description":"Company address (optional)","title":"Address"},"description":"Company address (optional)"}],"responses":{"200":{"description":"Company created successfully","content":{"application/json":{"schema":{},"example":{"status":"success","company_id":"org_2a1b3c4d5e6f7g8h","clerk_org_id":"org_2a1b3c4d5e6f7g8h"}}}},"400":{"description":"Company already exists or invalid input","content":{"application/json":{"examples":{"duplicate":{"value":{"detail":"Company with this name already exists"}},"clerk_error":{"value":{"status":"error","message":"Failed to create Clerk organization","details":"Clerk API error: ..."}}}}}},"401":{"description":"Missing authentication or tenant context","content":{"application/json":{"example":{"detail":"Tenant context not found in request"}}}},"403":{"description":"Cross-tenant company creation attempt","content":{"application/json":{"example":{"detail":"Cannot create company for different tenant"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/get-user-company/{username}":{"get":{"tags":["Companies"],"summary":"Get User Company","operationId":"get_user_company_company_get_user_company__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/{company_id}":{"get":{"tags":["Companies","Companies"],"summary":"Get company details","description":"Retrieves complete details for a specific company.\n    \n    **Returns**:\n    - Company ID (same as Clerk org ID)\n    - Company name\n    - Phone number\n    - Address (if set)\n    - CallRail API key (if configured)\n    - CallRail account ID (if configured)\n    - Creation and update timestamps\n    \n    **Tenant Scoping**: Automatically filtered to user's company via middleware\n    \n    **Use Case**: Display company profile, settings page","operationId":"get_company_company__company_id__get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","description":"The unique company ID (Clerk org ID)","title":"Company Id"},"description":"The unique company ID (Clerk org ID)"}],"responses":{"200":{"description":"Company found and returned","content":{"application/json":{"schema":{},"example":{"id":"org_2a1b3c4d5e6f7g8h","name":"RoofCo LLC","phone_number":"+1-555-123-4567","address":"123 Main St, Phoenix, AZ 85001","callrail_api_key":"abc123...xyz","callrail_account_id":"ACC123456","created_at":"2025-01-15T10:30:00Z","updated_at":"2025-10-10T14:22:00Z"}}}},"404":{"description":"Company not found","content":{"application/json":{"example":{"detail":"Company not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Companies","Companies"],"summary":"Update company details","description":"Updates company information (name, phone, address).\n    \n    **Required Role**: leadership (exec only)\n    \n    **Security**: \n    - Validates user owns this company (tenant ownership check)\n    - Cannot modify other companies' data\n    \n    **Updatable Fields** (all optional):\n    - name: Company name\n    - phone_number: Primary phone\n    - address: Physical address\n    \n    **Note**: CallRail API key and account ID use separate endpoints for security\n    \n    **Use Case**: Company settings page, profile updates","operationId":"update_company_company__company_id__put","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","description":"The unique company ID to update","title":"Company Id"},"description":"The unique company ID to update"},{"name":"name","in":"query","required":false,"schema":{"type":"string","description":"Updated company name","title":"Name"},"description":"Updated company name"},{"name":"phone_number","in":"query","required":false,"schema":{"type":"string","description":"Updated phone number","title":"Phone Number"},"description":"Updated phone number"},{"name":"address","in":"query","required":false,"schema":{"type":"string","description":"Updated address","title":"Address"},"description":"Updated address"}],"responses":{"200":{"description":"Company updated successfully","content":{"application/json":{"schema":{},"example":{"status":"success","company_id":"org_2a1b3c4d5e6f7g8h"}}}},"403":{"description":"Access denied - user doesn't own this company","content":{"application/json":{"example":{"detail":"Access denied. You can only modify your own company."}}}},"404":{"description":"Company not found","content":{"application/json":{"example":{"detail":"Company not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["database cleanup"],"summary":"Delete Company","description":"Delete a specific company from the database","operationId":"delete_company_company__company_id__delete","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/{company_id}/sales-managers":{"get":{"tags":["Companies"],"summary":"List Company Sales Managers","operationId":"list_company_sales_managers_company__company_id__sales_managers_get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/list-organizations":{"get":{"tags":["Companies"],"summary":"List Organizations","description":"List all organizations in Clerk","operationId":"list_organizations_company_list_organizations_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/organizations/{org_id}/memberships":{"post":{"tags":["Companies"],"summary":"Add User To Organization","description":"Add a user to a Clerk organization\n\nArgs:\n    org_id: The ID of the organization to add the user to (this is the Clerk org ID)\n    request: The request containing user_id and role in the body\n    \nReturns:\n    dict: Response containing success status and details","operationId":"add_user_to_organization_company_organizations__org_id__memberships_post","parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/set-callrail-api-key/{company_id}":{"post":{"tags":["Companies","Companies","Integrations"],"summary":"Configure CallRail API key","description":"Sets the CallRail API key for call tracking integration.\n    \n    **Purpose**: Enables Otto to fetch call data from CallRail API\n    \n    **Required Role**: leadership (exec only)\n    \n    **Security**: \n    - API key stored securely in database\n    - Tenant ownership validated\n    - Cannot set key for other companies\n    \n    **How to Get CallRail API Key**:\n    1. Log into CallRail dashboard\n    2. Go to Settings → Integrations → API\n    3. Generate new API token\n    4. Copy and paste here\n    \n    **Use Case**: Initial setup, API key rotation","operationId":"set_callrail_api_key_company_set_callrail_api_key__company_id__post","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","description":"The unique company ID","title":"Company Id"},"description":"The unique company ID"},{"name":"api_key","in":"query","required":true,"schema":{"type":"string","description":"CallRail API token from CallRail dashboard","title":"Api Key"},"description":"CallRail API token from CallRail dashboard"}],"responses":{"200":{"description":"API key updated successfully","content":{"application/json":{"schema":{},"example":{"success":true,"message":"CallRail API key updated successfully"}}}},"403":{"description":"Access denied - user doesn't own this company","content":{"application/json":{"example":{"detail":"Access denied"}}}},"404":{"description":"Company not found","content":{"application/json":{"example":{"detail":"Company not found"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/set-callrail-account-id/{company_id}":{"post":{"tags":["Companies"],"summary":"Set Callrail Account Id","description":"Manually set the CallRail account ID for a company.","operationId":"set_callrail_account_id_company_set_callrail_account_id__company_id__post","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"account_id","in":"query","required":true,"schema":{"type":"string","title":"Account Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/company/by-phone/{phone_number}":{"get":{"tags":["Companies"],"summary":"Get Company By Phone","description":"Lookup a company by phone number and return its name.\n\nArgs:\n    phone_number: The phone number to search for\n    \nReturns:\n    Company name if found, 404 error if not found","operationId":"get_company_by_phone_company_by_phone__phone_number__get","parameters":[{"name":"phone_number","in":"path","required":true,"schema":{"type":"string","title":"Phone Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/":{"post":{"tags":["user"],"summary":"Create User","description":"Create a new user (either manager or rep)","operationId":"create_user_user__post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/{user_id}":{"get":{"tags":["user"],"summary":"Get User","description":"Get user details","operationId":"get_user_user__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["user"],"summary":"Update User","description":"Update user details","operationId":"update_user_user__user_id__put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["database cleanup"],"summary":"Delete User","description":"Delete a specific user from the database","operationId":"delete_user_user__user_id__delete","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/by-username/{username}":{"get":{"tags":["user"],"summary":"Get User By Username","description":"Get user by username","operationId":"get_user_by_username_user_by_username__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/clerk-webhook":{"post":{"tags":["user"],"summary":"Handle Clerk Webhook","description":"Handle webhooks from Clerk","operationId":"handle_clerk_webhook_user_clerk_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/{user_id}/sync-to-clerk":{"post":{"tags":["user"],"summary":"Sync User To Clerk","description":"Force sync a user from database to Clerk","operationId":"sync_user_to_clerk_user__user_id__sync_to_clerk_post","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/metadata/{user_id}":{"patch":{"tags":["user"],"summary":"Update User Metadata","description":"Update a user's metadata in Clerk\n\nArgs:\n    user_id: The Clerk user ID\n    request: The request object containing the metadata to update\n    \nReturns:\n    The updated user data","operationId":"update_user_metadata_user_metadata__user_id__patch","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/company":{"get":{"tags":["user"],"summary":"Get User Company","description":"Get the company for the current authenticated user","operationId":"get_user_company_user_company_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/add-company":{"post":{"summary":"Add Company","operationId":"add_company_api_v1_add_company_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/companies":{"get":{"summary":"List Companies","operationId":"list_companies_api_v1_companies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/dashboard/metrics":{"get":{"summary":"Get Dashboard Metrics","operationId":"get_dashboard_metrics_api_v1_dashboard_metrics_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dashboard/booking-rate":{"get":{"summary":"Get Booking Rate","description":"Get time-series booking rate data for dashboard chart.\n\nReturns booking rate (percentage) per day for the specified date range.\nBooking rate = (booked appointments / qualified calls) * 100\n\nDefault: last 30 days, grouped by day.\nMulti-tenant: scoped by company_id from JWT tenant context.","operationId":"get_booking_rate_api_v1_dashboard_booking_rate_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago","title":"Start Date"},"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End date (ISO format YYYY-MM-DD), defaults to today","title":"End Date"},"description":"End date (ISO format YYYY-MM-DD), defaults to today"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_List_BookingRateDataPoint__"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dashboard/top-objections":{"get":{"summary":"Get Top Objections","description":"Get top objections with percentages for dashboard.\n\nReturns objections aggregated from CallAnalysis.objections JSON field.\nPercentage represents share of calls with that objection among all calls that had objections.\n\nDefault: last 30 days, top 5 objections.\nMulti-tenant: scoped by company_id from JWT tenant context.","operationId":"get_top_objections_api_v1_dashboard_top_objections_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago","title":"Start Date"},"description":"Start date (ISO format YYYY-MM-DD), defaults to 30 days ago"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End date (ISO format YYYY-MM-DD), defaults to today","title":"End Date"},"description":"End date (ISO format YYYY-MM-DD), defaults to today"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"description":"Maximum number of objections to return","default":5,"title":"Limit"},"description":"Maximum number of objections to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_List_TopObjectionItem__"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dashboard/calls":{"get":{"summary":"Get Calls","operationId":"get_calls_api_v1_dashboard_calls_get","parameters":[{"name":"status","in":"query","required":true,"schema":{"type":"string","title":"Status"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of calls to return","default":100,"title":"Limit"},"description":"Maximum number of calls to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of calls to skip","default":0,"title":"Offset"},"description":"Number of calls to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sales-managers":{"get":{"summary":"Get Sales Managers","operationId":"get_sales_managers_api_v1_sales_managers_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"integer","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sales-reps":{"get":{"summary":"Get Sales Reps","operationId":"get_sales_reps_api_v1_sales_reps_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/diagnostics":{"get":{"summary":"Get Diagnostics","operationId":"get_diagnostics_api_v1_diagnostics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/sales-rep":{"get":{"tags":["sales-rep"],"summary":"Get Company Reps","description":"Get all sales representatives for the company that the authenticated user belongs to.\nRequires user to be authenticated.","operationId":"get_company_reps_sales_rep_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepsListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-rep/{rep_id}/appointments":{"get":{"tags":["sales-rep"],"summary":"Get Rep Appointments","description":"Get all appointments for a specific sales rep.\nRequires the authenticated user to be in the same company as the rep.\nCan filter to show past, upcoming, or all appointments.","operationId":"get_rep_appointments_sales_rep__rep_id__appointments_get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}},{"name":"show_past","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Show Past"}},{"name":"show_all","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Show All"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepAppointmentsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-rep/":{"post":{"tags":["sales-rep"],"summary":"Create Sales Rep","operationId":"create_sales_rep_sales_rep__post","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}},{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","title":"Phone Number"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"manager_id","in":"query","required":true,"schema":{"type":"string","title":"Manager Id"}},{"name":"password","in":"query","required":false,"schema":{"type":"string","title":"Password"}},{"name":"username","in":"query","required":false,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-rep/{rep_id}":{"get":{"tags":["sales-rep"],"summary":"Get Sales Rep","operationId":"get_sales_rep_sales_rep__rep_id__get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["sales-rep"],"summary":"Update Sales Rep","operationId":"update_sales_rep_sales_rep__rep_id__put","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"integer","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["database cleanup"],"summary":"Delete Sales Rep","description":"Delete a specific sales rep from the database","operationId":"delete_sales_rep_sales_rep__rep_id__delete","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"integer","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-rep/assign-sales-rep":{"post":{"tags":["sales-rep"],"summary":"Assign Sales Rep","operationId":"assign_sales_rep_sales_rep_assign_sales_rep_post","parameters":[{"name":"call_id","in":"query","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"new_sales_rep_id","in":"query","required":true,"schema":{"type":"string","title":"New Sales Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-manager/":{"post":{"tags":["sales-manager"],"summary":"Create Sales Manager","operationId":"create_sales_manager_sales_manager__post","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}},{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","title":"Phone Number"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"password","in":"query","required":false,"schema":{"type":"string","title":"Password"}},{"name":"username","in":"query","required":false,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-manager/{manager_id}":{"get":{"tags":["sales-manager"],"summary":"Get Sales Manager","operationId":"get_sales_manager_sales_manager__manager_id__get","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["sales-manager"],"summary":"Update Sales Manager","operationId":"update_sales_manager_sales_manager__manager_id__put","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["database cleanup"],"summary":"Delete Sales Manager","description":"Delete a specific sales manager from the database","operationId":"delete_sales_manager_sales_manager__manager_id__delete","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales-manager/{manager_id}/sales-reps":{"get":{"tags":["sales-manager"],"summary":"List Manager Sales Reps","operationId":"list_manager_sales_reps_sales_manager__manager_id__sales_reps_get","parameters":[{"name":"manager_id","in":"path","required":true,"schema":{"type":"integer","title":"Manager Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/call/{call_id}":{"get":{"summary":"Get Call Details","operationId":"get_call_details_call__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["database cleanup"],"summary":"Delete Call","description":"Delete a specific call from the database","operationId":"delete_call_call__call_id__delete","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/unassigned-calls":{"get":{"summary":"Get Unassigned Calls","operationId":"get_unassigned_calls_unassigned_calls_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/add-call":{"post":{"summary":"Add Call","operationId":"add_call_add_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/update-call-status":{"post":{"summary":"Update Call Status","description":"Update a call's status (bought/not bought) and automatically handle geofence removal","operationId":"update_call_status_update_call_status_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/make-homeowner-followup-call":{"post":{"summary":"Make Homeowner Followup Call","operationId":"make_homeowner_followup_call_make_homeowner_followup_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bland-callback":{"post":{"summary":"Bland Callback","operationId":"bland_callback_bland_callback_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/pre-call":{"post":{"summary":"Pre Call Webhook","operationId":"pre_call_webhook_pre_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/call-complete":{"post":{"summary":"Call Complete Webhook","description":"Handle CallRail Post-Call webhook - can be JSON body or query params","operationId":"call_complete_webhook_call_complete_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/call-modified":{"post":{"summary":"Call Modified Webhook","operationId":"call_modified_webhook_call_modified_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/scheduled/process-unassigned-calls":{"post":{"tags":["scheduled"],"summary":"Process Unassigned Calls","operationId":"process_unassigned_calls_scheduled_process_unassigned_calls_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/purge-database":{"post":{"tags":["database cleanup"],"summary":"Purge Database","description":"Delete all data from the database\n\nThis is a dangerous operation that will delete ALL data from the database.\nIt requires a secret code for protection.","operationId":"purge_database_purge_database_post","parameters":[{"name":"secret_code","in":"query","required":true,"schema":{"type":"string","title":"Secret Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/calls":{"delete":{"tags":["database cleanup"],"summary":"Delete All Calls","description":"Delete all calls from the database","operationId":"delete_all_calls_calls_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/scheduled-calls":{"delete":{"tags":["database cleanup"],"summary":"Delete All Scheduled Calls","description":"Delete all scheduled calls from the database","operationId":"delete_all_scheduled_calls_scheduled_calls_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/scheduled-call/{scheduled_call_id}":{"delete":{"tags":["database cleanup"],"summary":"Delete Scheduled Call","description":"Delete a specific scheduled call from the database","operationId":"delete_scheduled_call_scheduled_call__scheduled_call_id__delete","parameters":[{"name":"scheduled_call_id","in":"path","required":true,"schema":{"type":"integer","title":"Scheduled Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users":{"delete":{"tags":["database cleanup"],"summary":"Delete All Users","description":"Delete all users from the database","operationId":"delete_all_users_users_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/companies":{"delete":{"tags":["database cleanup"],"summary":"Delete All Companies","description":"Delete all companies from the database","operationId":"delete_all_companies_companies_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/sales-reps":{"delete":{"tags":["database cleanup"],"summary":"Delete All Sales Reps","description":"Delete all sales reps from the database","operationId":"delete_all_sales_reps_sales_reps_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/sales-managers":{"delete":{"tags":["database cleanup"],"summary":"Delete All Sales Managers","description":"Delete all sales managers from the database","operationId":"delete_all_sales_managers_sales_managers_delete","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/purge-organizations":{"post":{"tags":["database cleanup"],"summary":"Purge All Organizations","description":"Delete all organizations from Clerk\n\nThis is a dangerous operation that will delete ALL organizations in your Clerk instance.\nIt requires a secret code for protection.","operationId":"purge_all_organizations_purge_organizations_post","parameters":[{"name":"secret_code","in":"query","required":true,"schema":{"type":"string","title":"Secret Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/purge-users":{"post":{"tags":["database cleanup"],"summary":"Purge All Users","description":"Delete all users from Clerk\n\nThis is a dangerous operation that will delete ALL users in your Clerk instance.\nIt requires a secret code for protection.","operationId":"purge_all_users_purge_users_post","parameters":[{"name":"secret_code","in":"query","required":true,"schema":{"type":"string","title":"Secret Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transcript-analysis/{analysis_id}":{"delete":{"tags":["database cleanup"],"summary":"Delete Transcript Analysis","description":"Delete a specific transcript analysis by its ID","operationId":"delete_transcript_analysis_transcript_analysis__analysis_id__delete","parameters":[{"name":"analysis_id","in":"path","required":true,"schema":{"type":"integer","title":"Analysis Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transcript-analyses/call/{call_id}":{"delete":{"tags":["database cleanup"],"summary":"Delete Call Transcript Analyses","description":"Delete all transcript analyses for a specific call","operationId":"delete_call_transcript_analyses_transcript_analyses_call__call_id__delete","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sms/conversations/{call_id}":{"get":{"tags":["sms"],"summary":"Get Sms Conversation","description":"Get SMS conversation history","operationId":"get_sms_conversation_api_v1_sms_conversations__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sms/send":{"post":{"tags":["sms"],"summary":"Send Sms To Customer","description":"Send SMS to customer","operationId":"send_sms_to_customer_api_v1_sms_send_post","parameters":[{"name":"call_id","in":"query","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"message","in":"query","required":true,"schema":{"type":"string","title":"Message"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sms/callrail-webhook":{"post":{"tags":["sms-webhooks"],"summary":"Handle Callrail Sms Webhook","description":"Handle inbound SMS messages from CallRail\nCallRail sends SMS webhooks when customers text tracking numbers","operationId":"handle_callrail_sms_webhook_sms_callrail_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/sms/twilio-webhook":{"post":{"tags":["sms-webhooks"],"summary":"Handle Twilio Sms Webhook","description":"Handle inbound SMS messages from Twilio\nEnhanced version of existing Twilio webhook","operationId":"handle_twilio_sms_webhook_sms_twilio_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/callrail/call.incoming":{"post":{"summary":"Handle Call Incoming","description":"Handle CallRail 'call.incoming' webhook\nCreates/updates lead, logs phone number, timestamp, and pickup timer","operationId":"handle_call_incoming_callrail_call_incoming_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/callrail/call.answered":{"post":{"summary":"Handle Call Answered","description":"Handle CallRail 'call.answered' webhook\nLogs CSR ID, duration, and updates call status","operationId":"handle_call_answered_callrail_call_answered_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/callrail/call.missed":{"post":{"summary":"Handle Call Missed","description":"Handle CallRail 'call.missed' webhook\nRoutes to Missed Call Queue and triggers AI recovery via Twilio SMS","operationId":"handle_call_missed_callrail_call_missed_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/callrail/call.completed":{"post":{"summary":"Handle Call Completed","description":"Handle CallRail 'call.completed' webhook\nProcesses recording, sends to UWC ASR, and generates insights\nNote: CallRail doesn't have a separate 'call.missed' webhook, so we detect\nmissed calls from the 'answered' field in this webhook.","operationId":"handle_call_completed_callrail_call_completed_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/callrail/status/{call_id}":{"get":{"summary":"Get Call Status","description":"Get call status and processing information","operationId":"get_call_status_callrail_status__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/missed-calls/queue/{call_id}":{"post":{"tags":["missed-calls","queue"],"summary":"Add Missed Call To Queue","description":"Add a missed call to the recovery queue\n\nThis endpoint is called when a call is missed and needs to be processed\nthrough the AI-led recovery system.","operationId":"add_missed_call_to_queue_api_v1_missed_calls_queue__call_id__post","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/missed-calls/queue/status":{"get":{"tags":["missed-calls","queue"],"summary":"Get Queue Status","description":"Get current queue status for the company","operationId":"get_queue_status_api_v1_missed_calls_queue_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/missed-calls/queue/metrics":{"get":{"tags":["missed-calls","queue"],"summary":"Get Queue Metrics","description":"Get queue performance metrics","operationId":"get_queue_metrics_api_v1_missed_calls_queue_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/missed-calls/queue/entries":{"get":{"tags":["missed-calls","queue"],"summary":"Get Queue Entries","description":"Get paginated list of queue entries","operationId":"get_queue_entries_api_v1_missed_calls_queue_entries_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Page Size"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/missed-calls/queue/entries/{queue_id}":{"get":{"tags":["missed-calls","queue"],"summary":"Get Queue Entry","description":"Get detailed information about a specific queue entry","operationId":"get_queue_entry_api_v1_missed_calls_queue_entries__queue_id__get","parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"integer","title":"Queue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/missed-calls/queue/entries/{queue_id}/process":{"post":{"tags":["missed-calls","queue"],"summary":"Process Queue Entry","description":"Manually trigger processing of a specific queue entry","operationId":"process_queue_entry_api_v1_missed_calls_queue_entries__queue_id__process_post","parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"integer","title":"Queue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/missed-calls/queue/entries/{queue_id}/escalate":{"post":{"tags":["missed-calls","queue"],"summary":"Escalate Queue Entry","description":"Manually escalate a queue entry to human CSR","operationId":"escalate_queue_entry_api_v1_missed_calls_queue_entries__queue_id__escalate_post","parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"integer","title":"Queue Id"}},{"name":"reason","in":"query","required":false,"schema":{"type":"string","default":"manual_escalation","title":"Reason"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/missed-calls/processor/status":{"get":{"tags":["missed-calls","queue"],"summary":"Get Processor Status","description":"Get background processor status and statistics","operationId":"get_processor_status_api_v1_missed_calls_processor_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/missed-calls/processor/start":{"post":{"tags":["missed-calls","queue"],"summary":"Start Processor","description":"Start the background queue processor","operationId":"start_processor_api_v1_missed_calls_processor_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/missed-calls/processor/stop":{"post":{"tags":["missed-calls","queue"],"summary":"Stop Processor","description":"Stop the background queue processor","operationId":"stop_processor_api_v1_missed_calls_processor_stop_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/live-metrics/current":{"get":{"tags":["live-metrics","real-time"],"summary":"Get Current Metrics","description":"Get current live metrics for the authenticated user's tenant.\n\nReturns real-time KPIs including:\n- Revenue metrics (today, this week, this month)\n- Call metrics (active calls, success rate, duration)\n- Lead metrics (active leads, conversion rate)\n- CSR performance metrics","operationId":"get_current_metrics_api_v1_live_metrics_current_get","parameters":[{"name":"request","in":"query","required":true,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/live-metrics/revenue":{"get":{"tags":["live-metrics","real-time"],"summary":"Get Revenue Metrics","description":"Get detailed revenue metrics for the specified period.\n\nArgs:\n    period: Time period to analyze (today, week, month)","operationId":"get_revenue_metrics_api_v1_live_metrics_revenue_get","parameters":[{"name":"request","in":"query","required":true,"schema":{"title":"Request"}},{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period: today, week, month","default":"today","title":"Period"},"description":"Time period: today, week, month"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/live-metrics/calls":{"get":{"tags":["live-metrics","real-time"],"summary":"Get Call Metrics","description":"Get live call metrics including active calls and performance.","operationId":"get_call_metrics_api_v1_live_metrics_calls_get","parameters":[{"name":"request","in":"query","required":true,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/live-metrics/leads":{"get":{"tags":["live-metrics","real-time"],"summary":"Get Lead Metrics","description":"Get live lead metrics including conversion rates.","operationId":"get_lead_metrics_api_v1_live_metrics_leads_get","parameters":[{"name":"request","in":"query","required":true,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/live-metrics/csr-performance":{"get":{"tags":["live-metrics","real-time"],"summary":"Get Csr Performance Metrics","description":"Get CSR performance metrics including top performers.","operationId":"get_csr_performance_metrics_api_v1_live_metrics_csr_performance_get","parameters":[{"name":"request","in":"query","required":true,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/live-metrics/status":{"get":{"tags":["live-metrics","real-time"],"summary":"Get Metrics Service Status","description":"Get the status of the live metrics service.","operationId":"get_metrics_service_status_api_v1_live_metrics_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/post-call-analysis/call/{call_id}":{"get":{"tags":["post-call-analysis","coaching"],"summary":"Get Call Analysis","description":"Get post-call analysis for a specific call.\n\nReturns:\n- Call metrics (duration, success, etc.)\n- AI insights and recommendations\n- Performance score\n- Coaching recommendations","operationId":"get_call_analysis_api_v1_post_call_analysis_call__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"request","in":"query","required":true,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/post-call-analysis/sales-rep/{sales_rep_id}/performance":{"get":{"tags":["post-call-analysis","coaching"],"summary":"Get Sales Rep Performance","description":"Get performance analysis for a specific sales rep.\n\nArgs:\n    sales_rep_id: ID of the sales rep\n    days: Number of days to analyze (1-365)\n\nReturns:\n- Performance metrics over time\n- Coaching recommendations summary\n- Score trends\n- Areas for improvement","operationId":"get_sales_rep_performance_api_v1_post_call_analysis_sales_rep__sales_rep_id__performance_get","parameters":[{"name":"sales_rep_id","in":"path","required":true,"schema":{"type":"string","title":"Sales Rep Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to analyze","default":30,"title":"Days"},"description":"Number of days to analyze"},{"name":"request","in":"query","required":false,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/post-call-analysis/coaching-recommendations":{"get":{"tags":["post-call-analysis","coaching"],"summary":"Get Coaching Recommendations","description":"Get coaching recommendations based on recent call analysis.\n\nArgs:\n    sales_rep_id: Optional filter by specific sales rep\n    category: Optional filter by recommendation category\n    priority: Optional filter by priority level\n    days: Number of days to look back (1-30)\n\nReturns:\n- List of coaching recommendations\n- Categorized by type and priority\n- Actionable insights for improvement","operationId":"get_coaching_recommendations_api_v1_post_call_analysis_coaching_recommendations_get","parameters":[{"name":"sales_rep_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by sales rep ID","title":"Sales Rep Id"},"description":"Filter by sales rep ID"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by recommendation category","title":"Category"},"description":"Filter by recommendation category"},{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by priority (high, medium, low)","title":"Priority"},"description":"Filter by priority (high, medium, low)"},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":30,"minimum":1,"description":"Number of days to look back","default":7,"title":"Days"},"description":"Number of days to look back"},{"name":"request","in":"query","required":false,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/post-call-analysis/performance-summary":{"get":{"tags":["post-call-analysis","coaching"],"summary":"Get Performance Summary","description":"Get overall performance summary for the company.\n\nArgs:\n    days: Number of days to analyze (1-30)\n\nReturns:\n- Company-wide performance metrics\n- Top performers\n- Areas needing attention\n- Coaching opportunities","operationId":"get_performance_summary_api_v1_post_call_analysis_performance_summary_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":30,"minimum":1,"description":"Number of days to analyze","default":7,"title":"Days"},"description":"Number of days to analyze"},{"name":"request","in":"query","required":false,"schema":{"title":"Request"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/post-call-analysis/status":{"get":{"tags":["post-call-analysis","coaching"],"summary":"Get Analysis Service Status","description":"Get the status of the post-call analysis service.","operationId":"get_analysis_service_status_api_v1_post_call_analysis_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/api/v1/contact-cards/{contact_id}":{"get":{"tags":["contact-cards"],"summary":"Get Contact Card","description":"Retrieve a contact card and associated lead/appointment context for the tenant.","operationId":"get_contact_card_api_v1_contact_cards__contact_id__get","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_ContactCardDetail_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contact-cards/by-phone":{"get":{"tags":["contact-cards"],"summary":"Get Contact Card By Phone","description":"Retrieve a contact card by phone number for the tenant.","operationId":"get_contact_card_by_phone_api_v1_contact_cards_by_phone_get","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","title":"Phone Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_ContactCardDetail_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contact-cards/{contact_id}/refresh-property":{"post":{"tags":["contact-cards"],"summary":"Refresh Property Intelligence","description":"Manually trigger property intelligence scrape for a contact card.\n\nReturns 202 Accepted with job status.","operationId":"refresh_property_intelligence_api_v1_contact_cards__contact_id__refresh_property_post","parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}":{"get":{"tags":["leads"],"summary":"Get Lead","description":"Retrieve a lead with its contact card reference and upcoming appointments.","operationId":"get_lead_api_v1_leads__lead_id__get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_LeadResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["leads"],"summary":"Update Lead","operationId":"update_lead_api_v1_leads__lead_id__patch","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadUpdateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_LeadResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads":{"post":{"tags":["leads"],"summary":"Create Lead","operationId":"create_lead_api_v1_leads_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadCreateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_LeadResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["leads"],"summary":"List Leads","description":"List leads with optional filters.","operationId":"list_leads_api_v1_leads_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (comma-separated for multiple)","title":"Status"},"description":"Filter by status (comma-separated for multiple)"},{"name":"rep_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by assigned rep ID","title":"Rep Id"},"description":"Filter by assigned rep ID"},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by source","title":"Source"},"description":"Filter by source"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter leads created after this date","title":"Date From"},"description":"Filter leads created after this date"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter leads created before this date","title":"Date To"},"description":"Filter leads created before this date"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by name or phone number","title":"Search"},"description":"Search by name or phone number"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum number of results","default":50,"title":"Limit"},"description":"Maximum number of results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset for pagination","default":0,"title":"Offset"},"description":"Offset for pagination"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments/{appointment_id}":{"get":{"tags":["appointments"],"summary":"Get Appointment","description":"Retrieve an appointment with associated lead/contact context.","operationId":"get_appointment_api_v1_appointments__appointment_id__get","parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"string","title":"Appointment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AppointmentResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["appointments"],"summary":"Update Appointment","operationId":"update_appointment_api_v1_appointments__appointment_id__patch","parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"string","title":"Appointment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentUpdateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AppointmentResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/appointments":{"get":{"tags":["appointments"],"summary":"List Appointments","description":"List appointments for a rep (or all appointments for managers).\n\nFor reps: defaults to authenticated user's appointments for today.\nFor managers: can view all appointments, optionally filtered by rep_id.","operationId":"list_appointments_api_v1_appointments_get","parameters":[{"name":"rep_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Sales rep ID (defaults to authenticated user if rep)","title":"Rep Id"},"description":"Sales rep ID (defaults to authenticated user if rep)"},{"name":"date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Date filter (ISO format YYYY-MM-DD, defaults to today)","title":"Date"},"description":"Date filter (ISO format YYYY-MM-DD, defaults to today)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (scheduled, confirmed, completed, cancelled, no_show)","title":"Status"},"description":"Filter by status (scheduled, confirmed, completed, cancelled, no_show)"},{"name":"outcome","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by outcome (pending, won, lost, no_show, rescheduled)","title":"Outcome"},"description":"Filter by outcome (pending, won, lost, no_show, rescheduled)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AppointmentListResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["appointments"],"summary":"Create Appointment","operationId":"create_appointment_api_v1_appointments_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppointmentCreateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AppointmentResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lead-pool":{"get":{"tags":["lead-pool"],"summary":"List Pool Leads","description":"List all leads in the lead pool.\n\nReturns leads with pool_status = \"in_pool\" by default.\nManagers can see all leads (in_pool, assigned, closed).\nReps can see in_pool leads and their own assigned leads.","operationId":"list_pool_leads_api_v1_lead_pool_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_LeadPoolListResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lead-pool/{lead_id}/request":{"post":{"tags":["lead-pool"],"summary":"Request Lead","description":"Request a lead from the pool.\n\nReps can express interest in a lead by requesting it.\nCreates a RepAssignmentHistory entry with status=\"requested\".\nUpdates the denormalized requested_by_rep_ids list on Lead.","operationId":"request_lead_api_v1_lead_pool__lead_id__request_post","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RequestLeadResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lead-pool/{lead_id}/assign":{"post":{"tags":["lead-pool"],"summary":"Assign Lead","description":"Assign a lead from the pool to a rep.\n\nOnly managers/execs can assign leads.\nUpdates Lead.pool_status to \"assigned\".\nUpdates Appointment.assigned_rep_id if appointment exists.\nCreates/updates RepAssignmentHistory with status=\"assigned\".","operationId":"assign_lead_api_v1_lead_pool__lead_id__assign_post","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignLeadRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_AssignLeadResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reps/{rep_id}/shifts/clock-in":{"post":{"tags":["rep-shifts"],"summary":"Clock In","description":"Clock in for a shift.\n\nCreates or updates today's shift with status='active'.\nValidates rep configuration and permissions.","operationId":"clock_in_api_v1_reps__rep_id__shifts_clock_in_post","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepShiftCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RepShiftResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reps/{rep_id}/shifts/clock-out":{"post":{"tags":["rep-shifts"],"summary":"Clock Out","description":"Clock out from current shift.\n\nMarks shift as completed and sets clock_out_at.","operationId":"clock_out_api_v1_reps__rep_id__shifts_clock_out_post","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RepShiftBase_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reps/{rep_id}/shifts/today":{"get":{"tags":["rep-shifts"],"summary":"Get Today Shift","description":"Get today's shift status for a rep.\n\nReturns current shift status, mode, and time window.","operationId":"get_today_shift_api_v1_reps__rep_id__shifts_today_get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RepShiftResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recording-sessions/start":{"post":{"tags":["recording-sessions"],"summary":"Start Recording Session","description":"Start a geofenced recording session.\n\nValidates:\n- Rep has active shift\n- Appointment is assigned to rep\n- Recording is allowed\n- Location is within geofence\n\nReturns recording session ID and configuration.","operationId":"start_recording_session_api_v1_recording_sessions_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingSessionStartRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RecordingSessionStartResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recording-sessions/{session_id}/stop":{"post":{"tags":["recording-sessions"],"summary":"Stop Recording Session","description":"Stop a recording session.\n\nSets ended_at, triggers Shunya transcription (if applicable),\nand enforces Ghost Mode retention policies.","operationId":"stop_recording_session_api_v1_recording_sessions__session_id__stop_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordingSessionStopRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RecordingSessionResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recording-sessions/{session_id}/upload-audio":{"post":{"tags":["recording-sessions"],"summary":"Upload Audio Complete","description":"Mark audio upload as complete and update recording session metadata.\n\nCalled by mobile app after successfully uploading audio to S3.\nUpdates audio_url, audio_duration_seconds, and audio_size_bytes.","operationId":"upload_audio_complete_api_v1_recording_sessions__session_id__upload_audio_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioUploadComplete"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recording-sessions/{session_id}/metadata":{"post":{"tags":["recording-sessions"],"summary":"Update Audio Metadata","description":"Update recording session audio metadata (duration, size).\n\nAlternative endpoint if metadata is known before upload completes.","operationId":"update_audio_metadata_api_v1_recording_sessions__session_id__metadata_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudioMetadata"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RecordingSessionResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recording-sessions/{session_id}":{"get":{"tags":["recording-sessions"],"summary":"Get Recording Session","description":"Get a recording session by ID.\n\nIn Ghost Mode, audio_url will be None and transcript may be restricted\nbased on tenant retention policy.","operationId":"get_recording_session_api_v1_recording_sessions__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_RecordingSessionResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/calls/{call_id}":{"get":{"tags":["AI Internal"],"summary":"Get Call Metadata","description":"Get call metadata for internal AI API.\n\nReturns call information including lead, contact, rep, and booking outcome.","operationId":"get_call_metadata_internal_ai_calls__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AICallResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/reps/{rep_id}":{"get":{"tags":["AI Internal"],"summary":"Get Rep Metadata","description":"Get sales rep metadata for internal AI API.\n\nReturns rep information including name, contact, role, and region.","operationId":"get_rep_metadata_internal_ai_reps__rep_id__get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIRepResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/companies/{company_id}":{"get":{"tags":["AI Internal"],"summary":"Get Company Metadata","description":"Get company metadata for internal AI API.\n\nValidates that path company_id matches authenticated company_id.","operationId":"get_company_metadata_internal_ai_companies__company_id__get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AICompanyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/leads/{lead_id}":{"get":{"tags":["AI Internal"],"summary":"Get Lead Metadata","description":"Get lead metadata for internal AI API (compound response).\n\nReturns lead, contact, and related appointments.","operationId":"get_lead_metadata_internal_ai_leads__lead_id__get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","title":"Lead Id"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AILeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/appointments/{appointment_id}":{"get":{"tags":["AI Internal"],"summary":"Get Appointment Metadata","description":"Get appointment metadata for internal AI API (compound response).\n\nReturns appointment, lead, and contact information.","operationId":"get_appointment_metadata_internal_ai_appointments__appointment_id__get","parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"string","title":"Appointment Id"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIAppointmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/services/{company_id}":{"get":{"tags":["AI Internal"],"summary":"Get Service Catalog","description":"Get service catalog for internal AI API.\n\nValidates that path company_id matches authenticated company_id.\nReturns empty list if services table doesn't exist or has no services.","operationId":"get_service_catalog_internal_ai_services__company_id__get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIServiceCatalogResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/internal/ai/search":{"post":{"tags":["AI Internal"],"summary":"Search Calls","description":"Search and analyze calls with structured filters.\n\nReturns a list of matching calls and aggregate analytics.\nUsed by Ask Otto backend for natural language queries.","operationId":"search_calls_internal_ai_search_post","parameters":[{"name":"Authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}},{"name":"X-Company-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Company-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AISearchRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AISearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tasks":{"get":{"tags":["tasks"],"summary":"List Tasks","description":"List tasks with optional filters.","operationId":"list_tasks_api_v1_tasks_get","parameters":[{"name":"assignee_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by assignee (user ID)","title":"Assignee Id"},"description":"Filter by assignee (user ID)"},{"name":"lead_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by lead ID","title":"Lead Id"},"description":"Filter by lead ID"},{"name":"contact_card_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by contact card ID","title":"Contact Card Id"},"description":"Filter by contact card ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (open, completed, overdue, cancelled)","title":"Status"},"description":"Filter by status (open, completed, overdue, cancelled)"},{"name":"overdue","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by overdue status","title":"Overdue"},"description":"Filter by overdue status"},{"name":"due_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter tasks due before this date","title":"Due Before"},"description":"Filter tasks due before this date"},{"name":"due_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter tasks due after this date","title":"Due After"},"description":"Filter tasks due after this date"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of tasks to return","default":100,"title":"Limit"},"description":"Maximum number of tasks to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of tasks to skip","default":0,"title":"Offset"},"description":"Number of tasks to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_TaskListResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["tasks"],"summary":"Create Task","description":"Create a new task.","operationId":"create_task_api_v1_tasks_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCreateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_TaskSummary_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tasks/{task_id}":{"patch":{"tags":["tasks"],"summary":"Update Task","description":"Update a task.","operationId":"update_task_api_v1_tasks__task_id__patch","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskUpdateBody"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_TaskSummary_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["tasks"],"summary":"Delete Task","description":"Soft delete a task (mark as cancelled).","operationId":"delete_task_api_v1_tasks__task_id__delete","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_dict_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tasks/{task_id}/complete":{"post":{"tags":["tasks"],"summary":"Complete Task","description":"Mark a task as completed.","operationId":"complete_task_api_v1_tasks__task_id__complete_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_TaskSummary_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/key-signals":{"get":{"tags":["key-signals"],"summary":"List Key Signals","description":"List key signals with optional filters.","operationId":"list_key_signals_api_v1_key_signals_get","parameters":[{"name":"lead_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by lead ID","title":"Lead Id"},"description":"Filter by lead ID"},{"name":"appointment_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by appointment ID","title":"Appointment Id"},"description":"Filter by appointment ID"},{"name":"contact_card_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by contact card ID","title":"Contact Card Id"},"description":"Filter by contact card ID"},{"name":"signal_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by signal type (risk, opportunity, coaching, operational)","title":"Signal Type"},"description":"Filter by signal type (risk, opportunity, coaching, operational)"},{"name":"acknowledged","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by acknowledged status","title":"Acknowledged"},"description":"Filter by acknowledged status"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter signals created after this date","title":"Created After"},"description":"Filter signals created after this date"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter signals created before this date","title":"Created Before"},"description":"Filter signals created before this date"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_KeySignalListResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/key-signals/{signal_id}/acknowledge":{"post":{"tags":["key-signals"],"summary":"Acknowledge Signal","description":"Acknowledge a key signal.","operationId":"acknowledge_signal_api_v1_key_signals__signal_id__acknowledge_post","parameters":[{"name":"signal_id","in":"path","required":true,"schema":{"type":"string","title":"Signal Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_KeySignalSummary_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/message-threads/{contact_card_id}":{"get":{"tags":["message-threads"],"summary":"Get Message Thread","description":"Get message thread (SMS/nurture) for a contact card.","operationId":"get_message_thread_api_v1_message_threads__contact_card_id__get","parameters":[{"name":"contact_card_id","in":"path","required":true,"schema":{"type":"string","title":"Contact Card Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of messages to return","default":100,"title":"Limit"},"description":"Maximum number of messages to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of messages to skip","default":0,"title":"Offset"},"description":"Number of messages to skip"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_MessageThreadResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reps/{rep_id}/ghost-mode":{"get":{"tags":["rep-settings"],"summary":"Get Ghost Mode Status","description":"Get ghost mode status for a rep.\n\nReps can only view their own status unless caller is manager/admin.","operationId":"get_ghost_mode_status_api_v1_reps__rep_id__ghost_mode_get","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_GhostModeStatus_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reps/{rep_id}/ghost-mode/toggle":{"post":{"tags":["rep-settings"],"summary":"Toggle Ghost Mode","description":"Toggle ghost mode for a rep.\n\nReps can only toggle their own mode unless caller is manager/admin.","operationId":"toggle_ghost_mode_api_v1_reps__rep_id__ghost_mode_toggle_post","parameters":[{"name":"rep_id","in":"path","required":true,"schema":{"type":"string","title":"Rep Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GhostModeToggleRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_GhostModeStatus_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/wins-feed":{"get":{"tags":["wins-feed"],"summary":"Get Wins Feed","description":"Get wins feed (closed-won appointments with deal sizes).","operationId":"get_wins_feed_api_v1_wins_feed_get","parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter wins from this date (defaults to 30 days ago)","title":"Date From"},"description":"Filter wins from this date (defaults to 30 days ago)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter wins until this date (defaults to now)","title":"Date To"},"description":"Filter wins until this date (defaults to now)"},{"name":"rep_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by sales rep ID","title":"Rep Id"},"description":"Filter by sales rep ID"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum number of results","default":100,"title":"Limit"},"description":"Maximum number of results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_WinsFeedResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/request":{"post":{"tags":["reviews"],"summary":"Request Review","description":"Trigger a review follow-up request for a closed-won appointment.\n\nThis creates a review request record and emits an event for background processing.\nThe actual SMS/email sending is handled by a background worker.","operationId":"request_review_api_v1_reviews_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewRequestBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_ReviewRequestResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/company-basics":{"post":{"tags":["onboarding"],"summary":"Save company basics information","description":"Phase 1: Collect and save company basic information (name, phone, email, domain, industry, etc.)","operationId":"save_company_basics_api_v1_onboarding_company_basics_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyBasicsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CompanyBasicsResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/callrail/connect":{"post":{"tags":["onboarding"],"summary":"Connect CallRail account","description":"Phase 2: Connect CallRail account for call tracking","operationId":"connect_callrail_api_v1_onboarding_callrail_connect_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallRailConnectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CallTrackingConnectResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/twilio/connect":{"post":{"tags":["onboarding"],"summary":"Connect Twilio account","description":"Phase 2: Connect Twilio account for call tracking","operationId":"connect_twilio_api_v1_onboarding_twilio_connect_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwilioConnectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CallTrackingConnectResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/callrail/test":{"post":{"tags":["onboarding"],"summary":"Test CallRail connection","description":"Test CallRail API credentials before saving","operationId":"test_callrail_api_v1_onboarding_callrail_test_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallRailConnectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CallTrackingTestResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/twilio/test":{"post":{"tags":["onboarding"],"summary":"Test Twilio connection","description":"Test Twilio API credentials before saving","operationId":"test_twilio_api_v1_onboarding_twilio_test_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwilioConnectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_CallTrackingTestResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/documents/upload":{"post":{"tags":["onboarding"],"summary":"Upload document for ingestion","description":"Phase 3: Upload company documents (SOPs, training materials, etc.) for Shunya ingestion","operationId":"upload_document_api_v1_onboarding_documents_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_api_v1_onboarding_documents_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schemas__responses__APIResponse_DocumentUploadResponse___2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/documents/status/{document_id}":{"get":{"tags":["onboarding"],"summary":"Get document ingestion status","description":"Check the status of a document ingestion job","operationId":"get_document_status_api_v1_onboarding_documents_status__document_id__get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_DocumentStatusResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/goals":{"post":{"tags":["onboarding"],"summary":"Save goals and preferences","description":"Phase 4: Save company goals, KPIs, and notification preferences","operationId":"save_goals_preferences_api_v1_onboarding_goals_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoalsPreferencesRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_GoalsPreferencesResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/invite-user":{"post":{"tags":["onboarding"],"summary":"Invite team member","description":"Phase 5: Invite a team member (CSR, sales rep, or manager) via Clerk","operationId":"invite_user_api_v1_onboarding_invite_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InviteUserRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_InviteUserResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/invited-users":{"get":{"tags":["onboarding"],"summary":"List invited users","description":"Get list of all invited users and their status","operationId":"get_invited_users_api_v1_onboarding_invited_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_InvitedUsersListResponse_"}}}}}}},"/api/v1/onboarding/verify":{"post":{"tags":["onboarding"],"summary":"Verify and complete onboarding","description":"Phase 6: Verify all onboarding steps are complete and mark onboarding as done","operationId":"verify_onboarding_api_v1_onboarding_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_VerificationResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/onboarding/status":{"get":{"tags":["onboarding"],"summary":"Get onboarding status","description":"Get current onboarding status and progress","operationId":"get_onboarding_status_api_v1_onboarding_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_OnboardingStatusResponse_"}}}}}}},"/api/v1/admin/openai/stats":{"get":{"tags":["manager"],"summary":"Get Openai Stats","description":"Get OpenAI API key usage statistics and health status.\n\nShows:\n- Total keys and healthy keys\n- Request counts per key\n- Circuit breaker status\n- Rate limit status","operationId":"get_openai_stats_api_v1_admin_openai_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse_Dict_str__Any__"}}}}}}},"/mobile/appointments":{"get":{"tags":["mobile"],"summary":"Get Appointments","description":"Get all appointments (booked calls) for the authenticated sales rep (the ones the rep is assigned to).\n\nThis endpoint retrieves all appointments that are:\n1. Assigned to the currently authenticated sales rep\n2. Not cancelled\n3. Can be filtered to show either upcoming or past appointments based on show_past parameter\n\nArgs:\n    show_past (bool): If True, shows past appointments. If False, shows upcoming appointments.","operationId":"get_appointments_mobile_appointments_get","parameters":[{"name":"show_past","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Show Past"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/appointments/company":{"get":{"tags":["mobile"],"summary":"Get Company Appointments","description":"Get all appointments for the company - accessible only to sales managers.\n\nThis endpoint retrieves all appointments in the manager's company that:\n1. Are not cancelled\n2. Includes both past and upcoming appointments\n\nThis endpoint requires the user to have manager privileges.","operationId":"get_company_appointments_mobile_appointments_company_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/appointments/{appointment_id}":{"get":{"tags":["mobile"],"summary":"Get Appointment Details","description":"Get detailed information about a specific appointment.","operationId":"get_appointment_details_mobile_appointments__appointment_id__get","parameters":[{"name":"appointment_id","in":"path","required":true,"schema":{"type":"integer","title":"Appointment Id"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/twilio-send-text":{"post":{"tags":["mobile"],"summary":"Send Text Message","description":"Sends a text message via Twilio API and stores it in the text_messages field.","operationId":"send_text_message_mobile_twilio_send_text_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwilioTextRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/twilio-initiate-call":{"post":{"tags":["mobile"],"summary":"Initiate Call","description":"Initiates a call using Twilio connecting rep and customer through a Twilio number","operationId":"initiate_call_mobile_twilio_initiate_call_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwilioCallRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/twilio-call-connect":{"post":{"tags":["mobile"],"summary":"Connect Call","description":"Webhook for when the rep answers - connects to customer","operationId":"connect_call_mobile_twilio_call_connect_post","parameters":[{"name":"customer_number","in":"query","required":true,"schema":{"type":"string","title":"Customer Number"}},{"name":"call_id","in":"query","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/twilio-call-status":{"post":{"tags":["mobile"],"summary":"Call Status Callback","description":"Receives and records call status updates from Twilio","operationId":"call_status_callback_mobile_twilio_call_status_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mobile/twilio-recording-callback":{"post":{"tags":["mobile"],"summary":"Recording Callback","description":"Receives recording status and URL from Twilio and processes the transcript using Deepgram","operationId":"recording_callback_mobile_twilio_recording_callback_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mobile/twilio-webhook":{"post":{"tags":["mobile"],"summary":"Handle Incoming Message","description":"Handles incoming messages from Twilio webhook","operationId":"handle_incoming_message_mobile_twilio_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mobile/messages/{call_id}":{"get":{"tags":["mobile"],"summary":"Get Messages","description":"Retrieves message history for a specific call","operationId":"get_messages_mobile_messages__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/call-transcripts/{call_id}":{"get":{"tags":["mobile"],"summary":"Get Call Transcripts","description":"Retrieves mobile call transcripts for a specific call","operationId":"get_call_transcripts_mobile_call_transcripts__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/start-recording":{"post":{"tags":["mobile","audio"],"summary":"Start Recording","description":"Initialize a recording session","operationId":"start_recording_mobile_audio_start_recording_post","parameters":[{"name":"trigger_type","in":"query","required":true,"schema":{"type":"string","title":"Trigger Type"}},{"name":"call_id","in":"query","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"scheduled_time","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled Time"}},{"name":"battery_percentage","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Battery Percentage"}},{"name":"is_charging","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Charging"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Location Trigger"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/upload/{recording_id}":{"post":{"tags":["mobile","audio"],"summary":"Upload Audio","description":"Upload audio file and process it with UWC ASR","operationId":"upload_audio_mobile_audio_upload__recording_id__post","parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","title":"Recording Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_audio_mobile_audio_upload__recording_id__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/status/{recording_id}":{"get":{"tags":["mobile","audio"],"summary":"Get Status","description":"Get the status and transcript of a recording","operationId":"get_status_mobile_audio_status__recording_id__get","parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","title":"Recording Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/raw-data/{recording_id}":{"get":{"tags":["mobile","audio"],"summary":"Get Raw Transcript","description":"Get the raw UWC ASR transcript data for debugging purposes","operationId":"get_raw_transcript_mobile_audio_raw_data__recording_id__get","parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","title":"Recording Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/analyze-transcript/{call_id}":{"post":{"tags":["mobile","audio"],"summary":"Analyze Transcript","description":"Analyze the transcript for a call using LLM and store the structured data.\n\nArgs:\n    call_id: ID of the call to analyze\n    company_id: ID of the company that owns the call\n    background_tasks: FastAPI background tasks handler\n    process_name: Name of the analysis process to use (default: \"v0\")\n    run_in_background: Whether to run the analysis as a background task\n    \nReturns:\n    The analysis result or a status message if running in the background","operationId":"analyze_transcript_mobile_audio_analyze_transcript__call_id__post","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"process_name","in":"query","required":false,"schema":{"type":"string","default":"v0","title":"Process Name"}},{"name":"run_in_background","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Run In Background"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/analysis-processes":{"get":{"tags":["mobile","audio"],"summary":"Get Available Analysis Processes","description":"Get a list of available transcript analysis processes.\n\nReturns:\n    List of available process names","operationId":"get_available_analysis_processes_mobile_audio_analysis_processes_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mobile/audio/transcript-analysis/{call_id}":{"get":{"tags":["mobile","audio"],"summary":"Get Transcript Analysis","description":"Get the transcript analysis for a call.\n\nArgs:\n    call_id: ID of the call\n    company_id: ID of the company that owns the call\n    version: Optional specific version of the analysis to retrieve\n    \nReturns:\n    The analysis result","operationId":"get_transcript_analysis_mobile_audio_transcript_analysis__call_id__get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"version","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Version"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/transcript-analyses/{call_id}/versions":{"get":{"tags":["mobile","audio"],"summary":"Get Analysis Versions","description":"Get all available analysis versions for a call.\n\nArgs:\n    call_id: ID of the call\n    company_id: ID of the company that owns the call\n    \nReturns:\n    List of available analysis versions with metadata","operationId":"get_analysis_versions_mobile_audio_transcript_analyses__call_id__versions_get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/sync-call-fields-from-analysis/{call_id}":{"post":{"tags":["mobile","audio"],"summary":"Sync Call Fields From Analysis","description":"Synchronize call table fields with data from the transcript analysis.\nUpdates the following call fields:\n- bought\n- price_if_bought\n- reason_for_lost_sale\n- still_deciding\n- reason_for_deciding\n\nArgs:\n    call_id: ID of the call to update\n    company_id: ID of the company that owns the call\n    analysis_version: Optional specific version of the analysis to use (uses latest if not specified)\n    \nReturns:\n    Status of the update operation","operationId":"sync_call_fields_from_analysis_mobile_audio_sync_call_fields_from_analysis__call_id__post","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"analysis_version","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Analysis Version"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/audio/batch-sync-call-fields":{"post":{"tags":["mobile","audio"],"summary":"Batch Sync Call Fields","description":"Batch update call records with data from their transcript analyses.\nCan filter by specific call IDs, date range, or both.\n\nArgs:\n    company_id: ID of the company\n    call_ids: Optional list of specific call IDs to update\n    start_date: Optional start date for filtering calls\n    end_date: Optional end date for filtering calls\n    limit: Maximum number of calls to process (default: 100)\n    \nReturns:\n    Summary of the update operation","operationId":"batch_sync_call_fields_mobile_audio_batch_sync_call_fields_post","parameters":[{"name":"company_id","in":"query","required":true,"schema":{"type":"string","title":"Company Id"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"}},{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":100,"title":"Limit"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"array","items":{"type":"integer"}},{"type":"null"}],"title":"Call Ids"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/update-geofences":{"post":{"tags":["mobile","location"],"summary":"Update Geofences","description":"Update active geofences for a sales rep\nWhen a new call is assigned, convert the address to coordinates and add to active geofences\nMaintains max number of active geofences by removing oldest if necessary","operationId":"update_geofences_mobile_location_update_geofences_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/geofence-event":{"post":{"tags":["mobile","location"],"summary":"Log Geofence Event","description":"Log geofence entry/exit events\nTrack first two entries/exits, time spent in geofence, battery status, etc.","operationId":"log_geofence_event_mobile_location_geofence_event_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/recording-event":{"post":{"tags":["mobile","location"],"summary":"Record Audio Event","description":"Log recording start/stop events and update call record accordingly\nTracks time to start recording, battery status, recording duration","operationId":"record_audio_event_mobile_location_recording_event_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/remove-geofence":{"post":{"tags":["mobile","location"],"summary":"Remove Geofence","description":"Remove a geofence when a sale is closed (either sold or customer decided not to purchase)","operationId":"remove_geofence_mobile_location_remove_geofence_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/bulk-geocode-calls":{"post":{"tags":["mobile","location"],"summary":"Bulk Geocode Calls","description":"Admin endpoint to geocode all existing calls with addresses that don't have geofences yet.\nCan be filtered by company_id and limited to a specific number of calls.","operationId":"bulk_geocode_calls_mobile_location_bulk_geocode_calls_post","parameters":[{"name":"company_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/sync-rep-geofences":{"post":{"tags":["mobile","location"],"summary":"Sync Sales Rep Geofences","description":"Sync a sales rep's active_geofences list to match all their assigned calls.\n\nThis ensures a rep has all the geofences they should be monitoring and no extras.","operationId":"sync_sales_rep_geofences_mobile_location_sync_rep_geofences_post","requestBody":{"content":{"application/json":{"schema":{"type":"object","title":"Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/location/sync-all-reps-geofences":{"post":{"tags":["mobile","location"],"summary":"Sync All Reps Geofences","description":"Sync active_geofences for all sales reps based on their assigned calls.\n\nThis ensures all reps have the correct geofences they should be monitoring.","operationId":"sync_all_reps_geofences_mobile_location_sync_all_reps_geofences_post","parameters":[{"name":"company_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mobile/register-push-token":{"post":{"summary":"Register Push Token","description":"Endpoint for mobile app to register the user's Expo push token (works for both sales reps and managers)","operationId":"register_push_token_mobile_register_push_token_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mobile/sales-report/submit":{"post":{"summary":"Submit Sales Report","description":"Endpoint for sales reps to submit sales report data through the mobile app\nwhen recording fails or is incomplete.","operationId":"submit_sales_report_mobile_sales_report_submit_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mobile/check-missing-reports":{"post":{"summary":"Check Missing Reports","description":"Endpoint to check for appointments that should have reports by now\nbut don't have recording or sales outcome data.","operationId":"check_missing_reports_mobile_check_missing_reports_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AIAppointmentResponse":{"properties":{"appointment":{"type":"object","title":"Appointment"},"lead":{"type":"object","title":"Lead"},"contact":{"$ref":"#/components/schemas/AIContactSummary"}},"type":"object","required":["appointment","lead","contact"],"title":"AIAppointmentResponse","description":"Appointment metadata for internal AI API (compound response)."},"AIAppointmentSummary":{"properties":{"id":{"type":"string","title":"Id"},"scheduled_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled Start"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End"},"status":{"type":"string","title":"Status"},"outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome"}},"type":"object","required":["id","status"],"title":"AIAppointmentSummary","description":"Appointment summary for internal AI API."},"AICallResponse":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"company_id":{"type":"string","title":"Company Id"},"lead_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Id"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id"},"rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rep Id"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"is_missed":{"type":"boolean","title":"Is Missed","default":false},"direction":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Direction"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"booking_outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Outcome"},"appointment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appointment Id"}},"type":"object","required":["call_id","company_id"],"title":"AICallResponse","description":"Call metadata for internal AI API."},"AICompanyResponse":{"properties":{"company_id":{"type":"string","title":"Company Id"},"name":{"type":"string","title":"Name"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"service_areas":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Service Areas"},"services_offered":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Services Offered"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["company_id","name"],"title":"AICompanyResponse","description":"Company metadata for internal AI API."},"AIContactSummary":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"phones":{"items":{"type":"string"},"type":"array","title":"Phones","default":[]},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"}},"type":"object","title":"AIContactSummary","description":"Contact summary for internal AI API."},"AILeadResponse":{"properties":{"lead":{"type":"object","title":"Lead"},"contact":{"$ref":"#/components/schemas/AIContactSummary"},"appointments":{"items":{"$ref":"#/components/schemas/AIAppointmentSummary"},"type":"array","title":"Appointments","default":[]}},"type":"object","required":["lead","contact"],"title":"AILeadResponse","description":"Lead metadata for internal AI API (compound response)."},"AIRepResponse":{"properties":{"rep_id":{"type":"string","title":"Rep Id"},"company_id":{"type":"string","title":"Company Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"active":{"type":"boolean","title":"Active","default":true}},"type":"object","required":["rep_id","company_id"],"title":"AIRepResponse","description":"Sales rep metadata for internal AI API."},"AISearchAggregates":{"properties":{"total_calls":{"type":"integer","title":"Total Calls"},"calls_by_outcome":{"additionalProperties":{"type":"integer"},"type":"object","title":"Calls By Outcome"},"calls_by_rep":{"additionalProperties":{"type":"integer"},"type":"object","title":"Calls By Rep"},"calls_with_objections":{"type":"integer","title":"Calls With Objections","default":0},"objection_label_counts":{"additionalProperties":{"type":"integer"},"type":"object","title":"Objection Label Counts"},"avg_sentiment":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Sentiment"},"avg_sop_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Sop Score"}},"type":"object","required":["total_calls"],"title":"AISearchAggregates","description":"Aggregate analytics over filtered calls."},"AISearchCallItem":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rep Id"},"lead_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Id"},"appointment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appointment Id"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id"},"company_id":{"type":"string","title":"Company Id"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"outcome":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome"},"sentiment_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sentiment Score"},"main_objection_label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Main Objection Label"},"has_objections":{"type":"boolean","title":"Has Objections","default":false},"sop_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sop Score"}},"type":"object","required":["call_id","company_id"],"title":"AISearchCallItem","description":"Lightweight call metadata for search results."},"AISearchFilters":{"properties":{"rep_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Rep Ids","description":"Filter by sales rep IDs"},"lead_statuses":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Lead Statuses","description":"Filter by lead statuses (e.g., new, qualified_booked)"},"appointment_outcomes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Appointment Outcomes","description":"Filter by appointment outcomes (e.g., won, lost, pending)"},"call_directions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Call Directions","description":"Filter by call direction (inbound/outbound) - if available"},"has_objections":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Objections","description":"Filter calls with/without objections"},"objection_labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objection Labels","description":"Filter by specific objection labels (e.g., price, timeline)"},"sentiment_min":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Sentiment Min","description":"Minimum sentiment score (0.0-1.0)"},"sentiment_max":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Sentiment Max","description":"Maximum sentiment score (0.0-1.0)"},"date_from":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date From","description":"Filter calls from this date (defaults to 30 days ago)"},"date_to":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Date To","description":"Filter calls until this date (defaults to now)"},"min_sop_score":{"anyOf":[{"type":"number","maximum":10.0,"minimum":0.0},{"type":"null"}],"title":"Min Sop Score","description":"Minimum SOP compliance score (0-10)"},"max_sop_score":{"anyOf":[{"type":"number","maximum":10.0,"minimum":0.0},{"type":"null"}],"title":"Max Sop Score","description":"Maximum SOP compliance score (0-10)"}},"type":"object","title":"AISearchFilters","description":"Filters for call search."},"AISearchOptions":{"properties":{"include_calls":{"type":"boolean","title":"Include Calls","description":"Include call list in response","default":true},"include_aggregates":{"type":"boolean","title":"Include Aggregates","description":"Include aggregate analytics in response","default":true},"limit":{"type":"integer","maximum":200.0,"minimum":1.0,"title":"Limit","description":"Maximum number of calls to return","default":50},"offset":{"type":"integer","minimum":0.0,"title":"Offset","description":"Offset for pagination","default":0},"sort_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sort By","description":"Sort field (started_at, -started_at, sentiment_score, -sentiment_score)","default":"started_at"}},"type":"object","title":"AISearchOptions","description":"Options for search behavior."},"AISearchRequest":{"properties":{"filters":{"$ref":"#/components/schemas/AISearchFilters"},"options":{"$ref":"#/components/schemas/AISearchOptions"}},"type":"object","required":["filters"],"title":"AISearchRequest","description":"Request body for internal AI search endpoint."},"AISearchResponse":{"properties":{"calls":{"items":{"$ref":"#/components/schemas/AISearchCallItem"},"type":"array","title":"Calls"},"aggregates":{"anyOf":[{"$ref":"#/components/schemas/AISearchAggregates"},{"type":"null"}]}},"type":"object","title":"AISearchResponse","description":"Response for internal AI search endpoint."},"AIServiceCatalogResponse":{"properties":{"company_id":{"type":"string","title":"Company Id"},"services":{"items":{"type":"object"},"type":"array","title":"Services","default":[]}},"type":"object","required":["company_id"],"title":"AIServiceCatalogResponse","description":"Service catalog for internal AI API."},"APIMetadata":{"properties":{"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id","description":"Request trace ID for debugging"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Response timestamp"},"version":{"type":"string","title":"Version","description":"API version","default":"v1"}},"type":"object","title":"APIMetadata","description":"\n    Metadata included in API responses.\n    Useful for pagination, performance tracking, and debugging.\n    ","example":{"request_id":"req_abc123xyz","timestamp":"2025-10-09T12:00:00Z","version":"v1"}},"APIResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"title":"Data","description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse","description":"\n    Standard success response wrapper.\n    \n    Usage:\n        @router.get(\"/calls\")\n        async def get_calls() -> APIResponse[List[CallSchema]]:\n            calls = db.query(Call).all()\n            return APIResponse(\n                success=True,\n                data=calls,\n                meta=APIMetadata(request_id=request.state.trace_id)\n            )\n    ","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_AppointmentListResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/AppointmentListResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[AppointmentListResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_AppointmentResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/AppointmentResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[AppointmentResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_AssignLeadResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/AssignLeadResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[AssignLeadResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_CallAnalysisResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/CallAnalysisResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[CallAnalysisResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_CallTrackingConnectResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/CallTrackingConnectResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[CallTrackingConnectResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_CallTrackingTestResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/CallTrackingTestResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[CallTrackingTestResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_CloneStatusResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/CloneStatusResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[CloneStatusResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_CompanyBasicsResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/CompanyBasicsResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[CompanyBasicsResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_ContactCardDetail_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/ContactCardDetail"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[ContactCardDetail]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_DataDeletionResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/DataDeletionResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[DataDeletionResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_Dict_str__Any__":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"type":"object","title":"Data","description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[Dict[str, Any]]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_DocumentStatusResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/DocumentStatusResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[DocumentStatusResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_DraftResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/DraftResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[DraftResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_GhostModeStatus_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/GhostModeStatus"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[GhostModeStatus]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_GoalsPreferencesResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/GoalsPreferencesResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[GoalsPreferencesResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_InviteUserResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/InviteUserResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[InviteUserResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_InvitedUsersListResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/InvitedUsersListResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[InvitedUsersListResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_JobStatusResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/JobStatusResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[JobStatusResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_KeySignalListResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/KeySignalListResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[KeySignalListResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_KeySignalSummary_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/KeySignalSummary"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[KeySignalSummary]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_LeadPoolListResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/LeadPoolListResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[LeadPoolListResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_LeadResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/LeadResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[LeadResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_List_BookingRateDataPoint__":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"items":{"$ref":"#/components/schemas/BookingRateDataPoint"},"type":"array","title":"Data","description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[List[BookingRateDataPoint]]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_List_JobStatusResponse__":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"items":{"$ref":"#/components/schemas/JobStatusResponse"},"type":"array","title":"Data","description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[List[JobStatusResponse]]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_List_TopObjectionItem__":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"items":{"$ref":"#/components/schemas/TopObjectionItem"},"type":"array","title":"Data","description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[List[TopObjectionItem]]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_MessageThreadResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/MessageThreadResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[MessageThreadResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_ObjectionAnalyticsResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/ObjectionAnalyticsResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[ObjectionAnalyticsResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_OnboardingStatusResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/OnboardingStatusResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[OnboardingStatusResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_RAGQueryResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/RAGQueryResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[RAGQueryResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_RecordingSessionResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/RecordingSessionResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[RecordingSessionResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_RecordingSessionStartResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/RecordingSessionStartResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[RecordingSessionStartResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_RepShiftBase_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/RepShiftBase"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[RepShiftBase]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_RepShiftResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/RepShiftResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[RepShiftResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_RequestLeadResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/RequestLeadResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[RequestLeadResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_ReviewRequestResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/ReviewRequestResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[ReviewRequestResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_TaskListResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/TaskListResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[TaskListResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_TaskSummary_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/TaskSummary"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[TaskSummary]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_VerificationResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/VerificationResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[VerificationResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_WinsFeedResponse_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/WinsFeedResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[WinsFeedResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"APIResponse_dict_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"type":"object","title":"Data","description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[dict]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"AnalysisStatus":{"type":"string","enum":["not_started","in_progress","completed","failed"],"title":"AnalysisStatus"},"AnalyzeCallRequest":{"properties":{"include_transcript":{"type":"boolean","title":"Include Transcript","description":"Include transcript in analysis","default":true},"include_coaching":{"type":"boolean","title":"Include Coaching","description":"Include coaching recommendations","default":true},"include_objections":{"type":"boolean","title":"Include Objections","description":"Include objection detection","default":true},"include_sop":{"type":"boolean","title":"Include Sop","description":"Include SOP stage tracking","default":true}},"type":"object","title":"AnalyzeCallRequest","description":"Request to trigger call analysis."},"AppointmentCreateBody":{"properties":{"lead_id":{"type":"string","title":"Lead Id","description":"Lead identifier"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id","description":"Optional override contact card"},"scheduled_start":{"type":"string","format":"date-time","title":"Scheduled Start","description":"Scheduled start timestamp"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End"},"status":{"allOf":[{"$ref":"#/components/schemas/AppointmentStatus"}],"description":"Appointment status","default":"scheduled"},"outcome":{"allOf":[{"$ref":"#/components/schemas/AppointmentOutcome"}],"description":"Appointment outcome","default":"pending"},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"}},"type":"object","required":["lead_id","scheduled_start"],"title":"AppointmentCreateBody"},"AppointmentDetail":{"properties":{"id":{"type":"string","title":"Id"},"lead_id":{"type":"string","title":"Lead Id"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id"},"company_id":{"type":"string","title":"Company Id"},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"scheduled_start":{"type":"string","format":"date-time","title":"Scheduled Start"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End"},"status":{"$ref":"#/components/schemas/AppointmentStatus"},"outcome":{"$ref":"#/components/schemas/AppointmentOutcome"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"deal_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deal Size","description":"Deal size in dollars (when outcome is won)"}},"type":"object","required":["id","lead_id","company_id","scheduled_start","status","outcome","created_at","updated_at"],"title":"AppointmentDetail"},"AppointmentDetailExtended":{"properties":{"id":{"type":"string","title":"Id"},"lead_id":{"type":"string","title":"Lead Id"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id"},"company_id":{"type":"string","title":"Company Id"},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"scheduled_start":{"type":"string","format":"date-time","title":"Scheduled Start"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End"},"status":{"$ref":"#/components/schemas/AppointmentStatus"},"outcome":{"$ref":"#/components/schemas/AppointmentOutcome"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"deal_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deal Size"},"material_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Material Type"},"financing_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Financing Type"},"assigned_rep_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Name"},"assigned_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Assigned At"},"rep_claimed":{"type":"boolean","title":"Rep Claimed","default":false},"route_position":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Route Position"},"route_group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Route Group"},"arrival_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Arrival At"},"departure_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Departure At"},"on_site_duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"On Site Duration"},"recording_sessions":{"items":{"$ref":"#/components/schemas/RecordingSessionSummary"},"type":"array","title":"Recording Sessions"},"sop_compliance":{"items":{"$ref":"#/components/schemas/SopComplianceItem"},"type":"array","title":"Sop Compliance"}},"type":"object","required":["id","lead_id","company_id","scheduled_start","status","outcome","created_at","updated_at"],"title":"AppointmentDetailExtended"},"AppointmentListItem":{"properties":{"appointment_id":{"type":"string","title":"Appointment Id","description":"Appointment identifier"},"lead_id":{"type":"string","title":"Lead Id","description":"Associated lead ID"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id","description":"Associated contact card ID"},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name","description":"Customer name from contact card"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address","description":"Appointment location/address"},"scheduled_start":{"type":"string","format":"date-time","title":"Scheduled Start","description":"Scheduled start time"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End","description":"Scheduled end time"},"status":{"type":"string","title":"Status","description":"Appointment status"},"outcome":{"type":"string","title":"Outcome","description":"Appointment outcome"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type","description":"Service type"},"is_assigned_to_me":{"type":"boolean","title":"Is Assigned To Me","description":"Whether appointment is assigned to requesting rep"},"deal_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deal Size","description":"Deal size if outcome is won"},"pending_tasks_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Pending Tasks Count","description":"Number of pending tasks (if cheap to compute)"}},"type":"object","required":["appointment_id","lead_id","scheduled_start","status","outcome","is_assigned_to_me"],"title":"AppointmentListItem","description":"Compact appointment item for listing endpoints (mobile-friendly)."},"AppointmentListResponse":{"properties":{"appointments":{"items":{"$ref":"#/components/schemas/AppointmentListItem"},"type":"array","title":"Appointments"},"total":{"type":"integer","title":"Total","description":"Total count matching filters"},"date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date","description":"Date filter applied (ISO format)"}},"type":"object","required":["total"],"title":"AppointmentListResponse","description":"Response for appointment listing."},"AppointmentOutcome":{"type":"string","enum":["pending","won","lost","no_show","rescheduled"],"title":"AppointmentOutcome"},"AppointmentResponse":{"properties":{"appointment":{"$ref":"#/components/schemas/AppointmentDetail"},"lead":{"anyOf":[{"$ref":"#/components/schemas/LeadSummary"},{"type":"null"}]},"contact":{"anyOf":[{"$ref":"#/components/schemas/ContactCardBase"},{"type":"null"}]}},"type":"object","required":["appointment"],"title":"AppointmentResponse"},"AppointmentStatus":{"type":"string","enum":["scheduled","confirmed","completed","cancelled","no_show"],"title":"AppointmentStatus"},"AppointmentSummary":{"properties":{"id":{"type":"string","title":"Id"},"lead_id":{"type":"string","title":"Lead Id"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id"},"company_id":{"type":"string","title":"Company Id"},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"scheduled_start":{"type":"string","format":"date-time","title":"Scheduled Start"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End"},"status":{"$ref":"#/components/schemas/AppointmentStatus"},"outcome":{"$ref":"#/components/schemas/AppointmentOutcome"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","lead_id","company_id","scheduled_start","status","outcome","created_at","updated_at"],"title":"AppointmentSummary"},"AppointmentUpdateBody":{"properties":{"scheduled_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled Start"},"scheduled_end":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled End"},"status":{"anyOf":[{"$ref":"#/components/schemas/AppointmentStatus"},{"type":"null"}]},"outcome":{"anyOf":[{"$ref":"#/components/schemas/AppointmentOutcome"},{"type":"null"}]},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"deal_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deal Size","description":"Deal size in dollars (required when outcome=won)"}},"type":"object","title":"AppointmentUpdateBody"},"AssignLeadRequest":{"properties":{"rep_id":{"type":"string","title":"Rep Id","description":"ID of rep to assign lead to"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional assignment notes"}},"type":"object","required":["rep_id"],"title":"AssignLeadRequest","description":"Request body for assigning a lead."},"AssignLeadResponse":{"properties":{"lead_id":{"type":"string","title":"Lead Id"},"rep_id":{"type":"string","title":"Rep Id"},"assigned_by":{"type":"string","title":"Assigned By"},"assigned_at":{"type":"string","format":"date-time","title":"Assigned At"},"pool_status":{"type":"string","title":"Pool Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["lead_id","rep_id","assigned_by","assigned_at","pool_status","message"],"title":"AssignLeadResponse","description":"Response for assigning a lead."},"AudioMetadata":{"properties":{"audio_duration_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Audio Duration Seconds"},"audio_size_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Audio Size Bytes"}},"type":"object","title":"AudioMetadata"},"AudioStorageMode":{"type":"string","enum":["persistent","ephemeral","not_stored"],"title":"AudioStorageMode"},"AudioUploadComplete":{"properties":{"audio_url":{"type":"string","title":"Audio Url"},"audio_duration_seconds":{"type":"number","title":"Audio Duration Seconds"},"audio_size_bytes":{"type":"integer","title":"Audio Size Bytes"}},"type":"object","required":["audio_url","audio_duration_seconds","audio_size_bytes"],"title":"AudioUploadComplete"},"Body_upload_audio_mobile_audio_upload__recording_id__post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_audio_mobile_audio_upload__recording_id__post"},"Body_upload_document_api_v1_onboarding_documents_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"category":{"type":"string","title":"Category"},"role_target":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role Target"},"metadata":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["file","category"],"title":"Body_upload_document_api_v1_onboarding_documents_upload_post"},"Body_upload_document_api_v1_rag_documents_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_document_api_v1_rag_documents_upload_post"},"BookingRateDataPoint":{"properties":{"date":{"type":"string","title":"Date","description":"ISO date string (YYYY-MM-DD)"},"rate":{"type":"number","title":"Rate","description":"Booking rate percentage (0-100)"}},"type":"object","required":["date","rate"],"title":"BookingRateDataPoint","description":"Single booking rate data point for chart."},"CallAnalysisResponse":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"analysis_id":{"type":"string","title":"Analysis Id"},"status":{"type":"string","title":"Status"},"transcript":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transcript"},"objections":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objections"},"objection_details":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Objection Details"},"coaching_tips":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Coaching Tips"},"sentiment_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sentiment Score"},"sop_stages_completed":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sop Stages Completed"},"sop_stages_missed":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sop Stages Missed"},"sop_compliance_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sop Compliance Score"},"rehash_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rehash Score"},"lead_quality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Quality"},"analyzed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Analyzed At"}},"type":"object","required":["call_id","analysis_id","status"],"title":"CallAnalysisResponse","description":"Complete call analysis results."},"CallAnalysisSummary":{"properties":{"id":{"type":"string","title":"Id"},"objections":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Objections"},"objection_details":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Objection Details"},"sentiment_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sentiment Score"},"engagement_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Engagement Score"},"coaching_tips":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Coaching Tips"},"sop_stages_completed":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sop Stages Completed"},"sop_stages_missed":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sop Stages Missed"},"sop_compliance_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sop Compliance Score"},"rehash_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rehash Score"},"lead_quality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Quality"},"conversion_probability":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Conversion Probability"},"analyzed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Analyzed At"}},"type":"object","required":["id"],"title":"CallAnalysisSummary"},"CallRailConnectRequest":{"properties":{"api_key":{"type":"string","title":"Api Key","description":"CallRail API key"},"account_id":{"type":"string","title":"Account Id","description":"CallRail account ID"},"primary_tracking_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Tracking Number","description":"Primary tracking phone number"}},"type":"object","required":["api_key","account_id"],"title":"CallRailConnectRequest","description":"Request schema for CallRail connection."},"CallSummary":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"phone_number":{"type":"string","title":"Phone Number"},"direction":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Direction"},"missed_call":{"type":"boolean","title":"Missed Call"},"booked":{"type":"boolean","title":"Booked"},"bought":{"type":"boolean","title":"Bought"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Seconds"},"transcript":{"anyOf":[{"$ref":"#/components/schemas/CallTranscriptSummary"},{"type":"null"}]},"analysis":{"anyOf":[{"$ref":"#/components/schemas/CallAnalysisSummary"},{"type":"null"}]},"recording_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recording Url"}},"type":"object","required":["call_id","phone_number","missed_call","booked","bought","created_at"],"title":"CallSummary"},"CallTrackingConnectResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"provider":{"type":"string","title":"Provider"},"onboarding_step":{"type":"string","title":"Onboarding Step"},"webhook_url":{"type":"string","title":"Webhook Url"},"step_already_completed":{"type":"boolean","title":"Step Already Completed","default":false}},"type":"object","required":["success","provider","onboarding_step","webhook_url"],"title":"CallTrackingConnectResponse","description":"Response schema for call tracking connection."},"CallTrackingTestResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"connected":{"type":"boolean","title":"Connected"},"webhook_url":{"type":"string","title":"Webhook Url"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","connected","webhook_url","message"],"title":"CallTrackingTestResponse","description":"Response schema for call tracking test."},"CallTranscriptSummary":{"properties":{"id":{"type":"string","title":"Id"},"transcript_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transcript Text"},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"word_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Word Count"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","created_at"],"title":"CallTranscriptSummary"},"Citation":{"properties":{"doc_id":{"type":"string","title":"Doc Id"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"},"chunk_text":{"type":"string","title":"Chunk Text"},"similarity_score":{"type":"number","title":"Similarity Score"},"call_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Call Id"},"timestamp":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Timestamp"}},"type":"object","required":["doc_id","chunk_text","similarity_score"],"title":"Citation","description":"Citation for a RAG result."},"CloneStatusResponse":{"properties":{"job_id":{"type":"string","title":"Job Id"},"rep_id":{"type":"string","title":"Rep Id"},"status":{"type":"string","title":"Status"},"progress_percent":{"type":"integer","title":"Progress Percent"},"current_epoch":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Current Epoch"},"total_epochs":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Epochs"},"quality_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Quality Score"},"model_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model Id"},"created_at":{"type":"string","title":"Created At"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["job_id","rep_id","status","progress_percent","created_at"],"title":"CloneStatusResponse","description":"Personal clone training status."},"CompanyBasicsRequest":{"properties":{"company_name":{"type":"string","title":"Company Name","description":"Company name"},"company_phone":{"type":"string","title":"Company Phone","description":"Company phone number"},"company_email":{"type":"string","format":"email","title":"Company Email","description":"Company email address"},"company_domain":{"type":"string","title":"Company Domain","description":"Company domain (e.g., example.com)"},"company_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Address","description":"Company address"},"industry":{"type":"string","title":"Industry","description":"Industry type"},"timezone":{"type":"string","title":"Timezone","description":"Timezone (IANA format)","default":"America/New_York"},"team_size":{"type":"integer","minimum":1.0,"title":"Team Size","description":"Number of team members"},"admin_name":{"type":"string","title":"Admin Name","description":"Admin/manager name"},"admin_email":{"type":"string","format":"email","title":"Admin Email","description":"Admin/manager email"}},"type":"object","required":["company_name","company_phone","company_email","company_domain","industry","team_size","admin_name","admin_email"],"title":"CompanyBasicsRequest","description":"Request schema for company basics step."},"CompanyBasicsResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"company_id":{"type":"string","title":"Company Id"},"onboarding_step":{"type":"string","title":"Onboarding Step"},"step_already_completed":{"type":"boolean","title":"Step Already Completed","default":false}},"type":"object","required":["success","company_id","onboarding_step"],"title":"CompanyBasicsResponse","description":"Response schema for company basics step."},"ContactCardBase":{"properties":{"id":{"type":"string","title":"Id","description":"Unique identifier for the contact card"},"company_id":{"type":"string","title":"Company Id","description":"Tenant/company identifier"},"primary_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Phone","description":"Primary phone number"},"secondary_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secondary Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"custom_metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Custom Metadata","description":"Arbitrary metadata captured for the contact"},"property_snapshot":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Property Snapshot","description":"Property intelligence snapshot (roof_type, square_feet, stories, etc.)"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","company_id","created_at","updated_at"],"title":"ContactCardBase"},"ContactCardBottomSection":{"properties":{"narrative_summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Narrative Summary"},"booking_chips":{"items":{"type":"object"},"type":"array","title":"Booking Chips"},"call_recordings":{"items":{"$ref":"#/components/schemas/CallSummary"},"type":"array","title":"Call Recordings"},"text_messages":{"items":{"$ref":"#/components/schemas/MessageSummary"},"type":"array","title":"Text Messages"},"booking_timeline":{"items":{"$ref":"#/components/schemas/EventLogSummary"},"type":"array","title":"Booking Timeline"}},"type":"object","title":"ContactCardBottomSection","description":"Bottom Section - How Customer Was Booked (Section 5)."},"ContactCardDetail":{"properties":{"id":{"type":"string","title":"Id","description":"Unique identifier for the contact card"},"company_id":{"type":"string","title":"Company Id","description":"Tenant/company identifier"},"primary_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Phone","description":"Primary phone number"},"secondary_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Secondary Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"first_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"custom_metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Custom Metadata","description":"Arbitrary metadata captured for the contact"},"property_snapshot":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Property Snapshot","description":"Property intelligence snapshot (roof_type, square_feet, stories, etc.)"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name","description":"Convenience field combining first and last name"},"top_section":{"allOf":[{"$ref":"#/components/schemas/ContactCardTopSection"}],"description":"Current Status & Priority"},"middle_section":{"anyOf":[{"$ref":"#/components/schemas/ContactCardMiddleSection"},{"type":"null"}],"description":"Sales Appointment & Performance (only after booking)"},"bottom_section":{"allOf":[{"$ref":"#/components/schemas/ContactCardBottomSection"}],"description":"How Customer Was Booked"},"global_blocks":{"allOf":[{"$ref":"#/components/schemas/ContactCardGlobalBlocks"}],"description":"Global Data Blocks"},"property_intelligence":{"anyOf":[{"$ref":"#/components/schemas/PropertyIntelligence"},{"type":"null"}],"description":"Property intelligence (also in middle_section)"},"leads":{"items":{"$ref":"#/components/schemas/LeadSummary"},"type":"array","title":"Leads"},"appointments":{"items":{"$ref":"#/components/schemas/AppointmentSummary"},"type":"array","title":"Appointments"},"recent_call_ids":{"items":{"type":"integer"},"type":"array","title":"Recent Call Ids"}},"type":"object","required":["id","company_id","created_at","updated_at","top_section","bottom_section","global_blocks"],"title":"ContactCardDetail","description":"\n    Full Contact Card Detail with Top/Middle/Bottom sections + Global blocks.\n    \n    This is the canonical response for GET /api/v1/contact-cards/{id}.\n    "},"ContactCardGlobalBlocks":{"properties":{"all_calls":{"items":{"$ref":"#/components/schemas/CallSummary"},"type":"array","title":"All Calls"},"all_messages":{"items":{"$ref":"#/components/schemas/MessageSummary"},"type":"array","title":"All Messages"},"automation_events":{"items":{"$ref":"#/components/schemas/EventLogSummary"},"type":"array","title":"Automation Events"},"pending_actions":{"items":{"$ref":"#/components/schemas/TaskSummary"},"type":"array","title":"Pending Actions"},"ai_insights":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Ai Insights","description":"Aggregated insights: missed_opps, sop_compliance, objections, buying_signals, deal_risk"}},"type":"object","title":"ContactCardGlobalBlocks","description":"Global Data Blocks (Section 6)."},"ContactCardMiddleSection":{"properties":{"active_appointment":{"anyOf":[{"$ref":"#/components/schemas/AppointmentDetailExtended"},{"type":"null"}]},"property_intelligence":{"anyOf":[{"$ref":"#/components/schemas/PropertyIntelligence"},{"type":"null"}]},"sop_compliance":{"items":{"$ref":"#/components/schemas/SopComplianceItem"},"type":"array","title":"Sop Compliance"},"visit_timeline":{"items":{"$ref":"#/components/schemas/EventLogSummary"},"type":"array","title":"Visit Timeline"},"recording_sessions":{"items":{"$ref":"#/components/schemas/RecordingSessionSummary"},"type":"array","title":"Recording Sessions"},"appointment_tasks":{"items":{"$ref":"#/components/schemas/TaskSummary"},"type":"array","title":"Appointment Tasks"},"escalation_warnings":{"items":{"type":"string"},"type":"array","title":"Escalation Warnings"},"transcript_intelligence":{"anyOf":[{"$ref":"#/components/schemas/CallAnalysisSummary"},{"type":"null"}]}},"type":"object","title":"ContactCardMiddleSection","description":"Middle Section - Sales Appointment & Performance (Section 4)."},"ContactCardTopSection":{"properties":{"lead_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Source"},"lead_age_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lead Age Days"},"last_activity_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Activity At"},"lead_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Status"},"lead_status_history":{"items":{"$ref":"#/components/schemas/LeadStatusHistoryEntry"},"type":"array","title":"Lead Status History"},"deal_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Deal Status"},"deal_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Deal Size"},"deal_summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Deal Summary"},"closed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Closed At"},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"assigned_rep_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Name"},"assigned_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Assigned At"},"rep_claimed":{"type":"boolean","title":"Rep Claimed","default":false},"route_position":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Route Position"},"route_group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Route Group"},"distance_from_previous_stop":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance From Previous Stop"},"rep_assignment_history":{"items":{"$ref":"#/components/schemas/RepAssignmentHistoryEntry"},"type":"array","title":"Rep Assignment History"},"requested_by_reps":{"items":{"type":"string"},"type":"array","title":"Requested By Reps","description":"Reps who requested this lead"},"pool_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pool Status","description":"Lead pool status: in_pool/assigned/closed/archived"},"tasks":{"items":{"$ref":"#/components/schemas/TaskSummary"},"type":"array","title":"Tasks"},"overdue_count":{"type":"integer","title":"Overdue Count","description":"Count of overdue tasks","default":0},"key_signals":{"items":{"$ref":"#/components/schemas/KeySignalSummary"},"type":"array","title":"Key Signals"}},"type":"object","title":"ContactCardTopSection","description":"Top Section - Current Status & Priority (Section 3)."},"DataDeletionRequest":{"properties":{"user_id":{"type":"string","title":"User Id","description":"User ID to delete data for"},"reason":{"type":"string","title":"Reason","description":"Reason for deletion","default":"gdpr_request"},"confirm":{"type":"boolean","title":"Confirm","description":"Must be true to confirm deletion"}},"type":"object","required":["user_id","confirm"],"title":"DataDeletionRequest","description":"Request to delete user data (GDPR Right to Erasure).","example":{"confirm":true,"reason":"gdpr_request","user_id":"user_123"}},"DataDeletionResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"status":{"type":"string","title":"Status"},"deleted_records":{"additionalProperties":{"type":"integer"},"type":"object","title":"Deleted Records"},"s3_files_deleted":{"type":"integer","title":"S3 Files Deleted"},"uwc_deletion_requested":{"type":"boolean","title":"Uwc Deletion Requested"},"completed_at":{"type":"string","title":"Completed At"}},"type":"object","required":["user_id","status","deleted_records","s3_files_deleted","uwc_deletion_requested","completed_at"],"title":"DataDeletionResponse","description":"Response after data deletion."},"DocumentStatusResponse":{"properties":{"document_id":{"type":"string","title":"Document Id"},"ingestion_status":{"type":"string","title":"Ingestion Status"},"ingestion_job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ingestion Job Id"},"progress":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Progress"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["document_id","ingestion_status"],"title":"DocumentStatusResponse","description":"Response schema for document status check."},"DraftResponse":{"properties":{"draft_id":{"type":"string","title":"Draft Id"},"call_id":{"type":"integer","title":"Call Id"},"draft_text":{"type":"string","title":"Draft Text"},"draft_type":{"type":"string","title":"Draft Type"},"tone":{"type":"string","title":"Tone"},"status":{"type":"string","title":"Status"},"blocked_by_quiet_hours":{"type":"boolean","title":"Blocked By Quiet Hours","default":false},"scheduled_send_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scheduled Send Time"},"generated_by":{"type":"string","title":"Generated By"}},"type":"object","required":["draft_id","call_id","draft_text","draft_type","tone","status","generated_by"],"title":"DraftResponse","description":"Follow-up draft response."},"EventLogSummary":{"properties":{"id":{"type":"string","title":"Id"},"event_type":{"$ref":"#/components/schemas/EventType"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"actor_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Actor Role"},"metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["id","event_type","timestamp"],"title":"EventLogSummary"},"EventType":{"type":"string","enum":["call_received","call_missed","call_completed","sms_sent","sms_received","automation_nurture","automation_followup","appointment_created","appointment_rescheduled","rep_assigned","rep_arrived","recording_started","recording_ended","rep_departed","appointment_outcome","deal_won","deal_lost","property_intelligence_updated"],"title":"EventType"},"GenerateDraftRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id","description":"Call ID to generate follow-up for"},"draft_type":{"type":"string","title":"Draft Type","description":"Type of draft: sms, email, call_script"},"tone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tone","description":"Tone: professional, friendly, urgent","default":"professional"},"use_personal_clone":{"type":"boolean","title":"Use Personal Clone","description":"Use rep's personal clone if available","default":true}},"type":"object","required":["call_id","draft_type"],"title":"GenerateDraftRequest","description":"Request to generate follow-up draft.","example":{"call_id":123,"draft_type":"sms","tone":"friendly","use_personal_clone":true}},"GhostModeStatus":{"properties":{"rep_id":{"type":"string","title":"Rep Id","description":"Sales rep ID"},"ghost_mode_enabled":{"type":"boolean","title":"Ghost Mode Enabled","description":"Whether ghost mode is enabled"},"recording_mode":{"type":"string","title":"Recording Mode","description":"Current recording mode (normal/ghost/off)"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"When ghost mode was last updated"}},"type":"object","required":["rep_id","ghost_mode_enabled","recording_mode"],"title":"GhostModeStatus","description":"Ghost mode status response."},"GhostModeToggleRequest":{"properties":{"enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enabled","description":"Set ghost mode enabled (if None, toggles)"}},"type":"object","title":"GhostModeToggleRequest","description":"Request body for toggling ghost mode."},"GoalsPreferencesRequest":{"properties":{"primary_goals":{"items":{"type":"string"},"type":"array","title":"Primary Goals","description":"List of primary goals/KPIs"},"target_metrics":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Target Metrics","description":"Target metrics (e.g., conversion_rate, response_time)"},"notification_preferences":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Notification Preferences","description":"Notification preferences"},"quiet_hours_start":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Quiet Hours Start","description":"Quiet hours start time (HH:MM format)"},"quiet_hours_end":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Quiet Hours End","description":"Quiet hours end time (HH:MM format)"}},"type":"object","required":["primary_goals"],"title":"GoalsPreferencesRequest","description":"Request schema for goals and preferences step."},"GoalsPreferencesResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"onboarding_step":{"type":"string","title":"Onboarding Step"},"step_already_completed":{"type":"boolean","title":"Step Already Completed","default":false}},"type":"object","required":["success","onboarding_step"],"title":"GoalsPreferencesResponse","description":"Response schema for goals and preferences step."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InviteUserRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address"},"role":{"type":"string","title":"Role","description":"User role (manager, csr, sales_rep)"},"territory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Territory","description":"Territory (for sales reps)"},"department":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Department","description":"Department/team name"}},"type":"object","required":["email","role"],"title":"InviteUserRequest","description":"Request schema for inviting a user."},"InviteUserResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"invite_id":{"type":"string","title":"Invite Id"},"email":{"type":"string","title":"Email"},"role":{"type":"string","title":"Role"},"status":{"type":"string","title":"Status"}},"type":"object","required":["success","invite_id","email","role","status"],"title":"InviteUserResponse","description":"Response schema for inviting a user."},"InvitedUserResponse":{"properties":{"invite_id":{"type":"string","title":"Invite Id"},"email":{"type":"string","title":"Email"},"role":{"type":"string","title":"Role"},"territory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Territory"},"status":{"type":"string","title":"Status"},"invited_at":{"type":"string","format":"date-time","title":"Invited At"},"accepted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Accepted At"}},"type":"object","required":["invite_id","email","role","status","invited_at"],"title":"InvitedUserResponse","description":"Response schema for listing invited users."},"InvitedUsersListResponse":{"properties":{"invited_users":{"items":{"$ref":"#/components/schemas/InvitedUserResponse"},"type":"array","title":"Invited Users"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["invited_users","total"],"title":"InvitedUsersListResponse","description":"Response schema for listing all invited users."},"JobStatusResponse":{"properties":{"job_id":{"type":"string","title":"Job Id","description":"Unique job identifier"},"status":{"type":"string","title":"Status","description":"Job status: queued, processing, completed, failed"},"progress":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progress","description":"Progress percentage (0-100)"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Status message"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Job creation time"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At","description":"Job start time"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At","description":"Job completion time"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if failed"},"result":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Result","description":"Job result if completed"}},"type":"object","required":["job_id","status","created_at"],"title":"JobStatusResponse","description":"\n    Standard response for async job status.\n    Used for long-running operations like ASR, training, indexing.\n    ","example":{"created_at":"2025-10-09T12:00:00Z","job_id":"job_abc123","message":"Analyzing call transcript","progress":45,"started_at":"2025-10-09T12:00:05Z","status":"processing"}},"KeySignalListResponse":{"properties":{"signals":{"items":{"$ref":"#/components/schemas/KeySignalSummary"},"type":"array","title":"Signals"},"total":{"type":"integer","title":"Total","description":"Total count matching filters"},"unacknowledged_count":{"type":"integer","title":"Unacknowledged Count","description":"Count of unacknowledged signals","default":0}},"type":"object","required":["total"],"title":"KeySignalListResponse","description":"Response for key signal listing."},"KeySignalSummary":{"properties":{"id":{"type":"string","title":"Id"},"signal_type":{"$ref":"#/components/schemas/SignalType"},"severity":{"$ref":"#/components/schemas/SignalSeverity"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"acknowledged":{"type":"boolean","title":"Acknowledged","default":false},"acknowledged_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Acknowledged At"},"acknowledged_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Acknowledged By"},"contact_card_id":{"type":"string","title":"Contact Card Id"},"lead_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Id"},"appointment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appointment Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","signal_type","severity","title","contact_card_id","created_at"],"title":"KeySignalSummary"},"LeadCreateBody":{"properties":{"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id","description":"Existing contact card identifier"},"primary_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Phone","description":"Phone number used to resolve/create contact card"},"status":{"allOf":[{"$ref":"#/components/schemas/app__models__lead__LeadStatus"}],"description":"Lead status","default":"new"},"source":{"allOf":[{"$ref":"#/components/schemas/LeadSource"}],"description":"Lead source","default":"inbound_call"},"campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign"},"pipeline_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Stage"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Score"},"tags":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Tags"}},"type":"object","title":"LeadCreateBody"},"LeadDetail":{"properties":{"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"contact_card_id":{"type":"string","title":"Contact Card Id"},"status":{"$ref":"#/components/schemas/app__schemas__domain__LeadStatus"},"source":{"$ref":"#/components/schemas/LeadSource"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Score"},"last_contacted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Contacted At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign"},"pipeline_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Stage"},"tags":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Tags"}},"type":"object","required":["id","company_id","contact_card_id","status","source","created_at","updated_at"],"title":"LeadDetail"},"LeadPoolListResponse":{"properties":{"leads":{"items":{"$ref":"#/components/schemas/PoolLeadSummary"},"type":"array","title":"Leads"},"total_count":{"type":"integer","title":"Total Count"},"in_pool_count":{"type":"integer","title":"In Pool Count"},"assigned_count":{"type":"integer","title":"Assigned Count"}},"type":"object","required":["leads","total_count","in_pool_count","assigned_count"],"title":"LeadPoolListResponse","description":"Response for listing pool leads."},"LeadResponse":{"properties":{"lead":{"$ref":"#/components/schemas/LeadDetail"},"contact":{"anyOf":[{"$ref":"#/components/schemas/ContactCardBase"},{"type":"null"}]},"appointments":{"items":{"$ref":"#/components/schemas/AppointmentSummary"},"type":"array","title":"Appointments"}},"type":"object","required":["lead"],"title":"LeadResponse"},"LeadSource":{"type":"string","enum":["unknown","inbound_call","inbound_web","referral","partner","other"],"title":"LeadSource"},"LeadStatusHistoryEntry":{"properties":{"from_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Status"},"to_status":{"type":"string","title":"To Status"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"triggered_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Triggered By"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"context":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Context"}},"type":"object","required":["to_status","created_at"],"title":"LeadStatusHistoryEntry","description":"Entry in lead status history."},"LeadSummary":{"properties":{"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"contact_card_id":{"type":"string","title":"Contact Card Id"},"status":{"$ref":"#/components/schemas/app__schemas__domain__LeadStatus"},"source":{"$ref":"#/components/schemas/LeadSource"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Score"},"last_contacted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Contacted At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","company_id","contact_card_id","status","source","created_at","updated_at"],"title":"LeadSummary"},"LeadUpdateBody":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/app__models__lead__LeadStatus"},{"type":"null"}]},"source":{"anyOf":[{"$ref":"#/components/schemas/LeadSource"},{"type":"null"}]},"campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign"},"pipeline_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Stage"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Score"},"tags":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Tags"},"last_contacted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Contacted At"},"last_qualified_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Qualified At"}},"type":"object","title":"LeadUpdateBody"},"LocationInput":{"properties":{"lat":{"type":"number","title":"Lat","description":"Latitude"},"lng":{"type":"number","title":"Lng","description":"Longitude"}},"type":"object","required":["lat","lng"],"title":"LocationInput","description":"Location coordinates for geofence operations."},"MessageItem":{"properties":{"id":{"type":"string","title":"Id","description":"Message ID"},"sender":{"type":"string","title":"Sender","description":"Sender phone number or user ID"},"sender_role":{"type":"string","title":"Sender Role","description":"Sender role"},"body":{"type":"string","title":"Body","description":"Message body"},"direction":{"type":"string","title":"Direction","description":"Message direction (inbound/outbound)"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When message was sent"},"provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider","description":"Provider (Twilio, etc.)"},"message_sid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message Sid","description":"Provider message ID"},"delivered":{"type":"boolean","title":"Delivered","description":"Whether message was delivered","default":true},"read":{"type":"boolean","title":"Read","description":"Whether message was read","default":false}},"type":"object","required":["id","sender","sender_role","body","direction","created_at"],"title":"MessageItem","description":"Single message in a thread."},"MessageSummary":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"sender":{"type":"string","title":"Sender"},"role":{"type":"string","title":"Role"},"body":{"type":"string","title":"Body"},"direction":{"type":"string","title":"Direction"},"type":{"type":"string","title":"Type"},"message_sid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message Sid"}},"type":"object","required":["timestamp","sender","role","body","direction","type"],"title":"MessageSummary"},"MessageThreadResponse":{"properties":{"contact_card_id":{"type":"string","title":"Contact Card Id","description":"Contact card ID"},"messages":{"items":{"$ref":"#/components/schemas/MessageItem"},"type":"array","title":"Messages","description":"List of messages in chronological order"},"total":{"type":"integer","title":"Total","description":"Total message count"}},"type":"object","required":["contact_card_id","total"],"title":"MessageThreadResponse","description":"Response for message thread."},"ObjectionAnalyticsResponse":{"properties":{"date_range":{"type":"string","title":"Date Range"},"total_calls_analyzed":{"type":"integer","title":"Total Calls Analyzed"},"top_objections":{"items":{"$ref":"#/components/schemas/ObjectionSummary"},"type":"array","title":"Top Objections"},"objections_by_rep":{"anyOf":[{"additionalProperties":{"items":{"$ref":"#/components/schemas/ObjectionSummary"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Objections By Rep"}},"type":"object","required":["date_range","total_calls_analyzed","top_objections"],"title":"ObjectionAnalyticsResponse","description":"Objection analytics for dashboard."},"ObjectionSummary":{"properties":{"objection_type":{"type":"string","title":"Objection Type"},"count":{"type":"integer","title":"Count"},"percentage":{"type":"number","title":"Percentage"},"example_quotes":{"items":{"type":"string"},"type":"array","title":"Example Quotes"}},"type":"object","required":["objection_type","count","percentage","example_quotes"],"title":"ObjectionSummary","description":"Objection summary for analytics."},"OnboardingStatusResponse":{"properties":{"company_id":{"type":"string","title":"Company Id"},"onboarding_step":{"type":"string","title":"Onboarding Step"},"onboarding_completed":{"type":"boolean","title":"Onboarding Completed"},"onboarding_completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Onboarding Completed At"},"progress":{"type":"object","title":"Progress","description":"Progress details for each step"}},"type":"object","required":["company_id","onboarding_step","onboarding_completed","progress"],"title":"OnboardingStatusResponse","description":"Response schema for onboarding status check."},"PaginatedResponse_Dict_":{"properties":{"success":{"type":"boolean","title":"Success","description":"Always true for successful pagination","default":true},"items":{"items":{"type":"object"},"type":"array","title":"Items","description":"List of items for current page"},"meta":{"allOf":[{"$ref":"#/components/schemas/PaginationMeta"}],"description":"Pagination metadata"}},"type":"object","required":["items","meta"],"title":"PaginatedResponse[Dict]","example":{"items":[{"id":"1","name":"Item 1"},{"id":"2","name":"Item 2"}],"meta":{"has_next":true,"has_prev":false,"page":1,"page_size":50,"total":100,"total_pages":2},"success":true}},"PaginationMeta":{"properties":{"total":{"type":"integer","title":"Total","description":"Total number of items"},"page":{"type":"integer","title":"Page","description":"Current page number (1-indexed)"},"page_size":{"type":"integer","title":"Page Size","description":"Items per page"},"total_pages":{"type":"integer","title":"Total Pages","description":"Total number of pages"},"has_next":{"type":"boolean","title":"Has Next","description":"Whether there is a next page"},"has_prev":{"type":"boolean","title":"Has Prev","description":"Whether there is a previous page"}},"type":"object","required":["total","page","page_size","total_pages","has_next","has_prev"],"title":"PaginationMeta","description":"Pagination metadata."},"PoolLeadSummary":{"properties":{"lead_id":{"type":"string","title":"Lead Id"},"contact_card_id":{"type":"string","title":"Contact Card Id"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name"},"primary_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Primary Phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"lead_status":{"type":"string","title":"Lead Status"},"deal_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Deal Status"},"signals":{"items":{"type":"string"},"type":"array","title":"Signals","description":"Key signal titles"},"last_activity":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Activity"},"assigned_rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned Rep Id"},"requested_by_rep_ids":{"items":{"type":"string"},"type":"array","title":"Requested By Rep Ids"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["lead_id","contact_card_id","lead_status","created_at"],"title":"PoolLeadSummary","description":"Summary of a lead in the pool."},"PropertyIntelligence":{"properties":{"roof_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Roof Type"},"square_feet":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Square Feet"},"stories":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Stories"},"year_built":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year Built"},"access_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Notes"},"solar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Solar"},"hoa":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hoa"},"subdivision":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subdivision"},"last_sale_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Sale Date"},"last_sale_price":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Sale Price"},"est_value_range":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Est Value Range"},"potential_equity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Potential Equity"},"is_for_sale":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Is For Sale"},"sources":{"items":{"type":"string"},"type":"array","title":"Sources","description":"Sources used for property data"},"google_earth_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Google Earth Url","description":"Google Earth URL for this property"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"When property snapshot was last updated"}},"type":"object","title":"PropertyIntelligence","description":"Normalized property intelligence data extracted from public sources."},"RAGQueryRequest":{"properties":{"query":{"type":"string","maxLength":1000,"minLength":3,"title":"Query","description":"Natural language question"},"filters":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Filters","description":"Optional filters (date_range, rep_id, etc.)"},"max_results":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Max Results","description":"Maximum number of results","default":10}},"type":"object","required":["query"],"title":"RAGQueryRequest","description":"Ask Otto query request.","example":{"filters":{"date_range":"last_30_days"},"max_results":10,"query":"What are the most common objections my reps face?"}},"RAGQueryResponse":{"properties":{"query_id":{"type":"string","title":"Query Id"},"query":{"type":"string","title":"Query"},"answer":{"type":"string","title":"Answer"},"citations":{"items":{"$ref":"#/components/schemas/Citation"},"type":"array","title":"Citations"},"confidence_score":{"type":"number","title":"Confidence Score"},"latency_ms":{"type":"integer","title":"Latency Ms"}},"type":"object","required":["query_id","query","answer","citations","confidence_score","latency_ms"],"title":"RAGQueryResponse","description":"Ask Otto query response.","example":{"answer":"The most common objection is 'price too high' (40%), followed by 'need to think about it' (28%)...","citations":[{"chunk_text":"Price objections are best handled by...","doc_id":"doc_123","filename":"sales_script.pdf","similarity_score":0.92}],"confidence_score":0.89,"latency_ms":1250,"query":"What are the most common objections?","query_id":"query_123"}},"RecordingMode":{"type":"string","enum":["normal","ghost","off"],"title":"RecordingMode"},"RecordingSessionBase":{"properties":{"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"rep_id":{"type":"string","title":"Rep Id"},"appointment_id":{"type":"string","title":"Appointment Id"},"shift_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shift Id"},"mode":{"$ref":"#/components/schemas/RecordingMode"},"audio_storage_mode":{"$ref":"#/components/schemas/AudioStorageMode"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"start_lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Start Lat"},"start_lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Start Lng"},"end_lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"End Lat"},"end_lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"End Lng"},"geofence_radius_start":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Geofence Radius Start"},"geofence_radius_stop":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Geofence Radius Stop"},"audio_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audio Url"},"audio_duration_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Audio Duration Seconds"},"audio_size_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Audio Size Bytes"},"transcription_status":{"$ref":"#/components/schemas/TranscriptionStatus"},"analysis_status":{"$ref":"#/components/schemas/AnalysisStatus"},"shunya_asr_job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shunya Asr Job Id"},"shunya_analysis_job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shunya Analysis Job Id"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["id","company_id","rep_id","appointment_id","mode","audio_storage_mode","started_at","transcription_status","analysis_status"],"title":"RecordingSessionBase","description":"Base recording session schema."},"RecordingSessionResponse":{"properties":{"session":{"$ref":"#/components/schemas/RecordingSessionBase"}},"type":"object","required":["session"],"title":"RecordingSessionResponse","description":"Response for recording session operations."},"RecordingSessionStartRequest":{"properties":{"rep_id":{"type":"string","title":"Rep Id","description":"Sales rep ID"},"appointment_id":{"type":"string","title":"Appointment Id","description":"Appointment ID"},"mode":{"anyOf":[{"$ref":"#/components/schemas/RecordingMode"},{"type":"null"}],"description":"Recording mode (if omitted, uses rep default)"},"location":{"allOf":[{"$ref":"#/components/schemas/LocationInput"}],"description":"Current location"}},"type":"object","required":["rep_id","appointment_id","location"],"title":"RecordingSessionStartRequest","description":"Request to start a recording session."},"RecordingSessionStartResponse":{"properties":{"recording_session_id":{"type":"string","title":"Recording Session Id","description":"ID of the created recording session"},"mode":{"allOf":[{"$ref":"#/components/schemas/RecordingMode"}],"description":"Recording mode being used"},"audio_storage_mode":{"allOf":[{"$ref":"#/components/schemas/AudioStorageMode"}],"description":"How audio will be stored"},"audio_upload_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audio Upload Url","description":"URL to upload audio (if applicable)"},"shunya_job_config":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Shunya Job Config","description":"Shunya job configuration (if applicable)"}},"type":"object","required":["recording_session_id","mode","audio_storage_mode"],"title":"RecordingSessionStartResponse","description":"Response when starting a recording session."},"RecordingSessionStopRequest":{"properties":{"location":{"allOf":[{"$ref":"#/components/schemas/LocationInput"}],"description":"Current location when stopping"}},"type":"object","required":["location"],"title":"RecordingSessionStopRequest","description":"Request to stop a recording session."},"RecordingSessionSummary":{"properties":{"id":{"type":"string","title":"Id"},"appointment_id":{"type":"string","title":"Appointment Id"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration Seconds"},"mode":{"$ref":"#/components/schemas/RecordingMode"},"audio_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audio Url"},"transcription_status":{"$ref":"#/components/schemas/TranscriptionStatus"},"analysis_status":{"$ref":"#/components/schemas/AnalysisStatus"},"outcome_classification":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outcome Classification"},"sentiment_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sentiment Score"}},"type":"object","required":["id","appointment_id","started_at","mode","transcription_status","analysis_status"],"title":"RecordingSessionSummary"},"RepAppointment":{"properties":{"id":{"type":"integer","title":"Id"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date"},"time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Time"},"full_datetime":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Full Datetime"},"status":{"type":"string","title":"Status"},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name"},"customer_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Phone"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration"},"is_past":{"type":"boolean","title":"Is Past"},"bought":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Bought"},"cancelled":{"type":"boolean","title":"Cancelled"},"price_quote":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price Quote"}},"type":"object","required":["id","title","status","is_past","cancelled"],"title":"RepAppointment"},"RepAppointmentsResponse":{"properties":{"appointments":{"items":{"$ref":"#/components/schemas/RepAppointment"},"type":"array","title":"Appointments"},"total":{"type":"integer","title":"Total"},"show_past":{"type":"boolean","title":"Show Past"},"rep_name":{"type":"string","title":"Rep Name"}},"type":"object","required":["appointments","total","show_past","rep_name"],"title":"RepAppointmentsResponse"},"RepAssignmentHistoryEntry":{"properties":{"rep_id":{"type":"string","title":"Rep Id"},"rep_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rep Name"},"assigned_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned By"},"assignment_type":{"type":"string","title":"Assignment Type"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"route_position":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Route Position"},"route_group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Route Group"},"distance_from_previous_stop":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance From Previous Stop"},"rep_claimed":{"type":"boolean","title":"Rep Claimed","default":false},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"requested_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Requested At"},"assigned_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Assigned At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["rep_id","assignment_type","created_at"],"title":"RepAssignmentHistoryEntry","description":"Entry in rep assignment history."},"RepBase":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"email":{"type":"string","title":"Email"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"}},"type":"object","required":["id","name","email"],"title":"RepBase"},"RepShiftBase":{"properties":{"id":{"type":"string","title":"Id"},"rep_id":{"type":"string","title":"Rep Id"},"company_id":{"type":"string","title":"Company Id"},"shift_date":{"type":"string","format":"date","title":"Shift Date"},"clock_in_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Clock In At"},"clock_out_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Clock Out At"},"scheduled_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Scheduled Start"},"scheduled_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Scheduled End"},"status":{"$ref":"#/components/schemas/ShiftStatus"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["id","rep_id","company_id","shift_date","status"],"title":"RepShiftBase"},"RepShiftCreate":{"properties":{"desired_start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Desired Start Time","description":"Desired clock-in time (optional)"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","title":"RepShiftCreate","description":"Request body for creating/updating a shift."},"RepShiftResponse":{"properties":{"shift":{"$ref":"#/components/schemas/RepShiftBase"},"effective_start_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Effective Start Time","description":"Effective shift start time"},"effective_end_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Effective End Time","description":"Effective shift end time"},"recording_mode":{"type":"string","title":"Recording Mode","description":"Recording mode for this rep"},"allow_location_tracking":{"type":"boolean","title":"Allow Location Tracking","description":"Whether location tracking is allowed"},"allow_recording":{"type":"boolean","title":"Allow Recording","description":"Whether recording is allowed"}},"type":"object","required":["shift","recording_mode","allow_location_tracking","allow_recording"],"title":"RepShiftResponse","description":"Response for shift operations."},"RepsListResponse":{"properties":{"reps":{"items":{"$ref":"#/components/schemas/RepBase"},"type":"array","title":"Reps"}},"type":"object","required":["reps"],"title":"RepsListResponse"},"RequestLeadResponse":{"properties":{"lead_id":{"type":"string","title":"Lead Id"},"rep_id":{"type":"string","title":"Rep Id"},"status":{"type":"string","title":"Status"},"requested_at":{"type":"string","format":"date-time","title":"Requested At"},"message":{"type":"string","title":"Message"}},"type":"object","required":["lead_id","rep_id","status","requested_at","message"],"title":"RequestLeadResponse","description":"Response for rep requesting a lead."},"ReviewRequestBody":{"properties":{"appointment_id":{"type":"string","title":"Appointment Id","description":"Appointment ID"},"channel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Channel","description":"Channel for review request (sms, email)","default":"sms"},"template_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Template Id","description":"Optional template ID"}},"type":"object","required":["appointment_id"],"title":"ReviewRequestBody","description":"Request body for triggering a review request."},"ReviewRequestResponse":{"properties":{"review_request_id":{"type":"string","title":"Review Request Id","description":"Review request ID"},"appointment_id":{"type":"string","title":"Appointment Id","description":"Appointment ID"},"contact_card_id":{"type":"string","title":"Contact Card Id","description":"Contact card ID"},"channel":{"type":"string","title":"Channel","description":"Channel used"},"status":{"type":"string","title":"Status","description":"Request status (queued/requested/sent/completed)"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When request was created"}},"type":"object","required":["review_request_id","appointment_id","contact_card_id","channel","status","created_at"],"title":"ReviewRequestResponse","description":"Response for review request."},"ShiftStatus":{"type":"string","enum":["off","planned","active","completed","skipped"],"title":"ShiftStatus"},"SignalSeverity":{"type":"string","enum":["low","medium","high","critical"],"title":"SignalSeverity"},"SignalType":{"type":"string","enum":["risk","opportunity","coaching","operational"],"title":"SignalType"},"SopChecklistItem":{"type":"string","enum":["greeting","building_rapport","understanding_needs","inspecting_roof","taking_photos","presenting_estimate","explaining_warranty","reviewing_price","discussing_financing","closing_attempt","next_steps_given"],"title":"SopChecklistItem"},"SopComplianceItem":{"properties":{"checklist_item":{"$ref":"#/components/schemas/SopChecklistItem"},"status":{"$ref":"#/components/schemas/SopItemStatus"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp"}},"type":"object","required":["checklist_item","status"],"title":"SopComplianceItem"},"SopItemStatus":{"type":"string","enum":["completed","missed","warning"],"title":"SopItemStatus"},"TaskCreateBody":{"properties":{"description":{"type":"string","title":"Description","description":"Task description"},"assigned_to":{"allOf":[{"$ref":"#/components/schemas/app__models__task__TaskAssignee"}],"description":"Who should complete this task"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id","description":"Associated contact card"},"lead_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Id","description":"Associated lead"},"appointment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appointment Id","description":"Associated appointment"},"call_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Call Id","description":"Associated call"},"due_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due At","description":"When task is due"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority","description":"Priority level (high/medium/low)"},"source":{"allOf":[{"$ref":"#/components/schemas/app__models__task__TaskSource"}],"description":"Task source","default":"manual"}},"type":"object","required":["description","assigned_to"],"title":"TaskCreateBody","description":"Request body for creating a task."},"TaskListResponse":{"properties":{"tasks":{"items":{"$ref":"#/components/schemas/TaskSummary"},"type":"array","title":"Tasks"},"total":{"type":"integer","title":"Total","description":"Total count matching filters"},"overdue_count":{"type":"integer","title":"Overdue Count","description":"Count of overdue tasks","default":0}},"type":"object","required":["total"],"title":"TaskListResponse","description":"Response for task listing."},"TaskSummary":{"properties":{"id":{"type":"string","title":"Id"},"description":{"type":"string","title":"Description"},"assigned_to":{"$ref":"#/components/schemas/app__schemas__domain__TaskAssignee"},"source":{"$ref":"#/components/schemas/app__schemas__domain__TaskSource"},"due_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due At"},"status":{"$ref":"#/components/schemas/app__schemas__domain__TaskStatus"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"contact_card_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Card Id"},"lead_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lead Id"},"appointment_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Appointment Id"},"call_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Call Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","description","assigned_to","source","status","created_at"],"title":"TaskSummary"},"TaskUpdateBody":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/app__models__task__TaskStatus"},{"type":"null"}]},"due_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Due At"},"assigned_to":{"anyOf":[{"$ref":"#/components/schemas/app__models__task__TaskAssignee"},{"type":"null"}]},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Additional notes (stored in task_metadata)"}},"type":"object","title":"TaskUpdateBody","description":"Request body for updating a task."},"TopObjectionItem":{"properties":{"label":{"type":"string","title":"Label","description":"Objection text or category"},"percentage":{"type":"number","title":"Percentage","description":"Percentage (0-100) of calls with this objection"}},"type":"object","required":["label","percentage"],"title":"TopObjectionItem","description":"Single objection item with label and percentage."},"TrainCloneRequest":{"properties":{"rep_id":{"type":"string","title":"Rep Id","description":"Sales rep ID to train clone for"},"training_data_type":{"type":"string","title":"Training Data Type","description":"Type of training data: calls, media, mixed"},"training_call_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Training Call Ids","description":"Call IDs to use for training"},"training_media_urls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Training Media Urls","description":"Video URLs (reels, shorts, presentations)"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Notes about training data"}},"type":"object","required":["rep_id","training_data_type"],"title":"TrainCloneRequest","description":"Request to train personal clone.","example":{"notes":"Using top 3 performing calls + Instagram reels","rep_id":"rep_123","training_call_ids":[101,102,103],"training_data_type":"mixed","training_media_urls":["https://youtube.com/shorts/abc123","https://tiktok.com/@user/video/xyz789"]}},"TranscriptionStatus":{"type":"string","enum":["not_started","in_progress","completed","failed"],"title":"TranscriptionStatus"},"TwilioCallRequest":{"properties":{"rep_phone_number":{"type":"string","title":"Rep Phone Number"},"customer_phone_number":{"type":"string","title":"Customer Phone Number"},"company_id":{"type":"string","title":"Company Id"},"call_id":{"type":"integer","title":"Call Id"}},"type":"object","required":["rep_phone_number","customer_phone_number","company_id","call_id"],"title":"TwilioCallRequest","description":"Structure for call request data"},"TwilioConnectRequest":{"properties":{"account_sid":{"type":"string","title":"Account Sid","description":"Twilio Account SID"},"auth_token":{"type":"string","title":"Auth Token","description":"Twilio Auth Token"},"primary_tracking_number":{"type":"string","title":"Primary Tracking Number","description":"Primary tracking phone number"}},"type":"object","required":["account_sid","auth_token","primary_tracking_number"],"title":"TwilioConnectRequest","description":"Request schema for Twilio connection."},"TwilioTextRequest":{"properties":{"customer_phone_number":{"type":"string","title":"Customer Phone Number"},"message":{"type":"string","title":"Message"},"company_id":{"type":"string","title":"Company Id"},"call_id":{"type":"integer","title":"Call Id"}},"type":"object","required":["customer_phone_number","message","company_id","call_id"],"title":"TwilioTextRequest","description":"Structure for text message request data"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerificationRequest":{"properties":{},"type":"object","title":"VerificationRequest","description":"Request schema for final verification."},"VerificationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"onboarding_completed":{"type":"boolean","title":"Onboarding Completed"},"onboarding_completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Onboarding Completed At"},"checks":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Checks","description":"Verification checks (company_basics, call_tracking, documents, team_members)"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","description":"List of errors if verification failed"}},"type":"object","required":["success","onboarding_completed","checks"],"title":"VerificationResponse","description":"Response schema for final verification."},"WinItem":{"properties":{"appointment_id":{"type":"string","title":"Appointment Id","description":"Appointment ID"},"lead_id":{"type":"string","title":"Lead Id","description":"Lead ID"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name","description":"Customer name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address","description":"Customer address"},"rep_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rep Name","description":"Sales rep name"},"rep_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rep Id","description":"Sales rep ID"},"deal_size":{"type":"number","title":"Deal Size","description":"Deal size in dollars"},"closed_at":{"type":"string","format":"date-time","title":"Closed At","description":"When deal was closed"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type","description":"Service type"},"scheduled_start":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled Start","description":"Original appointment scheduled start"}},"type":"object","required":["appointment_id","lead_id","deal_size","closed_at"],"title":"WinItem","description":"Single win item in the feed."},"WinsFeedResponse":{"properties":{"wins":{"items":{"$ref":"#/components/schemas/WinItem"},"type":"array","title":"Wins"},"total":{"type":"integer","title":"Total","description":"Total count matching filters"},"date_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date From","description":"Date filter start (ISO format)"},"date_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date To","description":"Date filter end (ISO format)"}},"type":"object","required":["total"],"title":"WinsFeedResponse","description":"Response for wins feed."},"app__models__lead__LeadStatus":{"type":"string","enum":["new","warm","hot","qualified_booked","qualified_unbooked","qualified_service_not_offered","nurturing","dormant","abandoned","closed_won","closed_lost"],"title":"LeadStatus","description":"Adaptive lead status engine (Section 3.4)."},"app__models__task__TaskAssignee":{"type":"string","enum":["csr","rep","manager","ai"],"title":"TaskAssignee","description":"Who the task is assigned to."},"app__models__task__TaskSource":{"type":"string","enum":["otto","shunya","manual"],"title":"TaskSource","description":"Source of task creation."},"app__models__task__TaskStatus":{"type":"string","enum":["open","completed","overdue","cancelled"],"title":"TaskStatus","description":"Task status."},"app__routes__rag__DocumentUploadResponse":{"properties":{"document_id":{"type":"string","title":"Document Id"},"status":{"type":"string","title":"Status"},"filename":{"type":"string","title":"Filename"},"file_url":{"type":"string","title":"File Url"},"uwc_job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uwc Job Id"}},"type":"object","required":["document_id","status","filename","file_url"],"title":"DocumentUploadResponse","description":"Document upload response."},"app__schemas__domain__LeadStatus":{"type":"string","enum":["new","qualified_booked","qualified_unbooked","qualified_service_not_offered","nurturing","closed_won","closed_lost"],"title":"LeadStatus"},"app__schemas__domain__TaskAssignee":{"type":"string","enum":["csr","rep","manager","ai"],"title":"TaskAssignee"},"app__schemas__domain__TaskSource":{"type":"string","enum":["otto","shunya","manual"],"title":"TaskSource"},"app__schemas__domain__TaskStatus":{"type":"string","enum":["open","completed","overdue","cancelled"],"title":"TaskStatus"},"app__schemas__onboarding__DocumentUploadResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"document_id":{"type":"string","title":"Document Id"},"filename":{"type":"string","title":"Filename"},"s3_url":{"type":"string","title":"S3 Url"},"ingestion_job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ingestion Job Id"},"ingestion_status":{"type":"string","title":"Ingestion Status"},"estimated_processing_time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Estimated Processing Time"}},"type":"object","required":["success","document_id","filename","s3_url","ingestion_status"],"title":"DocumentUploadResponse","description":"Response schema for document upload."},"app__schemas__responses__APIResponse_DocumentUploadResponse___1":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/app__routes__rag__DocumentUploadResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[DocumentUploadResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}},"app__schemas__responses__APIResponse_DocumentUploadResponse___2":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates successful operation","default":true},"data":{"allOf":[{"$ref":"#/components/schemas/app__schemas__onboarding__DocumentUploadResponse"}],"description":"Response payload"},"meta":{"anyOf":[{"$ref":"#/components/schemas/APIMetadata"},{"type":"null"}],"description":"Response metadata"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"Optional human-readable message"}},"type":"object","required":["data"],"title":"APIResponse[DocumentUploadResponse]","example":{"data":{"id":"123","name":"Example"},"meta":{"request_id":"req_abc123","timestamp":"2025-10-09T12:00:00Z","version":"v1"},"success":true}}}}}
{"openapi":"3.1.0","info":{"title":"Otto AI API","description":"AI-powered sales assistant platform with organized API groups","version":"1.0.0"},"paths":{"/api/v1/auth/validate":{"post":{"tags":["Authentication"],"summary":"Validate Token","description":"Validate JWT token from Otto frontend with role-based access","operationId":"validate_token_api_v1_auth_validate_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenValidationResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Current User Info","description":"Get current user information with role-based permissions","operationId":"get_current_user_info_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInfo"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/token-info":{"get":{"tags":["Authentication"],"summary":"Get Token Info","description":"Get detailed token information with role-based access","operationId":"get_token_info_api_v1_auth_token_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]},{"HTTPBearer":[]}]}},"/api/v1/auth/company":{"get":{"tags":["Authentication"],"summary":"Get Current Company Info","description":"Get current company information","operationId":"get_current_company_info_api_v1_auth_company_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyInfo"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/roles":{"get":{"tags":["Authentication"],"summary":"Get Available Roles","description":"Get available roles and their permissions","operationId":"get_available_roles_api_v1_auth_roles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ingestion/documents/upload":{"post":{"tags":["Document Ingestion"],"summary":"Document Upload","description":"Main document upload endpoint - handles all document types (sop, training, reference)\nCreates the document record and enqueues Celery background processing.","operationId":"document_upload_api_v1_ingestion_documents_upload_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentUpload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ingestion/sop-documents":{"post":{"tags":["Document Ingestion"],"summary":"Ingest Sop Documents","description":"Upload SOP document file to S3 and create document record.","operationId":"ingest_sop_documents_api_v1_ingestion_sop_documents_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_type","in":"query","required":false,"schema":{"type":"string","default":"sop","title":"Document Type"}},{"name":"target_role","in":"query","required":true,"schema":{"type":"string","description":"Target role for this SOP (e.g., sales_rep or customer_rep)","title":"Target Role"},"description":"Target role for this SOP (e.g., sales_rep or customer_rep)"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_ingest_sop_documents_api_v1_ingestion_sop_documents_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ingestion/reference-documents":{"post":{"tags":["Document Ingestion"],"summary":"Ingest Reference Documents","description":"Proxy to unified upload for reference docs.","operationId":"ingest_reference_documents_api_v1_ingestion_reference_documents_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_type","in":"query","required":false,"schema":{"type":"string","default":"reference","title":"Document Type"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_ingest_reference_documents_api_v1_ingestion_reference_documents_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ingestion/{document_id}/status":{"get":{"tags":["Document Ingestion"],"summary":"Get Document Status","description":"Get document processing status","operationId":"get_document_status_api_v1_ingestion__document_id__status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sop/stages":{"get":{"tags":["SOP Management"],"summary":"Get Sop Stages","description":"Get SOP stages filtered by target role","operationId":"get_sop_stages_api_v1_sop_stages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"target_role","in":"query","required":true,"schema":{"type":"string","description":"Target role to filter stages (e.g., sales_rep, customer_rep)","title":"Target Role"},"description":"Target role to filter stages (e.g., sales_rep, customer_rep)"},{"name":"approval_status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by approval status","title":"Approval Status"},"description":"Filter by approval status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SOPStagesListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["SOP Management"],"summary":"Create Sop Stage","description":"Create a new SOP stage for specific roles","operationId":"create_sop_stage_api_v1_sop_stages_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSOPStageRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSOPStageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sop/stages/{stage_id}":{"get":{"tags":["SOP Management"],"summary":"Get Sop Stage","description":"Get a specific SOP stage filtered by target role","operationId":"get_sop_stage_api_v1_sop_stages__stage_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"stage_id","in":"path","required":true,"schema":{"type":"integer","title":"Stage Id"}},{"name":"target_role","in":"query","required":true,"schema":{"type":"string","description":"Target role to verify access (e.g., sales_rep, customer_rep)","title":"Target Role"},"description":"Target role to verify access (e.g., sales_rep, customer_rep)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SOPStageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transcription/transcribe":{"post":{"tags":["Transcription","Transcription"],"summary":"Transcribe Audio","description":"Start transcription process for audio using Celery task\n\nNote: Call record is managed by App Team, we only manage call_transcripts\n\n**Valid call_type values:**\n- `sales_call` - Sales representative call\n- `csr_call` - Customer service representative call","operationId":"transcribe_audio_api_v1_transcription_transcribe_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/transcription/status/{call_id}":{"get":{"tags":["Transcription","Transcription"],"summary":"Get Transcript Status","description":"Get transcription status for a call\nNote: We only manage call_transcripts, not the call record itself","operationId":"get_transcript_status_api_v1_transcription_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transcription/transcript/{call_id}":{"get":{"tags":["Transcription","Transcription"],"summary":"Get Transcript","description":"Get full transcript for a call\nNote: We only manage call_transcripts, not the call record itself","operationId":"get_transcript_api_v1_transcription_transcript__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/start/{call_id}":{"post":{"tags":["Call Analysis","Call Analysis"],"summary":"Start Call Analysis","description":"Start analysis pipeline for a call","operationId":"start_call_analysis_api_v1_analysis_start__call_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/status/{call_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Analysis Status","description":"Get analysis status for a call","operationId":"get_analysis_status_api_v1_analysis_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/summary/{call_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Call Summary","description":"Get call summary","operationId":"get_call_summary_api_v1_analysis_summary__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/compliance/{call_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Compliance Check","description":"Get compliance check results with clean, non-redundant structure\nIncludes both Layer 1 (SOP) and Layer 2 (Outcome) if available","operationId":"get_compliance_check_api_v1_analysis_compliance__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/objections/{call_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Objections","description":"Get detected objections with eager loading and helper function for formatting","operationId":"get_objections_api_v1_analysis_objections__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/qualification/{call_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Lead Qualification","description":"Get lead qualification results","operationId":"get_lead_qualification_api_v1_analysis_qualification__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/complete/{call_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Complete Analysis","description":"Get complete analysis results for a call with eager loading","operationId":"get_complete_analysis_api_v1_analysis_complete__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/followup-recommendations/by-id/{call_id}/{recommendation_id}":{"get":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Specific Recommendation","description":"Get a specific follow-up recommendation by call_id and recommendation_id\n\nArgs:\n    call_id: The call record ID\n    recommendation_id: The recommendation ID\n    \nReturns:\n    The specific recommendation details\n    \nExample:\n    GET /api/v1/analysis/followup-recommendations/by-id/4007/123","operationId":"get_specific_recommendation_api_v1_analysis_followup_recommendations_by_id__call_id___recommendation_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}},{"name":"recommendation_id","in":"path","required":true,"schema":{"type":"integer","title":"Recommendation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/followup-recommendations/{call_id}":{"post":{"tags":["Call Analysis","Call Analysis"],"summary":"Get Followup Recommendations","description":"Generate AI-powered follow-up recommendation for a call\nAlways generates a NEW recommendation\n\nArgs:\n    call_id: The call record ID\n    request_body: {\n        \"is_missed_call\": true/false,\n        \"personalize\": true/false,  // NEW: Use Personal Otto (defaults to false)\n        \"conversation_context\": {  // OPTIONAL for threaded follow-ups\n            \"previous_messages\": [\n                {\"timestamp\": \"...\", \"sender\": \"agent|customer\", \"message\": \"...\"}\n            ],\n            \"customer_sentiment\": \"interested|neutral|negative\",\n            \"follow_up_attempt\": 2,\n            \"time_since_last_message\": \"4_hours\"\n        }\n    }\n    \nReturns:\n    Follow-up recommendation with suggested message, timing, reasoning, personalization status, and recommendation_id\n    \nExamples:\n    # Generic follow-up\n    POST /api/v1/analysis/followup-recommendations/4007\n    {\"is_missed_call\": false, \"personalize\": false}\n    \n    # Personalized follow-up (uses Personal Otto if profile exists)\n    POST /api/v1/analysis/followup-recommendations/4007\n    {\"is_missed_call\": false, \"personalize\": true}\n    \n    # Threaded personalized follow-up (with conversation history)\n    POST /api/v1/analysis/followup-recommendations/4007\n    {\n        \"is_missed_call\": false,\n        \"personalize\": true,\n        \"conversation_context\": {\n            \"previous_messages\": [\n                {\"timestamp\": \"2025-11-15T11:00:00Z\", \"sender\": \"agent\", \"message\": \"Hi! Following up...\"},\n                {\"timestamp\": \"2025-11-15T11:15:00Z\", \"sender\": \"customer\", \"message\": \"Can we move to 3pm?\"}\n            ],\n            \"customer_sentiment\": \"interested\",\n            \"follow_up_attempt\": 2,\n            \"time_since_last_message\": \"4_hours\"\n        }\n    }","operationId":"get_followup_recommendations_api_v1_analysis_followup_recommendations__call_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/summarization/summarize":{"post":{"tags":["Call Summarization"],"summary":"Summarize Call","description":"Summarize a call transcript using LLM analysis","operationId":"summarize_call_api_v1_summarization_summarize_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SummarizationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SummarizationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/summarization/status/{call_id}":{"get":{"tags":["Call Summarization"],"summary":"Get Summarization Status","description":"Get summarization status for a call","operationId":"get_summarization_status_api_v1_summarization_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SummarizationStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/objection-detection/detect":{"post":{"tags":["Objection Detection"],"summary":"Detect Objections","description":"Detect objections in a call transcript using LLM analysis","operationId":"detect_objections_api_v1_objection_detection_detect_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObjectionDetectionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObjectionDetectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/objection-detection/objections/status/{call_id}":{"get":{"tags":["Objection Detection"],"summary":"Get Objection Detection Status","description":"Get objection detection status for a call","operationId":"get_objection_detection_status_api_v1_objection_detection_objections_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ObjectionStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lead-qualification/qualify":{"post":{"tags":["Lead Qualification"],"summary":"Qualify Lead","description":"Qualify a lead based on BANT criteria using LLM analysis","operationId":"qualify_lead_api_v1_lead_qualification_qualify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadQualificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadQualificationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/lead-qualification/status/{call_id}":{"get":{"tags":["Lead Qualification"],"summary":"Get Qualification Status","description":"Get lead qualification status for a call","operationId":"get_qualification_status_api_v1_lead_qualification_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QualificationStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rehash-analysis/analyze":{"post":{"tags":["Rehash Analysis"],"summary":"Analyze Rehash","description":"Analyze a sales call for rehash potential using LLM analysis","operationId":"analyze_rehash_api_v1_rehash_analysis_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RehashAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RehashAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/rehash-analysis/status/{call_id}":{"get":{"tags":["Rehash Analysis"],"summary":"Get Rehash Status","description":"Get rehash analysis status for a call","operationId":"get_rehash_status_api_v1_rehash_analysis_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RehashStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rehash-analysis/analysis/{call_id}":{"get":{"tags":["Rehash Analysis"],"summary":"Get Rehash Analysis","description":"Get existing rehash analysis for a call","operationId":"get_rehash_analysis_api_v1_rehash_analysis_analysis__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RehashAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/meeting-segmentation/analyze":{"post":{"tags":["Meeting Segmentation"],"summary":"Analyze Meeting Segmentation","description":"Analyze meeting segmentation for a sales appointment\n\nThis endpoint segments a sales appointment into:\n- Part 1: Rapport/Agenda (relationship building, agenda setting)\n- Part 2: Proposal/Close (presentation, proposal, closing)","operationId":"analyze_meeting_segmentation_api_v1_meeting_segmentation_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeetingSegmentationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeetingSegmentationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/meeting-segmentation/status/{call_id}":{"get":{"tags":["Meeting Segmentation"],"summary":"Get Meeting Segmentation Status","description":"Get the status of meeting segmentation analysis for a call","operationId":"get_meeting_segmentation_status_api_v1_meeting_segmentation_status__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeetingSegmentationStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/meeting-segmentation/analysis/{call_id}":{"get":{"tags":["Meeting Segmentation"],"summary":"Get Meeting Segmentation Analysis","description":"Get the full meeting segmentation analysis for a call","operationId":"get_meeting_segmentation_analysis_api_v1_meeting_segmentation_analysis__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MeetingSegmentationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/property-intelligence/extract":{"post":{"tags":["Property Intelligence","Property Intelligence"],"summary":"Extract Property Intelligence","description":"Extract property intelligence from a call transcript\n\nThis endpoint manually triggers property intelligence extraction for a specific call.\n\n**Process:**\n1. Validates that the call transcript exists and is completed\n2. Uses LLM to extract property details from the transcript\n3. Saves results to database (upsert - safe to re-run)\n4. Returns extracted property intelligence\n\n**Extracted Information:**\n- Roof details (type, age, size, condition)\n- Property information (size, value, type, address)\n- HOA status and restrictions\n- Financial intelligence (equity, financing, insurance)\n- Prior damage history","operationId":"extract_property_intelligence_api_v1_property_intelligence_extract_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PropertyIntelligenceRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PropertyIntelligenceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/property-intelligence/{call_id}":{"get":{"tags":["Property Intelligence","Property Intelligence"],"summary":"Get Property Intelligence","description":"Get property intelligence for a call\n\nRetrieves previously extracted property intelligence data for the specified call.\nIf no property intelligence exists, returns a 404 error.\n\n**Use this endpoint to:**\n- View extracted property details\n- Check data completeness\n- See which fields are missing\n- Get extraction confidence scores","operationId":"get_property_intelligence_api_v1_property_intelligence__call_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"integer","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PropertyIntelligenceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/search/":{"post":{"tags":["Search"],"summary":"Search Documents","description":"Search for similar documents using semantic search\n\nThis endpoint performs semantic search across document chunks using vector similarity.\nIt generates embeddings for the query text and searches for similar chunks in Milvus.","operationId":"search_documents_api_v1_search__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/search/collections":{"get":{"tags":["Search"],"summary":"List Collections","description":"List all collections for the current company","operationId":"list_collections_api_v1_search_collections_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/search/collections/{document_type}/stats":{"get":{"tags":["Search"],"summary":"Get Collection Stats","description":"Get statistics for a specific collection","operationId":"get_collection_stats_api_v1_search_collections__document_type__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_type","in":"path","required":true,"schema":{"type":"string","title":"Document Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/search/documents/{document_id}":{"delete":{"tags":["Search"],"summary":"Delete Document Vectors","description":"Delete all vectors for a specific document","operationId":"delete_document_vectors_api_v1_search_documents__document_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}},{"name":"document_type","in":"query","required":true,"schema":{"type":"string","description":"Document type","title":"Document Type"},"description":"Document type"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{document_id}/chunks":{"get":{"tags":["Chunks"],"summary":"Get Document Chunks","description":"Retrieve all chunks for a specific document","operationId":"get_document_chunks_api_v1_documents__document_id__chunks_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}},{"name":"include_embeddings","in":"query","required":false,"schema":{"type":"boolean","description":"Include embedding vectors","default":false,"title":"Include Embeddings"},"description":"Include embedding vectors"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChunkListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Chunks"],"summary":"Delete Document Chunks","description":"Delete all chunks for a specific document","operationId":"delete_document_chunks_api_v1_documents__document_id__chunks_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chunks/stats":{"get":{"tags":["Chunks"],"summary":"Get Chunk Statistics","description":"Get chunk statistics for the company or specific document","operationId":"get_chunk_statistics_api_v1_chunks_stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"document_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Specific document ID for stats","title":"Document Id"},"description":"Specific document ID for stats"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChunkStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chunks/{chunk_id}":{"get":{"tags":["Chunks"],"summary":"Get Chunk By Id","description":"Retrieve a specific chunk by ID","operationId":"get_chunk_by_id_api_v1_chunks__chunk_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chunk_id","in":"path","required":true,"schema":{"type":"integer","title":"Chunk Id"}},{"name":"include_embedding","in":"query","required":false,"schema":{"type":"boolean","description":"Include embedding vector","default":false,"title":"Include Embedding"},"description":"Include embedding vector"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChunkWithEmbeddingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chunks/rag":{"get":{"tags":["Chunks"],"summary":"Get Chunks For Rag","description":"Retrieve specific chunks for RAG responses with citation information","operationId":"get_chunks_for_rag_api_v1_chunks_rag_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chunk_ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"integer"},"description":"List of chunk IDs for RAG response","title":"Chunk Ids"},"description":"List of chunk IDs for RAG response"},{"name":"include_embeddings","in":"query","required":false,"schema":{"type":"boolean","description":"Include embedding vectors","default":false,"title":"Include Embeddings"},"description":"Include embedding vectors"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChunkWithEmbeddingResponse"},"title":"Response Get Chunks For Rag Api V1 Chunks Rag Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/query-log":{"post":{"tags":["Chunks"],"summary":"Log Rag Query","description":"Log a RAG query for analytics and debugging","operationId":"log_rag_query_api_v1_rag_query_log_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RAGQueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RAGQueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/sop/actions/":{"post":{"tags":["SOP Actions"],"summary":"Sop Actions","description":"Unified endpoint for SOP actions with role-based access control:\n- approve: Approve stages\n- activate: Activate approved stages  \n- deactivate: Deactivate stages\n- delete: Delete stages\n\nOnly stages matching the target_role will be processed.","operationId":"sop_actions_api_v1_sop_actions__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"target_role","in":"query","required":true,"schema":{"type":"string","description":"Target role for the SOP stages (e.g., sales_rep, customer_rep)","title":"Target Role"},"description":"Target role for the SOP stages (e.g., sales_rep, customer_rep)"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SOPActionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SOPActionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sop/compliance/status":{"get":{"tags":["SOP Compliance"],"summary":"Get Compliance Status","description":"Get SOP compliance status for the specified role","operationId":"get_compliance_status_api_v1_sop_compliance_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"target_role","in":"query","required":true,"schema":{"type":"string","description":"Target role to check compliance status for (e.g., sales_rep, customer_rep)","title":"Target Role"},"description":"Target role to check compliance status for (e.g., sales_rep, customer_rep)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComplianceStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/sop/compliance/check":{"post":{"tags":["SOP Compliance"],"summary":"Run Compliance Check","description":"Run a compliance check","operationId":"run_compliance_check_api_v1_sop_compliance_check_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"target_role","in":"query","required":true,"schema":{"type":"string","description":"Target role for compliance check (e.g., sales_rep, customer_rep)","title":"Target Role"},"description":"Target role for compliance check (e.g., sales_rep, customer_rep)"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComplianceCheckRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComplianceCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/personal-otto/ingest/training-documents":{"post":{"tags":["Personal Otto","Personal Otto"],"summary":"Ingest Training Documents","description":"Ingest training examples for Personal Otto AI Clone\n\n- **user_id**: Extracted from JWT token\n- **company_id**: Extracted from JWT token\n- **target_role**: Extracted from JWT token (sales_rep/customer_rep)\n\nRequires at least 10 examples to train a profile.","operationId":"ingest_training_documents_api_v1_personal_otto_ingest_training_documents_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestTrainingDocumentsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/personal-otto/train":{"post":{"tags":["Personal Otto","Personal Otto"],"summary":"Train Personal Clone","description":"Train Personal Otto AI Clone for current user\n\n- **user_id**: Extracted from JWT token\n- **target_role**: Extracted from JWT token\n\nRequirements:\n- Minimum 10 training examples\n- 7 days cooldown between trainings (unless force_retrain=true)","operationId":"train_personal_clone_api_v1_personal_otto_train_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrainProfileRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/personal-otto/profile/status":{"get":{"tags":["Personal Otto","Personal Otto"],"summary":"Get Profile Status","description":"Get current user's AI profile status\n\nReturns profile information if exists, or training requirements if not.","operationId":"get_profile_status_api_v1_personal_otto_profile_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/personal-otto/profile":{"get":{"tags":["Personal Otto","Personal Otto"],"summary":"Get Ai Profile","description":"Get full AI profile details for current user\n\n- **user_id**: Extracted from JWT token\n- **company_id**: Extracted from JWT token\n- **target_role**: Extracted from JWT token\n\nReturns complete communication style, training metadata, and preferences.","operationId":"get_ai_profile_api_v1_personal_otto_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/personal-otto/training-status/{job_id}":{"get":{"tags":["Personal Otto","Personal Otto"],"summary":"Get Training Status","description":"Get status of a training job\n\nArgs:\n    job_id: Training job ID returned from /train endpoint","operationId":"get_training_status_api_v1_personal_otto_training_status__job_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/info":{"get":{"summary":"Service Info","operationId":"service_info_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BANTScores":{"properties":{"budget":{"type":"number","title":"Budget"},"authority":{"type":"number","title":"Authority"},"need":{"type":"number","title":"Need"},"timeline":{"type":"number","title":"Timeline"}},"type":"object","required":["budget","authority","need","timeline"],"title":"BANTScores","description":"BANT scores for lead qualification"},"Body_ingest_reference_documents_api_v1_ingestion_reference_documents_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["file"],"title":"Body_ingest_reference_documents_api_v1_ingestion_reference_documents_post"},"Body_ingest_sop_documents_api_v1_ingestion_sop_documents_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_ingest_sop_documents_api_v1_ingestion_sop_documents_post"},"CallType":{"type":"string","enum":["sales_call","csr_call"],"title":"CallType","description":"Valid call types for transcription"},"ChunkListResponse":{"properties":{"chunks":{"items":{"$ref":"#/components/schemas/ChunkResponse"},"type":"array","title":"Chunks","description":"List of chunks"},"count":{"type":"integer","title":"Count","description":"Total number of chunks"},"document_id":{"type":"string","title":"Document Id","description":"Document identifier"}},"type":"object","required":["chunks","count","document_id"],"title":"ChunkListResponse","description":"Response model for chunk list"},"ChunkResponse":{"properties":{"chunk_id":{"type":"integer","title":"Chunk Id","description":"Unique chunk identifier"},"document_id":{"type":"string","title":"Document Id","description":"Document identifier"},"chunk_index":{"type":"integer","title":"Chunk Index","description":"Index of chunk in document"},"content":{"type":"string","title":"Content","description":"Chunk text content"},"metadata":{"type":"object","title":"Metadata","description":"Chunk metadata"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp"}},"type":"object","required":["chunk_id","document_id","chunk_index","content","created_at"],"title":"ChunkResponse","description":"Response model for chunk data"},"ChunkStatsResponse":{"properties":{"total_chunks":{"type":"integer","title":"Total Chunks","description":"Total number of chunks"},"total_embeddings":{"type":"integer","title":"Total Embeddings","description":"Total number of embeddings"},"average_chunk_length":{"type":"number","title":"Average Chunk Length","description":"Average chunk length in characters"},"document_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Document Id","description":"Document identifier if specific"},"company_id":{"type":"string","title":"Company Id","description":"Company identifier"}},"type":"object","required":["total_chunks","total_embeddings","average_chunk_length","company_id"],"title":"ChunkStatsResponse","description":"Response model for chunk statistics"},"ChunkWithEmbeddingResponse":{"properties":{"chunk_id":{"type":"integer","title":"Chunk Id","description":"Unique chunk identifier"},"document_id":{"type":"string","title":"Document Id","description":"Document identifier"},"chunk_index":{"type":"integer","title":"Chunk Index","description":"Index of chunk in document"},"content":{"type":"string","title":"Content","description":"Chunk text content"},"metadata":{"type":"object","title":"Metadata","description":"Chunk metadata"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp"},"embedding":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Embedding","description":"Embedding information"}},"type":"object","required":["chunk_id","document_id","chunk_index","content","created_at"],"title":"ChunkWithEmbeddingResponse","description":"Response model for chunk data with embedding"},"CitationInfo":{"properties":{"document_id":{"type":"string","title":"Document Id","description":"Document identifier"},"chunk_index":{"type":"integer","title":"Chunk Index","description":"Chunk index in document"},"page":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Page","description":"Page number if available"},"section":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section","description":"Section title if available"}},"type":"object","required":["document_id","chunk_index"],"title":"CitationInfo","description":"Citation information for search results"},"CompanyInfo":{"properties":{"company_id":{"type":"string","title":"Company Id"},"name":{"type":"string","title":"Name"},"domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Domain"},"industry":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Industry"},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size"}},"type":"object","required":["company_id","name"],"title":"CompanyInfo"},"ComplianceCheckRequest":{"properties":{"call_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Call Id"},"check_type":{"type":"string","title":"Check Type","default":"full"}},"type":"object","title":"ComplianceCheckRequest","description":"Request for compliance check"},"ComplianceCheckResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Call Id"},"compliance_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Compliance Score"},"target_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Role"},"stages_followed":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Stages Followed","default":[]},"stages_missed":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Stages Missed","default":[]},"violations":{"items":{"type":"string"},"type":"array","title":"Violations","default":[]},"compliance_issues":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Compliance Issues","default":[]},"positive_behaviors":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Positive Behaviors","default":[]},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations","default":[]},"sop_references":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Sop References","default":{}},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success"],"title":"ComplianceCheckResponse","description":"Response for compliance check"},"ComplianceStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"total_stages":{"type":"integer","title":"Total Stages"},"active_stages":{"type":"integer","title":"Active Stages"},"pending_approvals":{"type":"integer","title":"Pending Approvals"},"compliance_ready":{"type":"boolean","title":"Compliance Ready"}},"type":"object","required":["success","total_stages","active_stages","pending_approvals","compliance_ready"],"title":"ComplianceStatusResponse","description":"Response for compliance status"},"CreateSOPStageRequest":{"properties":{"stage_name":{"type":"string","title":"Stage Name"},"stage_description":{"type":"string","title":"Stage Description"},"stage_order":{"type":"integer","title":"Stage Order"},"target_role":{"type":"string","title":"Target Role"},"status":{"type":"string","title":"Status","default":"active"},"approval_status":{"type":"string","title":"Approval Status","default":"pending"}},"type":"object","required":["stage_name","stage_description","stage_order","target_role"],"title":"CreateSOPStageRequest","description":"Request to create a new SOP stage"},"CreateSOPStageResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"stage_id":{"type":"integer","title":"Stage Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","stage_id","message"],"title":"CreateSOPStageResponse","description":"Response for creating SOP stage"},"DocumentStatusResponse":{"properties":{"document_id":{"type":"string","title":"Document Id"},"status":{"type":"string","title":"Status"},"progress":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progress"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"error_details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Details"},"recent_logs":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Recent Logs"}},"type":"object","required":["document_id","status"],"title":"DocumentStatusResponse"},"DocumentUpload":{"properties":{"document_name":{"type":"string","title":"Document Name"},"document_type":{"type":"string","title":"Document Type"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"},"namespace":{"type":"string","title":"Namespace"},"metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["document_name","document_type","namespace"],"title":"DocumentUpload"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IngestTrainingDocumentsRequest":{"properties":{"training_examples":{"items":{"$ref":"#/components/schemas/TrainingExample"},"type":"array","maxItems":50,"minItems":1,"title":"Training Examples"}},"type":"object","required":["training_examples"],"title":"IngestTrainingDocumentsRequest","description":"Request to ingest training examples"},"IngestionResponse":{"properties":{"document_id":{"type":"string","title":"Document Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["document_id","status","message"],"title":"IngestionResponse"},"LeadQualificationRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"analysis_type":{"type":"string","title":"Analysis Type","default":"full"}},"type":"object","required":["call_id"],"title":"LeadQualificationRequest","description":"Request for lead qualification"},"LeadQualificationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"bant_scores":{"$ref":"#/components/schemas/BANTScores"},"overall_score":{"type":"number","title":"Overall Score"},"qualification_status":{"type":"string","title":"Qualification Status"},"decision_makers":{"items":{"type":"string"},"type":"array","title":"Decision Makers"},"urgency_signals":{"items":{"type":"string"},"type":"array","title":"Urgency Signals"},"budget_indicators":{"items":{"type":"string"},"type":"array","title":"Budget Indicators"},"confidence_score":{"type":"number","title":"Confidence Score"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","bant_scores","overall_score","qualification_status","decision_makers","urgency_signals","budget_indicators","confidence_score"],"title":"LeadQualificationResponse","description":"Response for lead qualification"},"MeetingSegmentationRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id","description":"ID of the call to analyze"},"analysis_type":{"type":"string","title":"Analysis Type","description":"Type of analysis: 'full' or 'quick'","default":"full"}},"type":"object","required":["call_id"],"title":"MeetingSegmentationRequest","description":"Request model for meeting segmentation analysis"},"MeetingSegmentationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"part1":{"$ref":"#/components/schemas/PartAnalysis"},"part2":{"$ref":"#/components/schemas/PartAnalysis"},"segmentation_confidence":{"type":"number","title":"Segmentation Confidence"},"transition_point":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Transition Point"},"transition_indicators":{"items":{"type":"string"},"type":"array","title":"Transition Indicators","default":[]},"meeting_structure_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Meeting Structure Score"},"call_type":{"type":"string","title":"Call Type","default":"sales_appointment"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","part1","part2","segmentation_confidence"],"title":"MeetingSegmentationResponse","description":"Response model for meeting segmentation analysis"},"MeetingSegmentationStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"has_segmentation_analysis":{"type":"boolean","title":"Has Segmentation Analysis"},"segmentation_analysis_available":{"type":"boolean","title":"Segmentation Analysis Available"},"part1_duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Part1 Duration"},"part2_duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Part2 Duration"},"meeting_structure_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Meeting Structure Score"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},"type":"object","required":["success","call_id","has_segmentation_analysis","segmentation_analysis_available"],"title":"MeetingSegmentationStatusResponse","description":"Response model for meeting segmentation status"},"ObjectionDetectionRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"analysis_type":{"type":"string","title":"Analysis Type","default":"full"}},"type":"object","required":["call_id"],"title":"ObjectionDetectionRequest","description":"Request for objection detection"},"ObjectionDetectionResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"objections":{"items":{"$ref":"#/components/schemas/ObjectionResponse"},"type":"array","title":"Objections"},"total_objections":{"type":"integer","title":"Total Objections"},"severity_breakdown":{"additionalProperties":{"type":"integer"},"type":"object","title":"Severity Breakdown"},"no_objections_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"No Objections Reason"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["success","call_id","objections","total_objections","severity_breakdown","created_at"],"title":"ObjectionDetectionResponse","description":"Response for objection detection"},"ObjectionResponse":{"properties":{"category_id":{"type":"integer","title":"Category Id"},"category_text":{"type":"string","title":"Category Text"},"objection_text":{"type":"string","title":"Objection Text"},"overcome":{"type":"boolean","title":"Overcome"},"speaker_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Speaker Id"},"timestamp":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Timestamp"},"severity":{"type":"string","title":"Severity"},"response_suggestions":{"items":{"type":"string"},"type":"array","title":"Response Suggestions"},"confidence_score":{"type":"number","title":"Confidence Score"}},"type":"object","required":["category_id","category_text","objection_text","overcome","speaker_id","timestamp","severity","response_suggestions","confidence_score"],"title":"ObjectionResponse","description":"Response for a single objection"},"ObjectionStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"has_objections":{"type":"boolean","title":"Has Objections"},"objections_available":{"type":"boolean","title":"Objections Available"},"total_objections":{"type":"integer","title":"Total Objections"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","has_objections","objections_available","total_objections","created_at"],"title":"ObjectionStatusResponse","description":"Response for objection detection status"},"PartAnalysis":{"properties":{"start_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Start Time","description":"Start time in seconds"},"end_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"End Time","description":"End time in seconds"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration","description":"Duration in seconds"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content","description":"Content summary"},"key_points":{"items":{"type":"string"},"type":"array","title":"Key Points","description":"Key points from this part","default":[]}},"type":"object","title":"PartAnalysis","description":"Model for individual part analysis"},"PropertyIntelligenceRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id","description":"ID of the call to analyze"},"transcript_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transcript Id","description":"Optional transcript ID (will be fetched if not provided)"}},"type":"object","required":["call_id"],"title":"PropertyIntelligenceRequest","description":"Request model for property intelligence extraction"},"PropertyIntelligenceResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"roof_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Roof Type"},"roof_age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Roof Age"},"roof_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Roof Size"},"roof_condition":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Roof Condition"},"property_size":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Property Size"},"property_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Property Value"},"property_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Property Type"},"property_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Property Address"},"hoa_status":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Hoa Status"},"hoa_restrictions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Hoa Restrictions"},"equity_potential":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Equity Potential"},"financing_mentioned":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Financing Mentioned"},"insurance_info":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Insurance Info"},"prior_damage":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Prior Damage"},"extraction_confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Extraction Confidence"},"data_completeness_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Data Completeness Score"},"extracted_fields":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Extracted Fields"},"missing_fields":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Missing Fields"},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success","call_id"],"title":"PropertyIntelligenceResponse","description":"Response model for property intelligence data"},"QualificationStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"has_qualification":{"type":"boolean","title":"Has Qualification"},"qualification_available":{"type":"boolean","title":"Qualification Available"},"qualification_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qualification Status"},"overall_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Overall Score"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","has_qualification","qualification_available","qualification_status","overall_score","created_at"],"title":"QualificationStatusResponse","description":"Response for qualification status"},"RAGQueryRequest":{"properties":{"query_text":{"type":"string","title":"Query Text","description":"The query text"},"results_count":{"type":"integer","title":"Results Count","description":"Number of results returned"},"response_time_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Response Time Ms","description":"Response time in milliseconds"},"feedback_score":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Feedback Score","description":"User feedback score (1-5)"},"feedback_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Feedback Text","description":"User feedback text"}},"type":"object","required":["query_text","results_count"],"title":"RAGQueryRequest","description":"Request model for RAG query logging"},"RAGQueryResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the query was logged successfully"},"query_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Query Id","description":"Logged query identifier"},"logged_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logged At","description":"Logging timestamp"}},"type":"object","required":["success"],"title":"RAGQueryResponse","description":"Response model for RAG query logging"},"RehashAnalysisRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"analysis_type":{"type":"string","title":"Analysis Type","default":"full"}},"type":"object","required":["call_id"],"title":"RehashAnalysisRequest","description":"Request for rehash analysis"},"RehashAnalysisResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"rehash_score":{"type":"integer","title":"Rehash Score"},"what_went_wrong":{"type":"string","title":"What Went Wrong"},"rehash_strategy":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rehash Strategy"},"key_issues":{"items":{"type":"string"},"type":"array","title":"Key Issues","default":[]},"improvement_areas":{"items":{"type":"string"},"type":"array","title":"Improvement Areas","default":[]},"next_steps":{"items":{"type":"string"},"type":"array","title":"Next Steps","default":[]},"confidence_score":{"type":"number","title":"Confidence Score"},"call_type":{"type":"string","title":"Call Type","default":"sales_call"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","rehash_score","what_went_wrong","confidence_score"],"title":"RehashAnalysisResponse","description":"Response for rehash analysis"},"RehashStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"has_rehash_analysis":{"type":"boolean","title":"Has Rehash Analysis"},"rehash_analysis_available":{"type":"boolean","title":"Rehash Analysis Available"},"rehash_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rehash Score"},"what_went_wrong":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"What Went Wrong"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","has_rehash_analysis","rehash_analysis_available"],"title":"RehashStatusResponse","description":"Response for rehash analysis status"},"SOPActionRequest":{"properties":{"action":{"type":"string","title":"Action"},"entity_type":{"type":"string","title":"Entity Type"},"entity_ids":{"items":{"type":"integer"},"type":"array","title":"Entity Ids"},"approved_by":{"type":"string","title":"Approved By"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["action","entity_type","entity_ids","approved_by"],"title":"SOPActionRequest","description":"Unified request for SOP actions"},"SOPActionResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"action":{"type":"string","title":"Action"},"entity_type":{"type":"string","title":"Entity Type"},"processed_count":{"type":"integer","title":"Processed Count"},"failed_count":{"type":"integer","title":"Failed Count"},"results":{"items":{"type":"object"},"type":"array","title":"Results"}},"type":"object","required":["success","action","entity_type","processed_count","failed_count","results"],"title":"SOPActionResponse","description":"Response for SOP actions"},"SOPStageResponse":{"properties":{"id":{"type":"integer","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"stage_name":{"type":"string","title":"Stage Name"},"stage_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stage Description"},"stage_order":{"type":"integer","title":"Stage Order"},"target_role":{"type":"string","title":"Target Role"},"status":{"type":"string","title":"Status"},"approval_status":{"type":"string","title":"Approval Status"},"approved_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Approved By"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","company_id","stage_name","stage_description","stage_order","target_role","status","approval_status","approved_by","created_at"],"title":"SOPStageResponse","description":"SOP Stage response model"},"SOPStagesListResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"stages":{"items":{"$ref":"#/components/schemas/SOPStageResponse"},"type":"array","title":"Stages"},"total_count":{"type":"integer","title":"Total Count"},"pending_count":{"type":"integer","title":"Pending Count"},"approved_count":{"type":"integer","title":"Approved Count"},"active_count":{"type":"integer","title":"Active Count"}},"type":"object","required":["success","stages","total_count","pending_count","approved_count","active_count"],"title":"SOPStagesListResponse","description":"Response for stages list"},"SearchRequest":{"properties":{"query":{"type":"string","maxLength":1000,"minLength":1,"title":"Query","description":"Search query text"},"document_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Document Types","description":"Document types to search","default":["sop-document","reference-document","training-document"]},"limit":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Limit","description":"Maximum number of results","default":10},"score_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score Threshold","description":"Minimum similarity score","default":0.0},"filters":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Filters","description":"Additional metadata filters"}},"type":"object","required":["query"],"title":"SearchRequest","description":"Search request model"},"SearchResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"query":{"type":"string","title":"Query"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results"},"total_found":{"type":"integer","title":"Total Found"},"document_types_searched":{"items":{"type":"string"},"type":"array","title":"Document Types Searched"},"query_vector_dimension":{"type":"integer","title":"Query Vector Dimension"},"collection_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Collection Name"}},"type":"object","required":["success","query","results","total_found","document_types_searched","query_vector_dimension"],"title":"SearchResponse","description":"Search response model"},"SearchResult":{"properties":{"id":{"type":"integer","title":"Id"},"score":{"type":"number","title":"Score"},"chunk_id":{"type":"string","title":"Chunk Id"},"document_id":{"type":"string","title":"Document Id"},"chunk_text":{"type":"string","title":"Chunk Text"},"chunk_index":{"type":"integer","title":"Chunk Index"},"document_type":{"type":"string","title":"Document Type"},"metadata":{"type":"object","title":"Metadata"},"created_at":{"type":"integer","title":"Created At"},"citation":{"anyOf":[{"$ref":"#/components/schemas/CitationInfo"},{"type":"null"}],"description":"Citation information for the chunk"}},"type":"object","required":["id","score","chunk_id","document_id","chunk_text","chunk_index","document_type","metadata","created_at"],"title":"SearchResult","description":"Search result model"},"SummarizationRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id"},"analysis_type":{"type":"string","title":"Analysis Type","default":"full"}},"type":"object","required":["call_id"],"title":"SummarizationRequest","description":"Request for call summarization"},"SummarizationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"summary":{"type":"string","title":"Summary"},"key_points":{"items":{"type":"string"},"type":"array","title":"Key Points"},"action_items":{"items":{"type":"string"},"type":"array","title":"Action Items"},"next_steps":{"items":{"type":"string"},"type":"array","title":"Next Steps"},"sentiment_score":{"type":"number","title":"Sentiment Score"},"confidence_score":{"type":"number","title":"Confidence Score"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","summary","key_points","action_items","next_steps","sentiment_score","confidence_score"],"title":"SummarizationResponse","description":"Response for call summarization"},"SummarizationStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"call_id":{"type":"integer","title":"Call Id"},"has_summary":{"type":"boolean","title":"Has Summary"},"summary_available":{"type":"boolean","title":"Summary Available"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"}},"type":"object","required":["success","call_id","has_summary","summary_available","created_at"],"title":"SummarizationStatusResponse","description":"Response for summarization status"},"TokenValidationResponse":{"properties":{"valid":{"type":"boolean","title":"Valid"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"company_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Id"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"expires_at":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Expires At"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["valid"],"title":"TokenValidationResponse"},"TrainProfileRequest":{"properties":{"force_retrain":{"type":"boolean","title":"Force Retrain","description":"Force retrain even if recently trained","default":false}},"type":"object","title":"TrainProfileRequest","description":"Request to train AI profile"},"TrainingExample":{"properties":{"message":{"type":"string","maxLength":500,"minLength":10,"title":"Message","description":"Message text"},"type":{"type":"string","title":"Type","description":"Message type (followup, greeting, closing, etc.)"},"situation":{"type":"string","title":"Situation","description":"Situation context (appointment_confirmation, etc.)"}},"type":"object","required":["message","type","situation"],"title":"TrainingExample","description":"Single training example"},"TranscriptStatusResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"transcript_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transcript Id"},"call_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Call Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At"},"processed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Processed At"}},"type":"object","required":["success"],"title":"TranscriptStatusResponse","description":"Response for transcript status"},"TranscriptionRequest":{"properties":{"call_id":{"type":"integer","title":"Call Id","description":"ID of the call to transcribe"},"audio_url":{"type":"string","title":"Audio Url","description":"URL to the audio file to transcribe"},"call_type":{"$ref":"#/components/schemas/CallType","description":"Type of call. Valid values: sales_call (Sales representative call) or csr_call (Customer service representative call)","default":"sales_call"}},"type":"object","required":["call_id","audio_url"],"title":"TranscriptionRequest","description":"Request to transcribe a call"},"TranscriptionResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"transcript_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transcript Id"},"task_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"}},"type":"object","required":["success","message"],"title":"TranscriptionResponse","description":"Response for transcription request"},"UserInfo":{"properties":{"user_id":{"type":"string","title":"User Id"},"email":{"type":"string","title":"Email"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"role":{"type":"string","title":"Role"},"company_id":{"type":"string","title":"Company Id"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"},"api_version":{"type":"string","title":"Api Version","default":"v1"}},"type":"object","required":["user_id","email","role","company_id","permissions"],"title":"UserInfo"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}